import{$,$a as St,$b as I0,A as an,Aa as el,Ab as rl,B as Qc,Ba as s0,Bb as sl,C as No,Ca as wn,Cb as as,D as Xy,Da as Lo,Db as m0,E as Jy,Ea as Uo,Eb as ol,F as Xc,Fa as Tt,Fb as al,G as ft,Ga as jo,Gb as Uh,H as Rh,Ha as N,Hb as jh,I as is,Ia as k,Ib as cs,J as lr,Ja as Fh,Jb as Bh,K as Dh,Ka as Bo,Kb as g0,L as Oh,La as o0,Lb as ci,M as cn,Ma as tl,Mb as _0,N as Zy,Na as nl,Nb as v0,O as Jc,Oa as rs,Ob as ls,P as ur,Pa as Vh,Pb as Go,Q as ki,Qa as ce,Qb as Nn,R as kh,Ra as a0,Rb as us,S as e0,Sa as dr,Sb as y0,T as xh,Ta as ss,Tb as b0,U as Zc,Ua as Wt,Ub as ue,V as xi,Va as Ze,Vb as Vi,W as Qt,Wa as c0,Wb as cl,X as ai,Xa as l0,Xb as ll,Y as ot,Ya as oe,Yb as _t,Z as je,Za as dn,Zb as Nt,_ as ln,_a as j,_b as w0,a as U,aa as We,ab as Lh,ac as xe,b as me,ba as t0,bb as v,bc as E0,ca as te,cb as y,cc as C0,d as Di,da as Mh,db as L,dc as ul,e as g,ea as M,eb as Le,ec as dl,f as cr,fa as W,fb as u0,g as Ih,ga as Ve,gb as G,h as Et,ha as Fo,hb as d0,hc as T0,i as Eh,ia as H,ib as ne,ic as zh,j as Ch,ja as He,jb as zo,jc as $h,k as Se,ka as Oe,kb as h0,l as st,la as n0,lb as hr,lc as qh,m as Ky,ma as pt,mb as Ni,mc as Gh,n as Yy,na as i0,nb as Fi,nc as Wh,o as Oi,oa as Mi,ob as il,oc as Hh,p as Th,pa as yn,pb as E,pc as Kh,q as Sh,qa as bn,qb as ve,r as Ah,ra as ge,rb as be,s as Ct,sa as _e,sb as os,t as se,ta as un,tb as $o,u as xo,ua as ke,ub as fr,v as Ph,va as Nh,vb as qo,w as Qy,wa as Je,wb as Mt,x as oi,xa as Vo,xb as Q,y as ye,ya as Ke,yb as f0,z as Mo,za as r0,zb as p0}from"./chunk-6WIYIGMX.js";var Ho=class{},fl=class{},In=class t{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(n=>{let i=n.indexOf(":");if(i>0){let r=n.slice(0,i),s=r.toLowerCase(),o=n.slice(i+1).trim();this.maybeSetNormalizedName(r,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((n,i)=>{this.setHeaderEntries(i,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([n,i])=>{this.setHeaderEntries(n,i)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let n=this.headers.get(e.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,n){return this.clone({name:e,value:n,op:"a"})}set(e,n){return this.clone({name:e,value:n,op:"s"})}delete(e,n){return this.clone({name:e,value:n,op:"d"})}maybeSetNormalizedName(e,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,e)}init(){this.lazyInit&&(this.lazyInit instanceof t?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(n=>{this.headers.set(n,e.headers.get(n)),this.normalizedNames.set(n,e.normalizedNames.get(n))})}clone(e){let n=new t;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof t?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([e]),n}applyUpdate(e){let n=e.name.toLowerCase();switch(e.op){case"a":case"s":let i=e.value;if(typeof i=="string"&&(i=[i]),i.length===0)return;this.maybeSetNormalizedName(e.name,n);let r=(e.op==="a"?this.headers.get(n):void 0)||[];r.push(...i),this.headers.set(n,r);break;case"d":let s=e.value;if(!s)this.headers.delete(n),this.normalizedNames.delete(n);else{let o=this.headers.get(n);if(!o)return;o=o.filter(c=>s.indexOf(c)===-1),o.length===0?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,o)}break}}setHeaderEntries(e,n){let i=(Array.isArray(n)?n:[n]).map(s=>s.toString()),r=e.toLowerCase();this.headers.set(r,i),this.maybeSetNormalizedName(e,r)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>e(this.normalizedNames.get(n),this.headers.get(n)))}};var Qh=class{encodeKey(e){return S0(e)}encodeValue(e){return S0(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function nP(t,e){let n=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(r=>{let s=r.indexOf("="),[o,c]=s==-1?[e.decodeKey(r),""]:[e.decodeKey(r.slice(0,s)),e.decodeValue(r.slice(s+1))],l=n.get(o)||[];l.push(c),n.set(o,l)}),n}var iP=/%(\d[a-f0-9])/gi,rP={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function S0(t){return encodeURIComponent(t).replace(iP,(e,n)=>rP[n]??e)}function hl(t){return`${t}`}var Ui=class t{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new Qh,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=nP(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(n=>{let i=e.fromObject[n],r=Array.isArray(i)?i.map(hl):[hl(i)];this.map.set(n,r)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let n=this.map.get(e);return n?n[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,n){return this.clone({param:e,value:n,op:"a"})}appendAll(e){let n=[];return Object.keys(e).forEach(i=>{let r=e[i];Array.isArray(r)?r.forEach(s=>{n.push({param:i,value:s,op:"a"})}):n.push({param:i,value:r,op:"a"})}),this.clone(n)}set(e,n){return this.clone({param:e,value:n,op:"s"})}delete(e,n){return this.clone({param:e,value:n,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let n=this.encoder.encodeKey(e);return this.map.get(e).map(i=>n+"="+this.encoder.encodeValue(i)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let n=new t({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat(e),n}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let n=(e.op==="a"?this.map.get(e.param):void 0)||[];n.push(hl(e.value)),this.map.set(e.param,n);break;case"d":if(e.value!==void 0){let i=this.map.get(e.param)||[],r=i.indexOf(hl(e.value));r!==-1&&i.splice(r,1),i.length>0?this.map.set(e.param,i):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var Xh=class{constructor(){this.map=new Map}set(e,n){return this.map.set(e,n),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function sP(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function A0(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer}function P0(t){return typeof Blob<"u"&&t instanceof Blob}function R0(t){return typeof FormData<"u"&&t instanceof FormData}function oP(t){return typeof URLSearchParams<"u"&&t instanceof URLSearchParams}var Wo=class t{constructor(e,n,i,r){this.url=n,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase();let s;if(sP(this.method)||r?(this.body=i!==void 0?i:null,s=r):s=i,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params),this.transferCache=s.transferCache),this.headers??=new In,this.context??=new Xh,!this.params)this.params=new Ui,this.urlWithParams=n;else{let o=this.params.toString();if(o.length===0)this.urlWithParams=n;else{let c=n.indexOf("?"),l=c===-1?"?":c<n.length-1?"&":"";this.urlWithParams=n+l+o}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||A0(this.body)||P0(this.body)||R0(this.body)||oP(this.body)?this.body:this.body instanceof Ui?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||R0(this.body)?null:P0(this.body)?this.body.type||null:A0(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof Ui?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(e={}){let n=e.method||this.method,i=e.url||this.url,r=e.responseType||this.responseType,s=e.transferCache??this.transferCache,o=e.body!==void 0?e.body:this.body,c=e.withCredentials??this.withCredentials,l=e.reportProgress??this.reportProgress,u=e.headers||this.headers,h=e.params||this.params,p=e.context??this.context;return e.setHeaders!==void 0&&(u=Object.keys(e.setHeaders).reduce((_,C)=>_.set(C,e.setHeaders[C]),u)),e.setParams&&(h=Object.keys(e.setParams).reduce((_,C)=>_.set(C,e.setParams[C]),h)),new t(n,i,o,{params:h,headers:u,context:p,reportProgress:l,responseType:r,withCredentials:c,transferCache:s})}},ji=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}(ji||{}),Ko=class{constructor(e,n=200,i="OK"){this.headers=e.headers||new In,this.status=e.status!==void 0?e.status:n,this.statusText=e.statusText||i,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},pl=class t extends Ko{constructor(e={}){super(e),this.type=ji.ResponseHeader}clone(e={}){return new t({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Yo=class t extends Ko{constructor(e={}){super(e),this.type=ji.Response,this.body=e.body!==void 0?e.body:null}clone(e={}){return new t({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Li=class extends Ko{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},M0=200,aP=204;function Yh(t,e){return{body:e,headers:t.headers,context:t.context,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials,transferCache:t.transferCache}}var ef=(()=>{let e=class e{constructor(i){this.handler=i}request(i,r,s={}){let o;if(i instanceof Wo)o=i;else{let u;s.headers instanceof In?u=s.headers:u=new In(s.headers);let h;s.params&&(s.params instanceof Ui?h=s.params:h=new Ui({fromObject:s.params})),o=new Wo(i,r,s.body!==void 0?s.body:null,{headers:u,context:s.context,params:h,reportProgress:s.reportProgress,responseType:s.responseType||"json",withCredentials:s.withCredentials,transferCache:s.transferCache})}let c=se(o).pipe(lr(u=>this.handler.handle(u)));if(i instanceof Wo||s.observe==="events")return c;let l=c.pipe(ft(u=>u instanceof Yo));switch(s.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return l.pipe(ye(u=>{if(u.body!==null&&!(u.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return u.body}));case"blob":return l.pipe(ye(u=>{if(u.body!==null&&!(u.body instanceof Blob))throw new Error("Response is not a Blob.");return u.body}));case"text":return l.pipe(ye(u=>{if(u.body!==null&&typeof u.body!="string")throw new Error("Response is not a string.");return u.body}));case"json":default:return l.pipe(ye(u=>u.body))}case"response":return l;default:throw new Error(`Unreachable: unhandled observe type ${s.observe}}`)}}delete(i,r={}){return this.request("DELETE",i,r)}get(i,r={}){return this.request("GET",i,r)}head(i,r={}){return this.request("HEAD",i,r)}jsonp(i,r){return this.request("JSONP",i,{params:new Ui().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(i,r={}){return this.request("OPTIONS",i,r)}patch(i,r,s={}){return this.request("PATCH",i,Yh(s,r))}post(i,r,s={}){return this.request("POST",i,Yh(s,r))}put(i,r,s={}){return this.request("PUT",i,Yh(s,r))}};e.\u0275fac=function(r){return new(r||e)(M(Ho))},e.\u0275prov=$({token:e,factory:e.\u0275fac});let t=e;return t})(),cP=/^\)\]\}',?\n/,lP="X-Request-URL";function D0(t){if(t.url)return t.url;let e=lP.toLocaleLowerCase();return t.headers.get(e)}var uP=(()=>{let e=class e{constructor(){this.fetchImpl=W(Jh,{optional:!0})?.fetch??fetch.bind(globalThis),this.ngZone=W(ce)}handle(i){return new Et(r=>{let s=new AbortController;return this.doRequest(i,s.signal,r).then(Zh,o=>r.error(new Li({error:o}))),()=>s.abort()})}doRequest(i,r,s){return g(this,null,function*(){let o=this.createRequestInit(i),c;try{let O=this.ngZone.runOutsideAngular(()=>this.fetchImpl(i.urlWithParams,U({signal:r},o)));dP(O),s.next({type:ji.Sent}),c=yield O}catch(O){s.error(new Li({error:O,status:O.status??0,statusText:O.statusText,url:i.urlWithParams,headers:O.headers}));return}let l=new In(c.headers),u=c.statusText,h=D0(c)??i.urlWithParams,p=c.status,_=null;if(i.reportProgress&&s.next(new pl({headers:l,status:p,statusText:u,url:h})),c.body){let O=c.headers.get("content-length"),F=[],D=c.body.getReader(),z=0,X,Y,Z=typeof Zone<"u"&&Zone.current;yield this.ngZone.runOutsideAngular(()=>g(this,null,function*(){for(;;){let{done:le,value:T}=yield D.read();if(le)break;if(F.push(T),z+=T.length,i.reportProgress){Y=i.responseType==="text"?(Y??"")+(X??=new TextDecoder).decode(T,{stream:!0}):void 0;let b=()=>s.next({type:ji.DownloadProgress,total:O?+O:void 0,loaded:z,partialText:Y});Z?Z.run(b):b()}}}));let Ne=this.concatChunks(F,z);try{let le=c.headers.get("Content-Type")??"";_=this.parseBody(i,Ne,le)}catch(le){s.error(new Li({error:le,headers:new In(c.headers),status:c.status,statusText:c.statusText,url:D0(c)??i.urlWithParams}));return}}p===0&&(p=_?M0:0),p>=200&&p<300?(s.next(new Yo({body:_,headers:l,status:p,statusText:u,url:h})),s.complete()):s.error(new Li({error:_,headers:l,status:p,statusText:u,url:h}))})}parseBody(i,r,s){switch(i.responseType){case"json":let o=new TextDecoder().decode(r).replace(cP,"");return o===""?null:JSON.parse(o);case"text":return new TextDecoder().decode(r);case"blob":return new Blob([r],{type:s});case"arraybuffer":return r.buffer}}createRequestInit(i){let r={},s=i.withCredentials?"include":void 0;if(i.headers.forEach((o,c)=>r[o]=c.join(",")),i.headers.has("Accept")||(r.Accept="application/json, text/plain, */*"),!i.headers.has("Content-Type")){let o=i.detectContentTypeHeader();o!==null&&(r["Content-Type"]=o)}return{body:i.serializeBody(),method:i.method,headers:r,credentials:s}}concatChunks(i,r){let s=new Uint8Array(r),o=0;for(let c of i)s.set(c,o),o+=c.length;return s}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=$({token:e,factory:e.\u0275fac});let t=e;return t})(),Jh=class{};function Zh(){}function dP(t){t.then(Zh,Zh)}function N0(t,e){return e(t)}function hP(t,e){return(n,i)=>e.intercept(n,{handle:r=>t(r,i)})}function fP(t,e,n){return(i,r)=>yn(n,()=>e(i,s=>t(s,r)))}var pP=new te(""),tf=new te(""),mP=new te(""),F0=new te("",{providedIn:"root",factory:()=>!0});function gP(){let t=null;return(e,n)=>{t===null&&(t=(W(pP,{optional:!0})??[]).reduceRight(hP,N0));let i=W(Vo);if(W(F0)){let s=i.add();return t(e,n).pipe(ur(()=>i.remove(s)))}else return t(e,n)}}var O0=(()=>{let e=class e extends Ho{constructor(i,r){super(),this.backend=i,this.injector=r,this.chain=null,this.pendingTasks=W(Vo),this.contributeToStability=W(F0)}handle(i){if(this.chain===null){let r=Array.from(new Set([...this.injector.get(tf),...this.injector.get(mP,[])]));this.chain=r.reduceRight((s,o)=>fP(s,o,this.injector),N0)}if(this.contributeToStability){let r=this.pendingTasks.add();return this.chain(i,s=>this.backend.handle(s)).pipe(ur(()=>this.pendingTasks.remove(r)))}else return this.chain(i,r=>this.backend.handle(r))}};e.\u0275fac=function(r){return new(r||e)(M(fl),M(Mi))},e.\u0275prov=$({token:e,factory:e.\u0275fac});let t=e;return t})();var _P=/^\)\]\}',?\n/;function vP(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}var k0=(()=>{let e=class e{constructor(i){this.xhrFactory=i}handle(i){if(i.method==="JSONP")throw new je(-2800,!1);let r=this.xhrFactory;return(r.\u0275loadImpl?Ct(r.\u0275loadImpl()):se(null)).pipe(Qt(()=>new Et(o=>{let c=r.build();if(c.open(i.method,i.urlWithParams),i.withCredentials&&(c.withCredentials=!0),i.headers.forEach((D,z)=>c.setRequestHeader(D,z.join(","))),i.headers.has("Accept")||c.setRequestHeader("Accept","application/json, text/plain, */*"),!i.headers.has("Content-Type")){let D=i.detectContentTypeHeader();D!==null&&c.setRequestHeader("Content-Type",D)}if(i.responseType){let D=i.responseType.toLowerCase();c.responseType=D!=="json"?D:"text"}let l=i.serializeBody(),u=null,h=()=>{if(u!==null)return u;let D=c.statusText||"OK",z=new In(c.getAllResponseHeaders()),X=vP(c)||i.url;return u=new pl({headers:z,status:c.status,statusText:D,url:X}),u},p=()=>{let{headers:D,status:z,statusText:X,url:Y}=h(),Z=null;z!==aP&&(Z=typeof c.response>"u"?c.responseText:c.response),z===0&&(z=Z?M0:0);let Ne=z>=200&&z<300;if(i.responseType==="json"&&typeof Z=="string"){let le=Z;Z=Z.replace(_P,"");try{Z=Z!==""?JSON.parse(Z):null}catch(T){Z=le,Ne&&(Ne=!1,Z={error:T,text:Z})}}Ne?(o.next(new Yo({body:Z,headers:D,status:z,statusText:X,url:Y||void 0})),o.complete()):o.error(new Li({error:Z,headers:D,status:z,statusText:X,url:Y||void 0}))},_=D=>{let{url:z}=h(),X=new Li({error:D,status:c.status||0,statusText:c.statusText||"Unknown Error",url:z||void 0});o.error(X)},C=!1,O=D=>{C||(o.next(h()),C=!0);let z={type:ji.DownloadProgress,loaded:D.loaded};D.lengthComputable&&(z.total=D.total),i.responseType==="text"&&c.responseText&&(z.partialText=c.responseText),o.next(z)},F=D=>{let z={type:ji.UploadProgress,loaded:D.loaded};D.lengthComputable&&(z.total=D.total),o.next(z)};return c.addEventListener("load",p),c.addEventListener("error",_),c.addEventListener("timeout",_),c.addEventListener("abort",_),i.reportProgress&&(c.addEventListener("progress",O),l!==null&&c.upload&&c.upload.addEventListener("progress",F)),c.send(l),o.next({type:ji.Sent}),()=>{c.removeEventListener("error",_),c.removeEventListener("abort",_),c.removeEventListener("load",p),c.removeEventListener("timeout",_),i.reportProgress&&(c.removeEventListener("progress",O),l!==null&&c.upload&&c.upload.removeEventListener("progress",F)),c.readyState!==c.DONE&&c.abort()}})))}};e.\u0275fac=function(r){return new(r||e)(M(dl))},e.\u0275prov=$({token:e,factory:e.\u0275fac});let t=e;return t})(),V0=new te(""),yP="XSRF-TOKEN",bP=new te("",{providedIn:"root",factory:()=>yP}),wP="X-XSRF-TOKEN",IP=new te("",{providedIn:"root",factory:()=>wP}),ml=class{},EP=(()=>{let e=class e{constructor(i,r,s){this.doc=i,this.platform=r,this.cookieName=s,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if(this.platform==="server")return null;let i=this.doc.cookie||"";return i!==this.lastCookieString&&(this.parseCount++,this.lastToken=cl(i,this.cookieName),this.lastCookieString=i),this.lastToken}};e.\u0275fac=function(r){return new(r||e)(M(ue),M(wn),M(bP))},e.\u0275prov=$({token:e,factory:e.\u0275fac});let t=e;return t})();function CP(t,e){let n=t.url.toLowerCase();if(!W(V0)||t.method==="GET"||t.method==="HEAD"||n.startsWith("http://")||n.startsWith("https://"))return e(t);let i=W(ml).getToken(),r=W(IP);return i!=null&&!t.headers.has(r)&&(t=t.clone({headers:t.headers.set(r,i)})),e(t)}var L0=function(t){return t[t.Interceptors=0]="Interceptors",t[t.LegacyInterceptors=1]="LegacyInterceptors",t[t.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",t[t.NoXsrfProtection=3]="NoXsrfProtection",t[t.JsonpSupport=4]="JsonpSupport",t[t.RequestsMadeViaParent=5]="RequestsMadeViaParent",t[t.Fetch=6]="Fetch",t}(L0||{});function TP(t,e){return{\u0275kind:t,\u0275providers:e}}function U0(...t){let e=[ef,k0,O0,{provide:Ho,useExisting:O0},{provide:fl,useFactory:()=>W(uP,{optional:!0})??W(k0)},{provide:tf,useValue:CP,multi:!0},{provide:V0,useValue:!0},{provide:ml,useClass:EP}];for(let n of t)e.push(...n.\u0275providers);return pt(e)}var x0=new te("");function j0(){return TP(L0.LegacyInterceptors,[{provide:x0,useFactory:gP},{provide:tf,useExisting:x0,multi:!0}])}var sf=class extends b0{constructor(){super(...arguments),this.supportsDOMEvents=!0}},of=class t extends sf{static makeCurrent(){y0(new t)}onAndCancel(e,n,i){return e.addEventListener(n,i),()=>{e.removeEventListener(n,i)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=PP();return n==null?null:RP(n)}resetBaseElement(){Qo=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return cl(document.cookie,e)}},Qo=null;function PP(){return Qo=Qo||document.querySelector("base"),Qo?Qo.getAttribute("href"):null}function RP(t){return new URL(t,document.baseURI).pathname}var DP=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=$({token:e,factory:e.\u0275fac});let t=e;return t})(),gl=new te(""),$0=(()=>{let e=class e{constructor(i,r){this._zone=r,this._eventNameToPlugin=new Map,i.forEach(s=>{s.manager=this}),this._plugins=i.slice().reverse()}addEventListener(i,r,s){return this._findPluginFor(r).addEventListener(i,r,s)}getZone(){return this._zone}_findPluginFor(i){let r=this._eventNameToPlugin.get(i);if(r)return r;if(r=this._plugins.find(o=>o.supports(i)),!r)throw new je(5101,!1);return this._eventNameToPlugin.set(i,r),r}};e.\u0275fac=function(r){return new(r||e)(M(gl),M(ce))},e.\u0275prov=$({token:e,factory:e.\u0275fac});let t=e;return t})(),Xo=class{constructor(e){this._doc=e}},nf="ng-app-id",q0=(()=>{let e=class e{constructor(i,r,s,o={}){this.doc=i,this.appId=r,this.nonce=s,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=ul(o),this.resetHostNodes()}addStyles(i){for(let r of i)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(i){for(let r of i)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let i=this.styleNodesInDOM;i&&(i.forEach(r=>r.remove()),i.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(i){this.hostNodes.add(i);for(let r of this.getAllStyles())this.addStyleToHost(i,r)}removeHost(i){this.hostNodes.delete(i)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(i){for(let r of this.hostNodes)this.addStyleToHost(r,i)}onStyleRemoved(i){let r=this.styleRef;r.get(i)?.elements?.forEach(s=>s.remove()),r.delete(i)}collectServerRenderedStyles(){let i=this.doc.head?.querySelectorAll(`style[${nf}="${this.appId}"]`);if(i?.length){let r=new Map;return i.forEach(s=>{s.textContent!=null&&r.set(s.textContent,s)}),r}return null}changeUsageCount(i,r){let s=this.styleRef;if(s.has(i)){let o=s.get(i);return o.usage+=r,o.usage}return s.set(i,{usage:r,elements:[]}),r}getStyleElement(i,r){let s=this.styleNodesInDOM,o=s?.get(r);if(o?.parentNode===i)return s.delete(r),o.removeAttribute(nf),o;{let c=this.doc.createElement("style");return this.nonce&&c.setAttribute("nonce",this.nonce),c.textContent=r,this.platformIsServer&&c.setAttribute(nf,this.appId),i.appendChild(c),c}}addStyleToHost(i,r){let s=this.getStyleElement(i,r),o=this.styleRef,c=o.get(r)?.elements;c?c.push(s):o.set(r,{elements:[s],usage:1})}resetHostNodes(){let i=this.hostNodes;i.clear(),i.add(this.doc.head)}};e.\u0275fac=function(r){return new(r||e)(M(ue),M(el),M(Uo,8),M(wn))},e.\u0275prov=$({token:e,factory:e.\u0275fac});let t=e;return t})(),rf={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},cf=/%COMP%/g,G0="%COMP%",OP=`_nghost-${G0}`,kP=`_ngcontent-${G0}`,xP=!0,MP=new te("",{providedIn:"root",factory:()=>xP});function NP(t){return kP.replace(cf,t)}function FP(t){return OP.replace(cf,t)}function W0(t,e){return e.map(n=>n.replace(cf,t))}var _l=(()=>{let e=class e{constructor(i,r,s,o,c,l,u,h=null){this.eventManager=i,this.sharedStylesHost=r,this.appId=s,this.removeStylesOnCompDestroy=o,this.doc=c,this.platformId=l,this.ngZone=u,this.nonce=h,this.rendererByCompId=new Map,this.platformIsServer=ul(l),this.defaultRenderer=new Jo(i,c,u,this.platformIsServer)}createRenderer(i,r){if(!i||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Fo.ShadowDom&&(r=me(U({},r),{encapsulation:Fo.Emulated}));let s=this.getOrCreateRenderer(i,r);return s instanceof vl?s.applyToHost(i):s instanceof Zo&&s.applyStyles(),s}getOrCreateRenderer(i,r){let s=this.rendererByCompId,o=s.get(r.id);if(!o){let c=this.doc,l=this.ngZone,u=this.eventManager,h=this.sharedStylesHost,p=this.removeStylesOnCompDestroy,_=this.platformIsServer;switch(r.encapsulation){case Fo.Emulated:o=new vl(u,h,r,this.appId,p,c,l,_);break;case Fo.ShadowDom:return new af(u,h,i,r,c,l,this.nonce,_);default:o=new Zo(u,h,r,p,c,l,_);break}s.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(r){return new(r||e)(M($0),M(q0),M(el),M(MP),M(ue),M(wn),M(ce),M(Uo))},e.\u0275prov=$({token:e,factory:e.\u0275fac});let t=e;return t})(),Jo=class{constructor(e,n,i,r){this.eventManager=e,this.doc=n,this.ngZone=i,this.platformIsServer=r,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(rf[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(B0(e)?e.content:e).appendChild(n)}insertBefore(e,n,i){e&&(B0(e)?e.content:e).insertBefore(n,i)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let i=typeof e=="string"?this.doc.querySelector(e):e;if(!i)throw new je(-5104,!1);return n||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,i,r){if(r){n=r+":"+n;let s=rf[r];s?e.setAttributeNS(s,n,i):e.setAttribute(n,i)}else e.setAttribute(n,i)}removeAttribute(e,n,i){if(i){let r=rf[i];r?e.removeAttributeNS(r,n):e.removeAttribute(`${i}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,i,r){r&(jo.DashCase|jo.Important)?e.style.setProperty(n,i,r&jo.Important?"important":""):e.style[n]=i}removeStyle(e,n,i){i&jo.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,i){e!=null&&(e[n]=i)}setValue(e,n){e.nodeValue=n}listen(e,n,i){if(typeof e=="string"&&(e=us().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(i))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function B0(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var af=class extends Jo{constructor(e,n,i,r,s,o,c,l){super(e,s,o,l),this.sharedStylesHost=n,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let u=W0(r.id,r.styles);for(let h of u){let p=document.createElement("style");c&&p.setAttribute("nonce",c),p.textContent=h,this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,i){return super.insertBefore(this.nodeOrShadowRoot(e),n,i)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Zo=class extends Jo{constructor(e,n,i,r,s,o,c,l){super(e,s,o,c),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=r,this.styles=l?W0(l,i.styles):i.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},vl=class extends Zo{constructor(e,n,i,r,s,o,c,l){let u=r+"-"+i.id;super(e,n,i,s,o,c,l,u),this.contentAttr=NP(u),this.hostAttr=FP(u)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let i=super.createElement(e,n);return super.setAttribute(i,this.contentAttr,""),i}},VP=(()=>{let e=class e extends Xo{constructor(i){super(i)}supports(i){return!0}addEventListener(i,r,s){return i.addEventListener(r,s,!1),()=>this.removeEventListener(i,r,s)}removeEventListener(i,r,s){return i.removeEventListener(r,s)}};e.\u0275fac=function(r){return new(r||e)(M(ue))},e.\u0275prov=$({token:e,factory:e.\u0275fac});let t=e;return t})(),LP=(()=>{let e=class e extends Xo{constructor(i){super(i),this.delegate=W(v0,{optional:!0})}supports(i){return this.delegate?this.delegate.supports(i):!1}addEventListener(i,r,s){return this.delegate.addEventListener(i,r,s)}removeEventListener(i,r,s){return this.delegate.removeEventListener(i,r,s)}};e.\u0275fac=function(r){return new(r||e)(M(ue))},e.\u0275prov=$({token:e,factory:e.\u0275fac});let t=e;return t})(),z0=["alt","control","meta","shift"],UP={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},jP={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},BP=(()=>{let e=class e extends Xo{constructor(i){super(i)}supports(i){return e.parseEventName(i)!=null}addEventListener(i,r,s){let o=e.parseEventName(r),c=e.eventCallback(o.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>us().onAndCancel(i,o.domEventName,c))}static parseEventName(i){let r=i.toLowerCase().split("."),s=r.shift();if(r.length===0||!(s==="keydown"||s==="keyup"))return null;let o=e._normalizeKey(r.pop()),c="",l=r.indexOf("code");if(l>-1&&(r.splice(l,1),c="code."),z0.forEach(h=>{let p=r.indexOf(h);p>-1&&(r.splice(p,1),c+=h+".")}),c+=o,r.length!=0||o.length===0)return null;let u={};return u.domEventName=s,u.fullKey=c,u}static matchEventFullKeyCode(i,r){let s=UP[i.key]||i.key,o="";return r.indexOf("code.")>-1&&(s=i.code,o="code."),s==null||!s?!1:(s=s.toLowerCase(),s===" "?s="space":s==="."&&(s="dot"),z0.forEach(c=>{if(c!==s){let l=jP[c];l(i)&&(o+=c+".")}}),o+=s,o===r)}static eventCallback(i,r,s){return o=>{e.matchEventFullKeyCode(o,i)&&s.runGuarded(()=>r(o))}}static _normalizeKey(i){return i==="esc"?"escape":i}};e.\u0275fac=function(r){return new(r||e)(M(ue))},e.\u0275prov=$({token:e,factory:e.\u0275fac});let t=e;return t})();function H0(t,e){return _0(U({rootComponent:t},zP(e)))}function zP(t){return{appProviders:[...HP,...t?.providers??[]],platformProviders:WP}}function $P(){of.makeCurrent()}function qP(){return new Nh}function GP(){return r0(document),document}var WP=[{provide:wn,useValue:E0},{provide:s0,useValue:$P,multi:!0},{provide:ue,useFactory:GP,deps:[]}];var HP=[{provide:i0,useValue:"root"},{provide:Nh,useFactory:qP,deps:[]},{provide:gl,useClass:VP,multi:!0,deps:[ue,ce,wn]},{provide:gl,useClass:BP,multi:!0,deps:[ue]},{provide:gl,useClass:LP,multi:!0},_l,q0,$0,{provide:nl,useExisting:_l},{provide:dl,useClass:DP,deps:[]},[]];var K0=(()=>{let e=class e{constructor(i){this._doc=i}getTitle(){return this._doc.title}setTitle(i){this._doc.title=i||""}};e.\u0275fac=function(r){return new(r||e)(M(ue))},e.\u0275prov=$({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var pe="primary",_a=Symbol("RouteTitle"),ff=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function gs(t){return new ff(t)}function YP(t,e,n){let i=n.path.split("/");if(i.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||i.length<t.length))return null;let r={};for(let s=0;s<i.length;s++){let o=i[s],c=t[s];if(o[0]===":")r[o.substring(1)]=c;else if(o!==c.path)return null}return{consumed:t.slice(0,i.length),posParams:r}}function QP(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Fn(t[n],e[n]))return!1;return!0}function Fn(t,e){let n=t?pf(t):void 0,i=e?pf(e):void 0;if(!n||!i||n.length!=i.length)return!1;let r;for(let s=0;s<n.length;s++)if(r=n[s],!nb(t[r],e[r]))return!1;return!0}function pf(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function nb(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),i=[...e].sort();return n.every((r,s)=>i[s]===r)}else return t===e}function ib(t){return t.length>0?t[t.length-1]:null}function Bi(t){return Ph(t)?t:al(t)?Ct(Promise.resolve(t)):se(t)}var XP={exact:sb,subset:ob},rb={exact:JP,subset:ZP,ignored:()=>!0};function Y0(t,e,n){return XP[n.paths](t.root,e.root,n.matrixParams)&&rb[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function JP(t,e){return Fn(t,e)}function sb(t,e,n){if(!mr(t.segments,e.segments)||!wl(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let i in e.children)if(!t.children[i]||!sb(t.children[i],e.children[i],n))return!1;return!0}function ZP(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>nb(t[n],e[n]))}function ob(t,e,n){return ab(t,e,e.segments,n)}function ab(t,e,n,i){if(t.segments.length>n.length){let r=t.segments.slice(0,n.length);return!(!mr(r,n)||e.hasChildren()||!wl(r,n,i))}else if(t.segments.length===n.length){if(!mr(t.segments,n)||!wl(t.segments,n,i))return!1;for(let r in e.children)if(!t.children[r]||!ob(t.children[r],e.children[r],i))return!1;return!0}else{let r=n.slice(0,t.segments.length),s=n.slice(t.segments.length);return!mr(t.segments,r)||!wl(t.segments,r,i)||!t.children[pe]?!1:ab(t.children[pe],e,s,i)}}function wl(t,e,n){return e.every((i,r)=>rb[n](t[r].parameters,i.parameters))}var ui=class{constructor(e=new Pe([],{}),n={},i=null){this.root=e,this.queryParams=n,this.fragment=i}get queryParamMap(){return this._queryParamMap??=gs(this.queryParams),this._queryParamMap}toString(){return nR.serialize(this)}},Pe=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Il(this)}},pr=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=gs(this.parameters),this._parameterMap}toString(){return lb(this)}};function eR(t,e){return mr(t,e)&&t.every((n,i)=>Fn(n.parameters,e[i].parameters))}function mr(t,e){return t.length!==e.length?!1:t.every((n,i)=>n.path===e[i].path)}function tR(t,e){let n=[];return Object.entries(t.children).forEach(([i,r])=>{i===pe&&(n=n.concat(e(r,i)))}),Object.entries(t.children).forEach(([i,r])=>{i!==pe&&(n=n.concat(e(r,i)))}),n}var jf=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=$({token:e,factory:()=>new oa,providedIn:"root"});let t=e;return t})(),oa=class{parse(e){let n=new gf(e);return new ui(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${ea(e.root,!0)}`,i=sR(e.queryParams),r=typeof e.fragment=="string"?`#${iR(e.fragment)}`:"";return`${n}${i}${r}`}},nR=new oa;function Il(t){return t.segments.map(e=>lb(e)).join("/")}function ea(t,e){if(!t.hasChildren())return Il(t);if(e){let n=t.children[pe]?ea(t.children[pe],!1):"",i=[];return Object.entries(t.children).forEach(([r,s])=>{r!==pe&&i.push(`${r}:${ea(s,!1)}`)}),i.length>0?`${n}(${i.join("//")})`:n}else{let n=tR(t,(i,r)=>r===pe?[ea(t.children[pe],!1)]:[`${r}:${ea(i,!1)}`]);return Object.keys(t.children).length===1&&t.children[pe]!=null?`${Il(t)}/${n[0]}`:`${Il(t)}/(${n.join("//")})`}}function cb(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function yl(t){return cb(t).replace(/%3B/gi,";")}function iR(t){return encodeURI(t)}function mf(t){return cb(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function El(t){return decodeURIComponent(t)}function Q0(t){return El(t.replace(/\+/g,"%20"))}function lb(t){return`${mf(t.path)}${rR(t.parameters)}`}function rR(t){return Object.entries(t).map(([e,n])=>`;${mf(e)}=${mf(n)}`).join("")}function sR(t){let e=Object.entries(t).map(([n,i])=>Array.isArray(i)?i.map(r=>`${yl(n)}=${yl(r)}`).join("&"):`${yl(n)}=${yl(i)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var oR=/^[^\/()?;#]+/;function lf(t){let e=t.match(oR);return e?e[0]:""}var aR=/^[^\/()?;=#]+/;function cR(t){let e=t.match(aR);return e?e[0]:""}var lR=/^[^=?&#]+/;function uR(t){let e=t.match(lR);return e?e[0]:""}var dR=/^[^&#]+/;function hR(t){let e=t.match(dR);return e?e[0]:""}var gf=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Pe([],{}):new Pe([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(i[pe]=new Pe(e,n)),i}parseSegment(){let e=lf(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new je(4009,!1);return this.capture(e),new pr(El(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=cR(this.remaining);if(!n)return;this.capture(n);let i="";if(this.consumeOptional("=")){let r=lf(this.remaining);r&&(i=r,this.capture(i))}e[El(n)]=El(i)}parseQueryParam(e){let n=uR(this.remaining);if(!n)return;this.capture(n);let i="";if(this.consumeOptional("=")){let o=hR(this.remaining);o&&(i=o,this.capture(i))}let r=Q0(n),s=Q0(i);if(e.hasOwnProperty(r)){let o=e[r];Array.isArray(o)||(o=[o],e[r]=o),o.push(s)}else e[r]=s}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let i=lf(this.remaining),r=this.remaining[i.length];if(r!=="/"&&r!==")"&&r!==";")throw new je(4010,!1);let s;i.indexOf(":")>-1?(s=i.slice(0,i.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=pe);let o=this.parseChildren();n[s]=Object.keys(o).length===1?o[pe]:new Pe([],o),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new je(4011,!1)}};function ub(t){return t.segments.length>0?new Pe([],{[pe]:t}):t}function db(t){let e={};for(let[i,r]of Object.entries(t.children)){let s=db(r);if(i===pe&&s.segments.length===0&&s.hasChildren())for(let[o,c]of Object.entries(s.children))e[o]=c;else(s.segments.length>0||s.hasChildren())&&(e[i]=s)}let n=new Pe(t.segments,e);return fR(n)}function fR(t){if(t.numberOfChildren===1&&t.children[pe]){let e=t.children[pe];return new Pe(t.segments.concat(e.segments),e.children)}return t}function aa(t){return t instanceof ui}function pR(t,e,n=null,i=null){let r=hb(t);return fb(r,e,n,i)}function hb(t){let e;function n(s){let o={};for(let l of s.children){let u=n(l);o[l.outlet]=u}let c=new Pe(s.url,o);return s===t&&(e=c),c}let i=n(t.root),r=ub(i);return e??r}function fb(t,e,n,i){let r=t;for(;r.parent;)r=r.parent;if(e.length===0)return uf(r,r,r,n,i);let s=mR(e);if(s.toRoot())return uf(r,r,new Pe([],{}),n,i);let o=gR(s,r,t),c=o.processChildren?ia(o.segmentGroup,o.index,s.commands):mb(o.segmentGroup,o.index,s.commands);return uf(r,o.segmentGroup,c,n,i)}function Cl(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function ca(t){return typeof t=="object"&&t!=null&&t.outlets}function uf(t,e,n,i,r){let s={};i&&Object.entries(i).forEach(([l,u])=>{s[l]=Array.isArray(u)?u.map(h=>`${h}`):`${u}`});let o;t===e?o=n:o=pb(t,e,n);let c=ub(db(o));return new ui(c,s,r)}function pb(t,e,n){let i={};return Object.entries(t.children).forEach(([r,s])=>{s===e?i[r]=n:i[r]=pb(s,e,n)}),new Pe(t.segments,i)}var Tl=class{constructor(e,n,i){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=i,e&&i.length>0&&Cl(i[0]))throw new je(4003,!1);let r=i.find(ca);if(r&&r!==ib(i))throw new je(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function mR(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new Tl(!0,0,t);let e=0,n=!1,i=t.reduce((r,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let c={};return Object.entries(s.outlets).forEach(([l,u])=>{c[l]=typeof u=="string"?u.split("/"):u}),[...r,{outlets:c}]}if(s.segmentPath)return[...r,s.segmentPath]}return typeof s!="string"?[...r,s]:o===0?(s.split("/").forEach((c,l)=>{l==0&&c==="."||(l==0&&c===""?n=!0:c===".."?e++:c!=""&&r.push(c))}),r):[...r,s]},[]);return new Tl(n,e,i)}var fs=class{constructor(e,n,i){this.segmentGroup=e,this.processChildren=n,this.index=i}};function gR(t,e,n){if(t.isAbsolute)return new fs(e,!0,0);if(!n)return new fs(e,!1,NaN);if(n.parent===null)return new fs(n,!0,0);let i=Cl(t.commands[0])?0:1,r=n.segments.length-1+i;return _R(n,r,t.numberOfDoubleDots)}function _R(t,e,n){let i=t,r=e,s=n;for(;s>r;){if(s-=r,i=i.parent,!i)throw new je(4005,!1);r=i.segments.length}return new fs(i,!1,r-s)}function vR(t){return ca(t[0])?t[0].outlets:{[pe]:t}}function mb(t,e,n){if(t??=new Pe([],{}),t.segments.length===0&&t.hasChildren())return ia(t,e,n);let i=yR(t,e,n),r=n.slice(i.commandIndex);if(i.match&&i.pathIndex<t.segments.length){let s=new Pe(t.segments.slice(0,i.pathIndex),{});return s.children[pe]=new Pe(t.segments.slice(i.pathIndex),t.children),ia(s,0,r)}else return i.match&&r.length===0?new Pe(t.segments,{}):i.match&&!t.hasChildren()?_f(t,e,n):i.match?ia(t,0,r):_f(t,e,n)}function ia(t,e,n){if(n.length===0)return new Pe(t.segments,{});{let i=vR(n),r={};if(Object.keys(i).some(s=>s!==pe)&&t.children[pe]&&t.numberOfChildren===1&&t.children[pe].segments.length===0){let s=ia(t.children[pe],e,n);return new Pe(t.segments,s.children)}return Object.entries(i).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(r[s]=mb(t.children[s],e,o))}),Object.entries(t.children).forEach(([s,o])=>{i[s]===void 0&&(r[s]=o)}),new Pe(t.segments,r)}}function yR(t,e,n){let i=0,r=e,s={match:!1,pathIndex:0,commandIndex:0};for(;r<t.segments.length;){if(i>=n.length)return s;let o=t.segments[r],c=n[i];if(ca(c))break;let l=`${c}`,u=i<n.length-1?n[i+1]:null;if(r>0&&l===void 0)break;if(l&&u&&typeof u=="object"&&u.outlets===void 0){if(!J0(l,u,o))return s;i+=2}else{if(!J0(l,{},o))return s;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}function _f(t,e,n){let i=t.segments.slice(0,e),r=0;for(;r<n.length;){let s=n[r];if(ca(s)){let l=bR(s.outlets);return new Pe(i,l)}if(r===0&&Cl(n[0])){let l=t.segments[e];i.push(new pr(l.path,X0(n[0]))),r++;continue}let o=ca(s)?s.outlets[pe]:`${s}`,c=r<n.length-1?n[r+1]:null;o&&c&&Cl(c)?(i.push(new pr(o,X0(c))),r+=2):(i.push(new pr(o,{})),r++)}return new Pe(i,{})}function bR(t){let e={};return Object.entries(t).forEach(([n,i])=>{typeof i=="string"&&(i=[i]),i!==null&&(e[n]=_f(new Pe([],{}),0,i))}),e}function X0(t){let e={};return Object.entries(t).forEach(([n,i])=>e[n]=`${i}`),e}function J0(t,e,n){return t==n.path&&Fn(e,n.parameters)}var ra="imperative",At=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(At||{}),hn=class{constructor(e,n){this.id=e,this.url=n}},la=class extends hn{constructor(e,n,i="imperative",r=null){super(e,n),this.type=At.NavigationStart,this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},di=class extends hn{constructor(e,n,i){super(e,n),this.urlAfterRedirects=i,this.type=At.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Jt=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(Jt||{}),vf=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(vf||{}),li=class extends hn{constructor(e,n,i,r){super(e,n),this.reason=i,this.code=r,this.type=At.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},gr=class extends hn{constructor(e,n,i,r){super(e,n),this.reason=i,this.code=r,this.type=At.NavigationSkipped}},ua=class extends hn{constructor(e,n,i,r){super(e,n),this.error=i,this.target=r,this.type=At.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Sl=class extends hn{constructor(e,n,i,r){super(e,n),this.urlAfterRedirects=i,this.state=r,this.type=At.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},yf=class extends hn{constructor(e,n,i,r){super(e,n),this.urlAfterRedirects=i,this.state=r,this.type=At.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},bf=class extends hn{constructor(e,n,i,r,s){super(e,n),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=s,this.type=At.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},wf=class extends hn{constructor(e,n,i,r){super(e,n),this.urlAfterRedirects=i,this.state=r,this.type=At.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},If=class extends hn{constructor(e,n,i,r){super(e,n),this.urlAfterRedirects=i,this.state=r,this.type=At.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ef=class{constructor(e){this.route=e,this.type=At.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Cf=class{constructor(e){this.route=e,this.type=At.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Tf=class{constructor(e){this.snapshot=e,this.type=At.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Sf=class{constructor(e){this.snapshot=e,this.type=At.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Af=class{constructor(e){this.snapshot=e,this.type=At.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Pf=class{constructor(e){this.snapshot=e,this.type=At.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var da=class{},_s=class{constructor(e,n){this.url=e,this.navigationBehaviorOptions=n}};function wR(t,e){return t.providers&&!t._injector&&(t._injector=l0(t.providers,e,`Route: ${t.path}`)),t._injector??e}function En(t){return t.outlet||pe}function IR(t,e){let n=t.filter(i=>En(i)===e);return n.push(...t.filter(i=>En(i)!==e)),n}function va(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var Rf=class{get injector(){return va(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new xl(this.rootInjector),this.attachRef=null}},xl=(()=>{let e=class e{constructor(i){this.rootInjector=i,this.contexts=new Map}onChildOutletCreated(i,r){let s=this.getOrCreateContext(i);s.outlet=r,this.contexts.set(i,s)}onChildOutletDestroyed(i){let r=this.getContext(i);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let i=this.contexts;return this.contexts=new Map,i}onOutletReAttached(i){this.contexts=i}getOrCreateContext(i){let r=this.getContext(i);return r||(r=new Rf(this.rootInjector),this.contexts.set(i,r)),r}getContext(i){return this.contexts.get(i)||null}};e.\u0275fac=function(r){return new(r||e)(M(Mi))},e.\u0275prov=$({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Al=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=Df(e,this._root);return n?n.children.map(i=>i.value):[]}firstChild(e){let n=Df(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=Of(e,this._root);return n.length<2?[]:n[n.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return Of(e,this._root).map(n=>n.value)}};function Df(t,e){if(t===e.value)return e;for(let n of e.children){let i=Df(t,n);if(i)return i}return null}function Of(t,e){if(t===e.value)return[e];for(let n of e.children){let i=Of(t,n);if(i.length)return i.unshift(e),i}return[]}var Xt=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function hs(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var Pl=class extends Al{constructor(e,n){super(e),this.snapshot=n,Bf(this,e)}toString(){return this.snapshot.toString()}};function gb(t){let e=ER(t),n=new st([new pr("",{})]),i=new st({}),r=new st({}),s=new st({}),o=new st(""),c=new fn(n,i,s,o,r,pe,t,e.root);return c.snapshot=e.root,new Pl(new Xt(c,[]),e)}function ER(t){let e={},n={},i={},r="",s=new ps([],e,i,r,n,pe,t,null,{});return new Dl("",new Xt(s,[]))}var fn=class{constructor(e,n,i,r,s,o,c,l){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=i,this.fragmentSubject=r,this.dataSubject=s,this.outlet=o,this.component=c,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(ye(u=>u[_a]))??se(void 0),this.url=e,this.params=n,this.queryParams=i,this.fragment=r,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(ye(e=>gs(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(ye(e=>gs(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Rl(t,e,n="emptyOnly"){let i,{routeConfig:r}=t;return e!==null&&(n==="always"||r?.path===""||!e.component&&!e.routeConfig?.loadComponent)?i={params:U(U({},e.params),t.params),data:U(U({},e.data),t.data),resolve:U(U(U(U({},t.data),e.data),r?.data),t._resolvedData)}:i={params:U({},t.params),data:U({},t.data),resolve:U(U({},t.data),t._resolvedData??{})},r&&vb(r)&&(i.resolve[_a]=r.title),i}var ps=class{get title(){return this.data?.[_a]}constructor(e,n,i,r,s,o,c,l,u){this.url=e,this.params=n,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=o,this.component=c,this.routeConfig=l,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=gs(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=gs(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(i=>i.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},Dl=class extends Al{constructor(e,n){super(n),this.url=e,Bf(this,n)}toString(){return _b(this._root)}};function Bf(t,e){e.value._routerState=t,e.children.forEach(n=>Bf(t,n))}function _b(t){let e=t.children.length>0?` { ${t.children.map(_b).join(", ")} } `:"";return`${t.value}${e}`}function df(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Fn(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),Fn(e.params,n.params)||t.paramsSubject.next(n.params),QP(e.url,n.url)||t.urlSubject.next(n.url),Fn(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function kf(t,e){let n=Fn(t.params,e.params)&&eR(t.url,e.url),i=!t.parent!=!e.parent;return n&&!i&&(!t.parent||kf(t.parent,e.parent))}function vb(t){return typeof t.title=="string"||t.title===null}var zf=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=pe,this.activateEvents=new Ke,this.deactivateEvents=new Ke,this.attachEvents=new Ke,this.detachEvents=new Ke,this.parentContexts=W(xl),this.location=W(ss),this.changeDetector=W(ci),this.inputBinder=W($f,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(i){if(i.name){let{firstChange:r,previousValue:s}=i.name;if(r)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(i){return this.parentContexts.getContext(i)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let i=this.parentContexts.getContext(this.name);i?.route&&(i.attachRef?this.attach(i.attachRef,i.route):this.activateWith(i.route,i.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new je(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new je(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new je(4012,!1);this.location.detach();let i=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(i.instance),i}attach(i,r){this.activated=i,this._activatedRoute=r,this.location.insert(i.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(i.instance)}deactivate(){if(this.activated){let i=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(i)}}activateWith(i,r){if(this.isActivated)throw new je(4013,!1);this._activatedRoute=i;let s=this.location,c=i.snapshot.component,l=this.parentContexts.getOrCreateContext(this.name).children,u=new xf(i,l,s.injector);this.activated=s.createComponent(c,{index:s.length,injector:u,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=Oe({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[bn]});let t=e;return t})(),xf=class t{__ngOutletInjector(e){return new t(this.route,this.childContexts,e)}constructor(e,n,i){this.route=e,this.childContexts=n,this.parent=i}get(e,n){return e===fn?this.route:e===xl?this.childContexts:this.parent.get(e,n)}},$f=new te("");function CR(t,e,n){let i=ha(t,e._root,n?n._root:void 0);return new Pl(i,e)}function ha(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let i=n.value;i._futureSnapshot=e.value;let r=TR(t,e,n);return new Xt(i,r)}else{if(t.shouldAttach(e.value)){let s=t.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(c=>ha(t,c)),o}}let i=SR(e.value),r=e.children.map(s=>ha(t,s));return new Xt(i,r)}}function TR(t,e,n){return e.children.map(i=>{for(let r of n.children)if(t.shouldReuseRoute(i.value,r.value.snapshot))return ha(t,i,r);return ha(t,i)})}function SR(t){return new fn(new st(t.url),new st(t.params),new st(t.queryParams),new st(t.fragment),new st(t.data),t.outlet,t.component,t)}var fa=class{constructor(e,n){this.redirectTo=e,this.navigationBehaviorOptions=n}},yb="ngNavigationCancelingError";function Ol(t,e){let{redirectTo:n,navigationBehaviorOptions:i}=aa(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,r=bb(!1,Jt.Redirect);return r.url=n,r.navigationBehaviorOptions=i,r}function bb(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[yb]=!0,n.cancellationCode=e,n}function AR(t){return wb(t)&&aa(t.url)}function wb(t){return!!t&&t[yb]}var PR=(t,e,n,i)=>ye(r=>(new Mf(e,r.targetRouterState,r.currentRouterState,n,i).activate(t),r)),Mf=class{constructor(e,n,i,r,s){this.routeReuseStrategy=e,this.futureState=n,this.currState=i,this.forwardEvent=r,this.inputBindingEnabled=s}activate(e){let n=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,i,e),df(this.futureState.root),this.activateChildRoutes(n,i,e)}deactivateChildRoutes(e,n,i){let r=hs(n);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,r[o],i),delete r[o]}),Object.values(r).forEach(s=>{this.deactivateRouteAndItsChildren(s,i)})}deactivateRoutes(e,n,i){let r=e.value,s=n?n.value:null;if(r===s)if(r.component){let o=i.getContext(r.outlet);o&&this.deactivateChildRoutes(e,n,o.children)}else this.deactivateChildRoutes(e,n,i);else s&&this.deactivateRouteAndItsChildren(n,i)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let i=n.getContext(e.value.outlet),r=i&&e.value.component?i.children:n,s=hs(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,r);if(i&&i.outlet){let o=i.outlet.detach(),c=i.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:c})}}deactivateRouteAndOutlet(e,n){let i=n.getContext(e.value.outlet),r=i&&e.value.component?i.children:n,s=hs(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(e,n,i){let r=hs(n);e.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],i),this.forwardEvent(new Pf(s.value.snapshot))}),e.children.length&&this.forwardEvent(new Sf(e.value.snapshot))}activateRoutes(e,n,i){let r=e.value,s=n?n.value:null;if(df(r),r===s)if(r.component){let o=i.getOrCreateContext(r.outlet);this.activateChildRoutes(e,n,o.children)}else this.activateChildRoutes(e,n,i);else if(r.component){let o=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){let c=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),o.children.onOutletReAttached(c.contexts),o.attachRef=c.componentRef,o.route=c.route.value,o.outlet&&o.outlet.attach(c.componentRef,c.route.value),df(c.route.value),this.activateChildRoutes(e,null,o.children)}else o.attachRef=null,o.route=r,o.outlet&&o.outlet.activateWith(r,o.injector),this.activateChildRoutes(e,null,o.children)}else this.activateChildRoutes(e,null,i)}},kl=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},ms=class{constructor(e,n){this.component=e,this.route=n}};function RR(t,e,n){let i=t._root,r=e?e._root:null;return ta(i,r,n,[i.value])}function DR(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function ys(t,e){let n=Symbol(),i=e.get(t,n);return i===n?typeof t=="function"&&!t0(t)?t:e.get(t):i}function ta(t,e,n,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let s=hs(e);return t.children.forEach(o=>{OR(o,s[o.value.outlet],n,i.concat([o.value]),r),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,c])=>sa(c,n.getContext(o),r)),r}function OR(t,e,n,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let s=t.value,o=e?e.value:null,c=n?n.getContext(t.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let l=kR(o,s,s.routeConfig.runGuardsAndResolvers);l?r.canActivateChecks.push(new kl(i)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?ta(t,e,c?c.children:null,i,r):ta(t,e,n,i,r),l&&c&&c.outlet&&c.outlet.isActivated&&r.canDeactivateChecks.push(new ms(c.outlet.component,o))}else o&&sa(e,c,r),r.canActivateChecks.push(new kl(i)),s.component?ta(t,null,c?c.children:null,i,r):ta(t,null,n,i,r);return r}function kR(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!mr(t.url,e.url);case"pathParamsOrQueryParamsChange":return!mr(t.url,e.url)||!Fn(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!kf(t,e)||!Fn(t.queryParams,e.queryParams);case"paramsChange":default:return!kf(t,e)}}function sa(t,e,n){let i=hs(t),r=t.value;Object.entries(i).forEach(([s,o])=>{r.component?e?sa(o,e.children.getContext(s),n):sa(o,null,n):sa(o,e,n)}),r.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new ms(e.outlet.component,r)):n.canDeactivateChecks.push(new ms(null,r)):n.canDeactivateChecks.push(new ms(null,r))}function ya(t){return typeof t=="function"}function xR(t){return typeof t=="boolean"}function MR(t){return t&&ya(t.canLoad)}function NR(t){return t&&ya(t.canActivate)}function FR(t){return t&&ya(t.canActivateChild)}function VR(t){return t&&ya(t.canDeactivate)}function LR(t){return t&&ya(t.canMatch)}function Ib(t){return t instanceof Qy||t?.name==="EmptyError"}var bl=Symbol("INITIAL_VALUE");function vs(){return Qt(t=>Mo(t.map(e=>e.pipe(cn(1),xi(bl)))).pipe(ye(e=>{for(let n of e)if(n!==!0){if(n===bl)return bl;if(n===!1||UR(n))return n}return!0}),ft(e=>e!==bl),cn(1)))}function UR(t){return aa(t)||t instanceof fa}function jR(t,e){return an(n=>{let{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return o.length===0&&s.length===0?se(me(U({},n),{guardsResult:!0})):BR(o,i,r,t).pipe(an(c=>c&&xR(c)?zR(i,s,t,e):se(c)),ye(c=>me(U({},n),{guardsResult:c})))})}function BR(t,e,n,i){return Ct(t).pipe(an(r=>HR(r.component,r.route,n,e,i)),ki(r=>r!==!0,!0))}function zR(t,e,n,i){return Ct(e).pipe(lr(r=>Qc(qR(r.route.parent,i),$R(r.route,i),WR(t,r.path,n),GR(t,r.route,n))),ki(r=>r!==!0,!0))}function $R(t,e){return t!==null&&e&&e(new Af(t)),se(!0)}function qR(t,e){return t!==null&&e&&e(new Tf(t)),se(!0)}function GR(t,e,n){let i=e.routeConfig?e.routeConfig.canActivate:null;if(!i||i.length===0)return se(!0);let r=i.map(s=>No(()=>{let o=va(e)??n,c=ys(s,o),l=NR(c)?c.canActivate(e,t):yn(o,()=>c(e,t));return Bi(l).pipe(ki())}));return se(r).pipe(vs())}function WR(t,e,n){let i=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>DR(o)).filter(o=>o!==null).map(o=>No(()=>{let c=o.guards.map(l=>{let u=va(o.node)??n,h=ys(l,u),p=FR(h)?h.canActivateChild(i,t):yn(u,()=>h(i,t));return Bi(p).pipe(ki())});return se(c).pipe(vs())}));return se(s).pipe(vs())}function HR(t,e,n,i,r){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return se(!0);let o=s.map(c=>{let l=va(e)??r,u=ys(c,l),h=VR(u)?u.canDeactivate(t,e,n,i):yn(l,()=>u(t,e,n,i));return Bi(h).pipe(ki())});return se(o).pipe(vs())}function KR(t,e,n,i){let r=e.canLoad;if(r===void 0||r.length===0)return se(!0);let s=r.map(o=>{let c=ys(o,t),l=MR(c)?c.canLoad(e,n):yn(t,()=>c(e,n));return Bi(l)});return se(s).pipe(vs(),Eb(i))}function Eb(t){return Ih(ot(e=>{if(typeof e!="boolean")throw Ol(t,e)}),ye(e=>e===!0))}function YR(t,e,n,i){let r=e.canMatch;if(!r||r.length===0)return se(!0);let s=r.map(o=>{let c=ys(o,t),l=LR(c)?c.canMatch(e,n):yn(t,()=>c(e,n));return Bi(l)});return se(s).pipe(vs(),Eb(i))}var pa=class{constructor(e){this.segmentGroup=e||null}},ma=class extends Error{constructor(e){super(),this.urlTree=e}};function ds(t){return xo(new pa(t))}function QR(t){return xo(new je(4e3,!1))}function XR(t){return xo(bb(!1,Jt.GuardRejected))}var Nf=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let i=[],r=n.root;for(;;){if(i=i.concat(r.segments),r.numberOfChildren===0)return se(i);if(r.numberOfChildren>1||!r.children[pe])return QR(`${e.redirectTo}`);r=r.children[pe]}}applyRedirectCommands(e,n,i,r,s){if(typeof n!="string"){let c=n,{queryParams:l,fragment:u,routeConfig:h,url:p,outlet:_,params:C,data:O,title:F}=r,D=yn(s,()=>c({params:C,data:O,queryParams:l,fragment:u,routeConfig:h,url:p,outlet:_,title:F}));if(D instanceof ui)throw new ma(D);n=D}let o=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,i);if(n[0]==="/")throw new ma(o);return o}applyRedirectCreateUrlTree(e,n,i,r){let s=this.createSegmentGroup(e,n.root,i,r);return new ui(s,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let i={};return Object.entries(e).forEach(([r,s])=>{if(typeof s=="string"&&s[0]===":"){let c=s.substring(1);i[r]=n[c]}else i[r]=s}),i}createSegmentGroup(e,n,i,r){let s=this.createSegments(e,n.segments,i,r),o={};return Object.entries(n.children).forEach(([c,l])=>{o[c]=this.createSegmentGroup(e,l,i,r)}),new Pe(s,o)}createSegments(e,n,i,r){return n.map(s=>s.path[0]===":"?this.findPosParam(e,s,r):this.findOrReturn(s,i))}findPosParam(e,n,i){let r=i[n.path.substring(1)];if(!r)throw new je(4001,!1);return r}findOrReturn(e,n){let i=0;for(let r of n){if(r.path===e.path)return n.splice(i),r;i++}return e}},Ff={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function JR(t,e,n,i,r){let s=qf(t,e,n);return s.matched?(i=wR(e,i),YR(i,e,n,r).pipe(ye(o=>o===!0?s:U({},Ff)))):se(s)}function qf(t,e,n){if(e.path==="**")return ZR(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?U({},Ff):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let r=(e.matcher||YP)(n,t,e);if(!r)return U({},Ff);let s={};Object.entries(r.posParams??{}).forEach(([c,l])=>{s[c]=l.path});let o=r.consumed.length>0?U(U({},s),r.consumed[r.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:r.consumed,remainingSegments:n.slice(r.consumed.length),parameters:o,positionalParamSegments:r.posParams??{}}}function ZR(t){return{matched:!0,parameters:t.length>0?ib(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function Z0(t,e,n,i){return n.length>0&&nD(t,n,i)?{segmentGroup:new Pe(e,tD(i,new Pe(n,t.children))),slicedSegments:[]}:n.length===0&&iD(t,n,i)?{segmentGroup:new Pe(t.segments,eD(t,n,i,t.children)),slicedSegments:n}:{segmentGroup:new Pe(t.segments,t.children),slicedSegments:n}}function eD(t,e,n,i){let r={};for(let s of n)if(Ml(t,e,s)&&!i[En(s)]){let o=new Pe([],{});r[En(s)]=o}return U(U({},i),r)}function tD(t,e){let n={};n[pe]=e;for(let i of t)if(i.path===""&&En(i)!==pe){let r=new Pe([],{});n[En(i)]=r}return n}function nD(t,e,n){return n.some(i=>Ml(t,e,i)&&En(i)!==pe)}function iD(t,e,n){return n.some(i=>Ml(t,e,i))}function Ml(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function rD(t,e,n,i){return En(t)!==i&&(i===pe||!Ml(e,n,t))?!1:qf(e,t,n).matched}function sD(t,e,n){return e.length===0&&!t.children[n]}var Vf=class{};function oD(t,e,n,i,r,s,o="emptyOnly"){return new Lf(t,e,n,i,r,o,s).recognize()}var aD=31,Lf=class{constructor(e,n,i,r,s,o,c){this.injector=e,this.configLoader=n,this.rootComponentType=i,this.config=r,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=c,this.applyRedirects=new Nf(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new je(4002,`'${e.segmentGroup}'`)}recognize(){let e=Z0(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(ye(({children:n,rootSnapshot:i})=>{let r=new Xt(i,n),s=new Dl("",r),o=pR(i,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}))}match(e){let n=new ps([],Object.freeze({}),Object.freeze(U({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),pe,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,pe,n).pipe(ye(i=>({children:i,rootSnapshot:n})),is(i=>{if(i instanceof ma)return this.urlTree=i.urlTree,this.match(i.urlTree.root);throw i instanceof pa?this.noMatchError(i):i}))}processSegmentGroup(e,n,i,r,s){return i.segments.length===0&&i.hasChildren()?this.processChildren(e,n,i,s):this.processSegment(e,n,i,i.segments,r,!0,s).pipe(ye(o=>o instanceof Xt?[o]:[]))}processChildren(e,n,i,r){let s=[];for(let o of Object.keys(i.children))o==="primary"?s.unshift(o):s.push(o);return Ct(s).pipe(lr(o=>{let c=i.children[o],l=IR(n,o);return this.processSegmentGroup(e,l,c,o,r)}),xh((o,c)=>(o.push(...c),o)),Oh(null),e0(),an(o=>{if(o===null)return ds(i);let c=Cb(o);return cD(c),se(c)}))}processSegment(e,n,i,r,s,o,c){return Ct(n).pipe(lr(l=>this.processSegmentAgainstRoute(l._injector??e,n,l,i,r,s,o,c).pipe(is(u=>{if(u instanceof pa)return se(null);throw u}))),ki(l=>!!l),is(l=>{if(Ib(l))return sD(i,r,s)?se(new Vf):ds(i);throw l}))}processSegmentAgainstRoute(e,n,i,r,s,o,c,l){return rD(i,r,s,o)?i.redirectTo===void 0?this.matchSegmentAgainstRoute(e,r,i,s,o,l):this.allowRedirects&&c?this.expandSegmentAgainstRouteUsingRedirect(e,r,n,i,s,o,l):ds(r):ds(r)}expandSegmentAgainstRouteUsingRedirect(e,n,i,r,s,o,c){let{matched:l,parameters:u,consumedSegments:h,positionalParamSegments:p,remainingSegments:_}=qf(n,r,s);if(!l)return ds(n);typeof r.redirectTo=="string"&&r.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>aD&&(this.allowRedirects=!1));let C=new ps(s,u,Object.freeze(U({},this.urlTree.queryParams)),this.urlTree.fragment,eb(r),En(r),r.component??r._loadedComponent??null,r,tb(r)),O=Rl(C,c,this.paramsInheritanceStrategy);C.params=Object.freeze(O.params),C.data=Object.freeze(O.data);let F=this.applyRedirects.applyRedirectCommands(h,r.redirectTo,p,C,e);return this.applyRedirects.lineralizeSegments(r,F).pipe(an(D=>this.processSegment(e,i,n,D.concat(_),o,!1,c)))}matchSegmentAgainstRoute(e,n,i,r,s,o){let c=JR(n,i,r,e,this.urlSerializer);return i.path==="**"&&(n.children={}),c.pipe(Qt(l=>l.matched?(e=i._injector??e,this.getChildConfig(e,i,r).pipe(Qt(({routes:u})=>{let h=i._loadedInjector??e,{parameters:p,consumedSegments:_,remainingSegments:C}=l,O=new ps(_,p,Object.freeze(U({},this.urlTree.queryParams)),this.urlTree.fragment,eb(i),En(i),i.component??i._loadedComponent??null,i,tb(i)),F=Rl(O,o,this.paramsInheritanceStrategy);O.params=Object.freeze(F.params),O.data=Object.freeze(F.data);let{segmentGroup:D,slicedSegments:z}=Z0(n,_,C,u);if(z.length===0&&D.hasChildren())return this.processChildren(h,u,D,O).pipe(ye(Y=>new Xt(O,Y)));if(u.length===0&&z.length===0)return se(new Xt(O,[]));let X=En(i)===s;return this.processSegment(h,u,D,z,X?pe:s,!0,O).pipe(ye(Y=>new Xt(O,Y instanceof Xt?[Y]:[])))}))):ds(n)))}getChildConfig(e,n,i){return n.children?se({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?se({routes:n._loadedRoutes,injector:n._loadedInjector}):KR(e,n,i,this.urlSerializer).pipe(an(r=>r?this.configLoader.loadChildren(e,n).pipe(ot(s=>{n._loadedRoutes=s.routes,n._loadedInjector=s.injector})):XR(n))):se({routes:[],injector:e})}};function cD(t){t.sort((e,n)=>e.value.outlet===pe?-1:n.value.outlet===pe?1:e.value.outlet.localeCompare(n.value.outlet))}function lD(t){let e=t.value.routeConfig;return e&&e.path===""}function Cb(t){let e=[],n=new Set;for(let i of t){if(!lD(i)){e.push(i);continue}let r=e.find(s=>i.value.routeConfig===s.value.routeConfig);r!==void 0?(r.children.push(...i.children),n.add(r)):e.push(i)}for(let i of n){let r=Cb(i.children);e.push(new Xt(i.value,r))}return e.filter(i=>!n.has(i))}function eb(t){return t.data||{}}function tb(t){return t.resolve||{}}function uD(t,e,n,i,r,s){return an(o=>oD(t,e,n,i,o.extractedUrl,r,s).pipe(ye(({state:c,tree:l})=>me(U({},o),{targetSnapshot:c,urlAfterRedirects:l}))))}function dD(t,e){return an(n=>{let{targetSnapshot:i,guards:{canActivateChecks:r}}=n;if(!r.length)return se(n);let s=new Set(r.map(l=>l.route)),o=new Set;for(let l of s)if(!o.has(l))for(let u of Tb(l))o.add(u);let c=0;return Ct(o).pipe(lr(l=>s.has(l)?hD(l,i,t,e):(l.data=Rl(l,l.parent,t).resolve,se(void 0))),ot(()=>c++),kh(1),an(l=>c===o.size?se(n):Oi))})}function Tb(t){let e=t.children.map(n=>Tb(n)).flat();return[t,...e]}function hD(t,e,n,i){let r=t.routeConfig,s=t._resolve;return r?.title!==void 0&&!vb(r)&&(s[_a]=r.title),fD(s,t,e,i).pipe(ye(o=>(t._resolvedData=o,t.data=Rl(t,t.parent,n).resolve,null)))}function fD(t,e,n,i){let r=pf(t);if(r.length===0)return se({});let s={};return Ct(r).pipe(an(o=>pD(t[o],e,n,i).pipe(ki(),ot(c=>{if(c instanceof fa)throw Ol(new oa,c);s[o]=c}))),kh(1),Zy(s),is(o=>Ib(o)?Oi:xo(o)))}function pD(t,e,n,i){let r=va(e)??i,s=ys(t,r),o=s.resolve?s.resolve(e,n):yn(r,()=>s(e,n));return Bi(o)}function hf(t){return Qt(e=>{let n=t(e);return n?Ct(n).pipe(ye(()=>e)):se(e)})}var Sb=(()=>{let e=class e{buildTitle(i){let r,s=i.root;for(;s!==void 0;)r=this.getResolvedTitleForRoute(s)??r,s=s.children.find(o=>o.outlet===pe);return r}getResolvedTitleForRoute(i){return i.data[_a]}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=$({token:e,factory:()=>W(mD),providedIn:"root"});let t=e;return t})(),mD=(()=>{let e=class e extends Sb{constructor(i){super(),this.title=i}updateTitle(i){let r=this.buildTitle(i);r!==void 0&&this.title.setTitle(r)}};e.\u0275fac=function(r){return new(r||e)(M(K0))},e.\u0275prov=$({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Gf=new te("",{providedIn:"root",factory:()=>({})}),gD=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=H({type:e,selectors:[["ng-component"]],standalone:!0,features:[Q],decls:1,vars:0,template:function(r,s){r&1&&L(0,"router-outlet")},dependencies:[zf],encapsulation:2});let t=e;return t})();function Wf(t){let e=t.children&&t.children.map(Wf),n=e?me(U({},t),{children:e}):U({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==pe&&(n.component=gD),n}var Hf=new te(""),_D=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=W(Bh)}loadComponent(i){if(this.componentLoaders.get(i))return this.componentLoaders.get(i);if(i._loadedComponent)return se(i._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(i);let r=Bi(i.loadComponent()).pipe(ye(Ab),ot(o=>{this.onLoadEndListener&&this.onLoadEndListener(i),i._loadedComponent=o}),ur(()=>{this.componentLoaders.delete(i)})),s=new Ch(r,()=>new Se).pipe(Eh());return this.componentLoaders.set(i,s),s}loadChildren(i,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return se({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=vD(r,this.compiler,i,this.onLoadEndListener).pipe(ur(()=>{this.childrenLoaders.delete(r)})),c=new Ch(o,()=>new Se).pipe(Eh());return this.childrenLoaders.set(r,c),c}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=$({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function vD(t,e,n,i){return Bi(t.loadChildren()).pipe(ye(Ab),an(r=>r instanceof c0||Array.isArray(r)?se(r):Ct(e.compileModuleAsync(r))),ye(r=>{i&&i(t);let s,o,c=!1;return Array.isArray(r)?(o=r,c=!0):(s=r.create(n).injector,o=s.get(Hf,[],{optional:!0,self:!0}).flat()),{routes:o.map(Wf),injector:s}}))}function yD(t){return t&&typeof t=="object"&&"default"in t}function Ab(t){return yD(t)?t.default:t}var Kf=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=$({token:e,factory:()=>W(bD),providedIn:"root"});let t=e;return t})(),bD=(()=>{let e=class e{shouldProcessUrl(i){return!0}extract(i){return i}merge(i,r){return i}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=$({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),wD=new te("");var ID=new te(""),ED=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Se,this.transitionAbortSubject=new Se,this.configLoader=W(_D),this.environmentInjector=W(Mi),this.urlSerializer=W(jf),this.rootContexts=W(xl),this.location=W(Vi),this.inputBindingEnabled=W($f,{optional:!0})!==null,this.titleStrategy=W(Sb),this.options=W(Gf,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=W(Kf),this.createViewTransition=W(wD,{optional:!0}),this.navigationErrorHandler=W(ID,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>se(void 0),this.rootComponentType=null;let i=s=>this.events.next(new Ef(s)),r=s=>this.events.next(new Cf(s));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=i}complete(){this.transitions?.complete()}handleNavigationRequest(i){let r=++this.navigationId;this.transitions?.next(me(U(U({},this.transitions.value),i),{id:r}))}setupNavigations(i,r,s){return this.transitions=new st({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:ra,restoredState:null,currentSnapshot:s.snapshot,targetSnapshot:null,currentRouterState:s,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(ft(o=>o.id!==0),ye(o=>me(U({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),Qt(o=>{let c=!1,l=!1;return se(o).pipe(Qt(u=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",Jt.SupersededByNewNavigation),Oi;this.currentTransition=o,this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,targetBrowserUrl:typeof u.extras.browserUrl=="string"?this.urlSerializer.parse(u.extras.browserUrl):u.extras.browserUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?me(U({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let h=!i.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),p=u.extras.onSameUrlNavigation??i.onSameUrlNavigation;if(!h&&p!=="reload"){let _="";return this.events.next(new gr(u.id,this.urlSerializer.serialize(u.rawUrl),_,vf.IgnoredSameUrlNavigation)),u.resolve(!1),Oi}if(this.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return se(u).pipe(Qt(_=>{let C=this.transitions?.getValue();return this.events.next(new la(_.id,this.urlSerializer.serialize(_.extractedUrl),_.source,_.restoredState)),C!==this.transitions?.getValue()?Oi:Promise.resolve(_)}),uD(this.environmentInjector,this.configLoader,this.rootComponentType,i.config,this.urlSerializer,this.paramsInheritanceStrategy),ot(_=>{o.targetSnapshot=_.targetSnapshot,o.urlAfterRedirects=_.urlAfterRedirects,this.currentNavigation=me(U({},this.currentNavigation),{finalUrl:_.urlAfterRedirects});let C=new Sl(_.id,this.urlSerializer.serialize(_.extractedUrl),this.urlSerializer.serialize(_.urlAfterRedirects),_.targetSnapshot);this.events.next(C)}));if(h&&this.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){let{id:_,extractedUrl:C,source:O,restoredState:F,extras:D}=u,z=new la(_,this.urlSerializer.serialize(C),O,F);this.events.next(z);let X=gb(this.rootComponentType).snapshot;return this.currentTransition=o=me(U({},u),{targetSnapshot:X,urlAfterRedirects:C,extras:me(U({},D),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=C,se(o)}else{let _="";return this.events.next(new gr(u.id,this.urlSerializer.serialize(u.extractedUrl),_,vf.IgnoredByUrlHandlingStrategy)),u.resolve(!1),Oi}}),ot(u=>{let h=new yf(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(h)}),ye(u=>(this.currentTransition=o=me(U({},u),{guards:RR(u.targetSnapshot,u.currentSnapshot,this.rootContexts)}),o)),jR(this.environmentInjector,u=>this.events.next(u)),ot(u=>{if(o.guardsResult=u.guardsResult,u.guardsResult&&typeof u.guardsResult!="boolean")throw Ol(this.urlSerializer,u.guardsResult);let h=new bf(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(h)}),ft(u=>u.guardsResult?!0:(this.cancelNavigationTransition(u,"",Jt.GuardRejected),!1)),hf(u=>{if(u.guards.canActivateChecks.length)return se(u).pipe(ot(h=>{let p=new wf(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(p)}),Qt(h=>{let p=!1;return se(h).pipe(dD(this.paramsInheritanceStrategy,this.environmentInjector),ot({next:()=>p=!0,complete:()=>{p||this.cancelNavigationTransition(h,"",Jt.NoDataFromResolver)}}))}),ot(h=>{let p=new If(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(p)}))}),hf(u=>{let h=p=>{let _=[];p.routeConfig?.loadComponent&&!p.routeConfig._loadedComponent&&_.push(this.configLoader.loadComponent(p.routeConfig).pipe(ot(C=>{p.component=C}),ye(()=>{})));for(let C of p.children)_.push(...h(C));return _};return Mo(h(u.targetSnapshot.root)).pipe(Oh(null),cn(1))}),hf(()=>this.afterPreactivation()),Qt(()=>{let{currentSnapshot:u,targetSnapshot:h}=o,p=this.createViewTransition?.(this.environmentInjector,u.root,h.root);return p?Ct(p).pipe(ye(()=>o)):se(o)}),ye(u=>{let h=CR(i.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=o=me(U({},u),{targetRouterState:h}),this.currentNavigation.targetRouterState=h,o}),ot(()=>{this.events.next(new da)}),PR(this.rootContexts,i.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),cn(1),ot({next:u=>{c=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new di(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),this.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{c=!0}}),ai(this.transitionAbortSubject.pipe(ot(u=>{throw u}))),ur(()=>{!c&&!l&&this.cancelNavigationTransition(o,"",Jt.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),is(u=>{if(l=!0,wb(u))this.events.next(new li(o.id,this.urlSerializer.serialize(o.extractedUrl),u.message,u.cancellationCode)),AR(u)?this.events.next(new _s(u.url,u.navigationBehaviorOptions)):o.resolve(!1);else{let h=new ua(o.id,this.urlSerializer.serialize(o.extractedUrl),u,o.targetSnapshot??void 0);try{let p=yn(this.environmentInjector,()=>this.navigationErrorHandler?.(h));if(p instanceof fa){let{message:_,cancellationCode:C}=Ol(this.urlSerializer,p);this.events.next(new li(o.id,this.urlSerializer.serialize(o.extractedUrl),_,C)),this.events.next(new _s(p.redirectTo,p.navigationBehaviorOptions))}else{this.events.next(h);let _=i.errorHandler(u);o.resolve(!!_)}}catch(p){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(p)}}return Oi}))}))}cancelNavigationTransition(i,r,s){let o=new li(i.id,this.urlSerializer.serialize(i.extractedUrl),r,s);this.events.next(o),i.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let i=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return i.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=$({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function CD(t){return t!==ra}var TD=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=$({token:e,factory:()=>W(SD),providedIn:"root"});let t=e;return t})(),Uf=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},SD=(()=>{let e=class e extends Uf{};e.\u0275fac=(()=>{let i;return function(s){return(i||(i=un(e)))(s||e)}})(),e.\u0275prov=$({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Pb=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=$({token:e,factory:()=>W(AD),providedIn:"root"});let t=e;return t})(),AD=(()=>{let e=class e extends Pb{constructor(){super(...arguments),this.location=W(Vi),this.urlSerializer=W(jf),this.options=W(Gf,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=W(Kf),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new ui,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=gb(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(i){return this.location.subscribe(r=>{r.type==="popstate"&&i(r.url,r.state)})}handleRouterEvent(i,r){if(i instanceof la)this.stateMemento=this.createStateMemento();else if(i instanceof gr)this.rawUrlTree=r.initialUrl;else if(i instanceof Sl){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let s=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??s,r)}}else i instanceof da?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):i instanceof li&&(i.code===Jt.GuardRejected||i.code===Jt.NoDataFromResolver)?this.restoreHistory(r):i instanceof ua?this.restoreHistory(r,!0):i instanceof di&&(this.lastSuccessfulId=i.id,this.currentPageId=this.browserPageId)}setBrowserUrl(i,r){let s=i instanceof ui?this.urlSerializer.serialize(i):i;if(this.location.isCurrentPathEqualTo(s)||r.extras.replaceUrl){let o=this.browserPageId,c=U(U({},r.extras.state),this.generateNgRouterState(r.id,o));this.location.replaceState(s,"",c)}else{let o=U(U({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(s,"",o)}}restoreHistory(i,r=!1){if(this.canceledNavigationResolution==="computed"){let s=this.browserPageId,o=this.currentPageId-s;o!==0?this.location.historyGo(o):this.currentUrlTree===i.finalUrl&&o===0&&(this.resetState(i),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(i),this.resetUrlToCurrentUrlTree())}resetState(i){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,i.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(i,r){return this.canceledNavigationResolution==="computed"?{navigationId:i,\u0275routerPageId:r}:{navigationId:i}}};e.\u0275fac=(()=>{let i;return function(s){return(i||(i=un(e)))(s||e)}})(),e.\u0275prov=$({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),na=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(na||{});function PD(t,e){t.events.pipe(ft(n=>n instanceof di||n instanceof li||n instanceof ua||n instanceof gr),ye(n=>n instanceof di||n instanceof gr?na.COMPLETE:(n instanceof li?n.code===Jt.Redirect||n.code===Jt.SupersededByNewNavigation:!1)?na.REDIRECTING:na.FAILED),ft(n=>n!==na.REDIRECTING),cn(1)).subscribe(()=>{e()})}function RD(t){throw t}var DD={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},OD={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},he=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=W(ol),this.stateManager=W(Pb),this.options=W(Gf,{optional:!0})||{},this.pendingTasks=W(Vo),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=W(ED),this.urlSerializer=W(jf),this.location=W(Vi),this.urlHandlingStrategy=W(Kf),this._events=new Se,this.errorHandler=this.options.errorHandler||RD,this.navigated=!1,this.routeReuseStrategy=W(TD),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=W(Hf,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!W($f,{optional:!0}),this.eventsSubscription=new cr,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:i=>{this.console.warn(i)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let i=this.navigationTransitions.events.subscribe(r=>{try{let s=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(s!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof li&&r.code!==Jt.Redirect&&r.code!==Jt.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof di)this.navigated=!0;else if(r instanceof _s){let c=r.navigationBehaviorOptions,l=this.urlHandlingStrategy.merge(r.url,s.currentRawUrl),u=U({browserUrl:s.extras.browserUrl,info:s.extras.info,skipLocationChange:s.extras.skipLocationChange,replaceUrl:s.extras.replaceUrl||this.urlUpdateStrategy==="eager"||CD(s.source)},c);this.scheduleNavigation(l,ra,null,u,{resolve:s.resolve,reject:s.reject,promise:s.promise})}}xD(r)&&this._events.next(r)}catch(s){this.navigationTransitions.transitionAbortSubject.next(s)}});this.eventsSubscription.add(i)}resetRootComponentType(i){this.routerState.root.component=i,this.navigationTransitions.rootComponentType=i}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),ra,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((i,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(i,"popstate",r)},0)})}navigateToSyncWithBrowser(i,r,s){let o={replaceUrl:!0},c=s?.navigationId?s:null;if(s){let u=U({},s);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(o.state=u)}let l=this.parseUrl(i);this.scheduleNavigation(l,r,c,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(i){this.config=i.map(Wf),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(i,r={}){let{relativeTo:s,queryParams:o,fragment:c,queryParamsHandling:l,preserveFragment:u}=r,h=u?this.currentUrlTree.fragment:c,p=null;switch(l){case"merge":p=U(U({},this.currentUrlTree.queryParams),o);break;case"preserve":p=this.currentUrlTree.queryParams;break;default:p=o||null}p!==null&&(p=this.removeEmptyProps(p));let _;try{let C=s?s.snapshot:this.routerState.snapshot.root;_=hb(C)}catch{(typeof i[0]!="string"||i[0][0]!=="/")&&(i=[]),_=this.currentUrlTree.root}return fb(_,i,p,h??null)}navigateByUrl(i,r={skipLocationChange:!1}){let s=aa(i)?i:this.parseUrl(i),o=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(o,ra,null,r)}navigate(i,r={skipLocationChange:!1}){return kD(i),this.navigateByUrl(this.createUrlTree(i,r),r)}serializeUrl(i){return this.urlSerializer.serialize(i)}parseUrl(i){try{return this.urlSerializer.parse(i)}catch{return this.urlSerializer.parse("/")}}isActive(i,r){let s;if(r===!0?s=U({},DD):r===!1?s=U({},OD):s=r,aa(i))return Y0(this.currentUrlTree,i,s);let o=this.parseUrl(i);return Y0(this.currentUrlTree,o,s)}removeEmptyProps(i){return Object.entries(i).reduce((r,[s,o])=>(o!=null&&(r[s]=o),r),{})}scheduleNavigation(i,r,s,o,c){if(this.disposed)return Promise.resolve(!1);let l,u,h;c?(l=c.resolve,u=c.reject,h=c.promise):h=new Promise((_,C)=>{l=_,u=C});let p=this.pendingTasks.add();return PD(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(p))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:i,extras:o,resolve:l,reject:u,promise:h,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),h.catch(_=>Promise.reject(_))}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=$({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function kD(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new je(4008,!1)}function xD(t){return!(t instanceof da)&&!(t instanceof _s)}var MD=new te("");function Rb(t,...e){return pt([{provide:Hf,multi:!0,useValue:t},[],{provide:fn,useFactory:ND,deps:[he]},{provide:jh,multi:!0,useFactory:FD},e.map(n=>n.\u0275providers)])}function ND(t){return t.routerState.root}function FD(){let t=W(ke);return e=>{let n=t.get(cs);if(e!==n.components[0])return;let i=t.get(he),r=t.get(VD);t.get(LD)===1&&i.initialNavigation(),t.get(UD,null,Mh.Optional)?.setUpPreloading(),t.get(MD,null,Mh.Optional)?.init(),i.resetRootComponentType(n.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}var VD=new te("",{factory:()=>new Se}),LD=new te("",{providedIn:"root",factory:()=>1});var UD=new te("");var jD=(t,e)=>({"disabled-btn":t,primary_botton_gradient:e}),Nl=(()=>{let e=class e{constructor(){this.btnName="",this.disabled=!1}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=H({type:e,selectors:[["lib-save-btn"]],inputs:{btnName:"btnName",disabled:"disabled"},standalone:!0,features:[Q],decls:2,vars:6,consts:[[1,"white","primary_botton_gradient",3,"disabled","ngClass"]],template:function(r,s){r&1&&(v(0,"button",0),E(1),y()),r&2&&(j("disabled",s.disabled)("ngClass",f0(3,jD,s.disabled,!s.disabled)),N(),be(" ",s.btnName,`
`))},dependencies:[xe,ll],styles:["button[_ngcontent-%COMP%]{display:flex;width:100%;height:100%;padding:20px;justify-content:center;align-items:center;gap:20px;flex-shrink:0;border:none;border-radius:30px;font-family:Jura,sans-serif;font-size:16px;font-style:normal;font-weight:700;line-height:normal}.disabled-btn[_ngcontent-%COMP%]{background-color:gray;color:#a9a9a9}"]});let t=e;return t})();var Ob=function(t){let e=[],n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},BD=function(t){let e=[],n=0,i=0;for(;n<t.length;){let r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){let s=t[n++];e[i++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){let s=t[n++],o=t[n++],c=t[n++],l=((r&7)<<18|(s&63)<<12|(o&63)<<6|c&63)-65536;e[i++]=String.fromCharCode(55296+(l>>10)),e[i++]=String.fromCharCode(56320+(l&1023))}else{let s=t[n++],o=t[n++];e[i++]=String.fromCharCode((r&15)<<12|(s&63)<<6|o&63)}}return e.join("")},kb={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<t.length;r+=3){let s=t[r],o=r+1<t.length,c=o?t[r+1]:0,l=r+2<t.length,u=l?t[r+2]:0,h=s>>2,p=(s&3)<<4|c>>4,_=(c&15)<<2|u>>6,C=u&63;l||(C=64,o||(_=64)),i.push(n[h],n[p],n[_],n[C])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Ob(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):BD(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<t.length;){let s=n[t.charAt(r++)],c=r<t.length?n[t.charAt(r)]:0;++r;let u=r<t.length?n[t.charAt(r)]:64;++r;let p=r<t.length?n[t.charAt(r)]:64;if(++r,s==null||c==null||u==null||p==null)throw new Qf;let _=s<<2|c>>4;if(i.push(_),u!==64){let C=c<<4&240|u>>2;if(i.push(C),p!==64){let O=u<<6&192|p;i.push(O)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},Qf=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},zD=function(t){let e=Ob(t);return kb.encodeByteArray(e,!0)},ba=function(t){return zD(t).replace(/\./g,"")},Jf=function(t){try{return kb.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function $D(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var qD=()=>$D().__FIREBASE_DEFAULTS__,GD=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},WD=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&Jf(t[1]);return e&&JSON.parse(e)},Vl=()=>{try{return qD()||GD()||WD()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Zf=t=>{var e,n;return(n=(e=Vl())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},bs=t=>{let e=Zf(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},ep=()=>{var t;return(t=Vl())===null||t===void 0?void 0:t.config},tp=t=>{var e;return(e=Vl())===null||e===void 0?void 0:e[`_${t}`]};var Fl=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}};function Ll(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},i=e||"demo-project",r=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[ba(JSON.stringify(n)),ba(JSON.stringify(o)),""].join(".")}function mt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function xb(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(mt())}function HD(){var t;let e=(t=Vl())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Mb(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Nb(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Fb(){let t=mt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function Vb(){return!HD()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function wa(){try{return typeof indexedDB=="object"}catch{return!1}}function Ul(){return new Promise((t,e)=>{try{let n=!0,i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var s;e(((s=r.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}function Lb(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}var KD="FirebaseError",vt=class t extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=KD,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Zt.prototype.create)}},Zt=class{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){let i=n[0]||{},r=`${this.service}/${e}`,s=this.errors[e],o=s?YD(s,i):"Error",c=`${this.serviceName}: ${o} (${r}).`;return new vt(r,c,i)}};function YD(t,e){return t.replace(QD,(n,i)=>{let r=e[i];return r!=null?String(r):`<${i}?>`})}var QD=/\{\$([^}]+)}/g;function Ub(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function _r(t,e){if(t===e)return!0;let n=Object.keys(t),i=Object.keys(e);for(let r of n){if(!i.includes(r))return!1;let s=t[r],o=e[r];if(Db(s)&&Db(o)){if(!_r(s,o))return!1}else if(s!==o)return!1}for(let r of i)if(!n.includes(r))return!1;return!0}function Db(t){return t!==null&&typeof t=="object"}function ws(t){let e=[];for(let[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function jb(t,e){let n=new Xf(t,e);return n.subscribe.bind(n)}var Xf=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let r;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");XD(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:i},r.next===void 0&&(r.next=Yf),r.error===void 0&&(r.error=Yf),r.complete===void 0&&(r.complete=Yf);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function XD(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Yf(){}var AB=4*60*60*1e3;function Re(t){return t&&t._delegate?t._delegate:t}var et=class{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var vr="[DEFAULT]";var np=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let i=new Fl;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{let r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;let i=this.normalizeInstanceIdentifier(e?.identifier),r=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(ZD(e))try{this.getOrInitializeService({instanceIdentifier:vr})}catch{}for(let[n,i]of this.instancesDeferred.entries()){let r=this.normalizeInstanceIdentifier(n);try{let s=this.getOrInitializeService({instanceIdentifier:r});i.resolve(s)}catch{}}}}clearInstance(e=vr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return g(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=vr){return this.instances.has(e)}getOptions(e=vr){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(let[s,o]of this.instancesDeferred.entries()){let c=this.normalizeInstanceIdentifier(s);i===c&&o.resolve(r)}return r}onInit(e,n){var i;let r=this.normalizeInstanceIdentifier(n),s=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;s.add(e),this.onInitCallbacks.set(r,s);let o=this.instances.get(r);return o&&e(o,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){let i=this.onInitCallbacks.get(n);if(i)for(let r of i)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:JD(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=vr){return this.component?this.component.multipleInstances?e:vr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function JD(t){return t===vr?void 0:t}function ZD(t){return t.instantiationMode==="EAGER"}var jl=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new np(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var eO=[],Ie=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}(Ie||{}),tO={debug:Ie.DEBUG,verbose:Ie.VERBOSE,info:Ie.INFO,warn:Ie.WARN,error:Ie.ERROR,silent:Ie.SILENT},nO=Ie.INFO,iO={[Ie.DEBUG]:"log",[Ie.VERBOSE]:"log",[Ie.INFO]:"info",[Ie.WARN]:"warn",[Ie.ERROR]:"error"},rO=(t,e,...n)=>{if(e<t.logLevel)return;let i=new Date().toISOString(),r=iO[e];if(r)console[r](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},zi=class{constructor(e){this.name=e,this._logLevel=nO,this._logHandler=rO,this._userLogHandler=null,eO.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ie))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?tO[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ie.DEBUG,...e),this._logHandler(this,Ie.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ie.VERBOSE,...e),this._logHandler(this,Ie.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ie.INFO,...e),this._logHandler(this,Ie.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ie.WARN,...e),this._logHandler(this,Ie.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ie.ERROR,...e),this._logHandler(this,Ie.ERROR,...e)}};var sO=(t,e)=>e.some(n=>t instanceof n),Bb,zb;function oO(){return Bb||(Bb=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function aO(){return zb||(zb=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var $b=new WeakMap,rp=new WeakMap,qb=new WeakMap,ip=new WeakMap,op=new WeakMap;function cO(t){let e=new Promise((n,i)=>{let r=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Cn(t.result)),r()},o=()=>{i(t.error),r()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&$b.set(n,t)}).catch(()=>{}),op.set(e,t),e}function lO(t){if(rp.has(t))return;let e=new Promise((n,i)=>{let r=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),r()},o=()=>{i(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});rp.set(t,e)}var sp={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return rp.get(t);if(e==="objectStoreNames")return t.objectStoreNames||qb.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Cn(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Gb(t){sp=t(sp)}function uO(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let i=t.call(Bl(this),e,...n);return qb.set(i,e.sort?e.sort():[e]),Cn(i)}:aO().includes(t)?function(...e){return t.apply(Bl(this),e),Cn($b.get(this))}:function(...e){return Cn(t.apply(Bl(this),e))}}function dO(t){return typeof t=="function"?uO(t):(t instanceof IDBTransaction&&lO(t),sO(t,oO())?new Proxy(t,sp):t)}function Cn(t){if(t instanceof IDBRequest)return cO(t);if(ip.has(t))return ip.get(t);let e=dO(t);return e!==t&&(ip.set(t,e),op.set(e,t)),e}var Bl=t=>op.get(t);function yr(t,e,{blocked:n,upgrade:i,blocking:r,terminated:s}={}){let o=indexedDB.open(t,e),c=Cn(o);return i&&o.addEventListener("upgradeneeded",l=>{i(Cn(o.result),l.oldVersion,l.newVersion,Cn(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),c.then(l=>{s&&l.addEventListener("close",()=>s()),r&&l.addEventListener("versionchange",u=>r(u.oldVersion,u.newVersion,u))}).catch(()=>{}),c}function zl(t,{blocked:e}={}){let n=indexedDB.deleteDatabase(t);return e&&n.addEventListener("blocked",i=>e(i.oldVersion,i)),Cn(n).then(()=>{})}var hO=["get","getKey","getAll","getAllKeys","count"],fO=["put","add","delete","clear"],ap=new Map;function Wb(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(ap.get(e))return ap.get(e);let n=e.replace(/FromIndex$/,""),i=e!==n,r=fO.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||hO.includes(n)))return;let s=function(o,...c){return g(this,null,function*(){let l=this.transaction(o,r?"readwrite":"readonly"),u=l.store;return i&&(u=u.index(c.shift())),(yield Promise.all([u[n](...c),r&&l.done]))[0]})};return ap.set(e,s),s}Gb(t=>me(U({},t),{get:(e,n,i)=>Wb(e,n)||t.get(e,n,i),has:(e,n)=>!!Wb(e,n)||t.has(e,n)}));var lp=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(pO(n)){let i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}};function pO(t){let e=t.getComponent();return e?.type==="VERSION"}var up="@firebase/app",Hb="0.10.6";var br=new zi("@firebase/app"),mO="@firebase/app-compat",gO="@firebase/analytics-compat",_O="@firebase/analytics",vO="@firebase/app-check-compat",yO="@firebase/app-check",bO="@firebase/auth",wO="@firebase/auth-compat",IO="@firebase/database",EO="@firebase/database-compat",CO="@firebase/functions",TO="@firebase/functions-compat",SO="@firebase/installations",AO="@firebase/installations-compat",PO="@firebase/messaging",RO="@firebase/messaging-compat",DO="@firebase/performance",OO="@firebase/performance-compat",kO="@firebase/remote-config",xO="@firebase/remote-config-compat",MO="@firebase/storage",NO="@firebase/storage-compat",FO="@firebase/firestore",VO="@firebase/vertexai-preview",LO="@firebase/firestore-compat",UO="firebase",jO="10.12.3";var dp="[DEFAULT]",BO={[up]:"fire-core",[mO]:"fire-core-compat",[_O]:"fire-analytics",[gO]:"fire-analytics-compat",[yO]:"fire-app-check",[vO]:"fire-app-check-compat",[bO]:"fire-auth",[wO]:"fire-auth-compat",[IO]:"fire-rtdb",[EO]:"fire-rtdb-compat",[CO]:"fire-fn",[TO]:"fire-fn-compat",[SO]:"fire-iid",[AO]:"fire-iid-compat",[PO]:"fire-fcm",[RO]:"fire-fcm-compat",[DO]:"fire-perf",[OO]:"fire-perf-compat",[kO]:"fire-rc",[xO]:"fire-rc-compat",[MO]:"fire-gcs",[NO]:"fire-gcs-compat",[FO]:"fire-fst",[LO]:"fire-fst-compat",[VO]:"fire-vertex","fire-js":"fire-js",[UO]:"fire-js-all"};var Ia=new Map,zO=new Map,hp=new Map;function Kb(t,e){try{t.container.addComponent(e)}catch(n){br.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function yt(t){let e=t.name;if(hp.has(e))return br.debug(`There were multiple attempts to register component ${e}.`),!1;hp.set(e,t);for(let n of Ia.values())Kb(n,t);for(let n of zO.values())Kb(n,t);return!0}function Ht(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Vn(t){return t.settings!==void 0}var $O={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},$i=new Zt("app","Firebase",$O);var fp=class{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new et("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw $i.create("app-deleted",{appName:this._name})}};var Ln=jO;function gp(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let i=Object.assign({name:dp,automaticDataCollectionEnabled:!1},e),r=i.name;if(typeof r!="string"||!r)throw $i.create("bad-app-name",{appName:String(r)});if(n||(n=ep()),!n)throw $i.create("no-options");let s=Ia.get(r);if(s){if(_r(n,s.options)&&_r(i,s.config))return s;throw $i.create("duplicate-app",{appName:r})}let o=new jl(r);for(let l of hp.values())o.addComponent(l);let c=new fp(n,i,o);return Ia.set(r,c),c}function en(t=dp){let e=Ia.get(t);if(!e&&t===dp&&ep())return gp();if(!e)throw $i.create("no-app",{appName:t});return e}function $l(){return Array.from(Ia.values())}function we(t,e,n){var i;let r=(i=BO[t])!==null&&i!==void 0?i:t;n&&(r+=`-${n}`);let s=r.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let c=[`Unable to register library "${r}" with version "${e}":`];s&&c.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&c.push("and"),o&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),br.warn(c.join(" "));return}yt(new et(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}var qO="firebase-heartbeat-database",GO=1,Ea="firebase-heartbeat-store",cp=null;function Jb(){return cp||(cp=yr(qO,GO,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ea)}catch(n){console.warn(n)}}}}).catch(t=>{throw $i.create("idb-open",{originalErrorMessage:t.message})})),cp}function WO(t){return g(this,null,function*(){try{let n=(yield Jb()).transaction(Ea),i=yield n.objectStore(Ea).get(Zb(t));return yield n.done,i}catch(e){if(e instanceof vt)br.warn(e.message);else{let n=$i.create("idb-get",{originalErrorMessage:e?.message});br.warn(n.message)}}})}function Yb(t,e){return g(this,null,function*(){try{let i=(yield Jb()).transaction(Ea,"readwrite");yield i.objectStore(Ea).put(e,Zb(t)),yield i.done}catch(n){if(n instanceof vt)br.warn(n.message);else{let i=$i.create("idb-set",{originalErrorMessage:n?.message});br.warn(i.message)}}})}function Zb(t){return`${t.name}!${t.options.appId}`}var HO=1024,KO=30*24*60*60*1e3,pp=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new mp(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}triggerHeartbeat(){return g(this,null,function*(){var e,n;let r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Qb();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:r}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{let c=new Date(o.date).valueOf();return Date.now()-c<=KO}),this._storage.overwrite(this._heartbeatsCache)})}getHeartbeatsHeader(){return g(this,null,function*(){var e;if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=Qb(),{heartbeatsToSend:i,unsentEntries:r}=YO(this._heartbeatsCache.heartbeats),s=ba(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s})}};function Qb(){return new Date().toISOString().substring(0,10)}function YO(t,e=HO){let n=[],i=t.slice();for(let r of t){let s=n.find(o=>o.agent===r.agent);if(s){if(s.dates.push(r.date),Xb(n)>e){s.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),Xb(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}var mp=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return g(this,null,function*(){return wa()?Ul().then(()=>!0).catch(()=>!1):!1})}read(){return g(this,null,function*(){if(yield this._canUseIndexedDBPromise){let n=yield WO(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return g(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let r=yield this.read();return Yb(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return g(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let r=yield this.read();return Yb(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return})}};function Xb(t){return ba(JSON.stringify({version:2,heartbeats:t})).length}function QO(t){yt(new et("platform-logger",e=>new lp(e),"PRIVATE")),yt(new et("heartbeat",e=>new pp(e),"PRIVATE")),we(up,Hb,t),we(up,Hb,"esm2017"),we("fire-js","")}QO("");var XO="firebase",JO="10.12.3";we(XO,JO,"app");var tn=new as("ANGULARFIRE2_VERSION"),ew=t=>`The APP_INITIALIZER that is "making" isSupported() sync for the sake of convenient DI has not resolved in this
context. Rather than injecting ${t} in the constructor, first ensure that ${t} is supported by calling
\`await isSupported()\`, then retrieve the instance from the injector manually \`injector.get(${t})\`.`;function jn(t,e,n){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===n);if(s.length===1)return s[0]}return n.container.getProvider(t).getImmediate({optional:!0})}var Tn=(t,e)=>{let n=e?[e]:$l(),i=[];return n.forEach(r=>{r.container.getProvider(t).instances.forEach(o=>{i.includes(o)||i.push(o)})}),i},Un=class{constructor(){return Tn(ZO)}},ZO="app-check";function Is(){}var ql=class{zone;delegate;constructor(e,n=Yy){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,i){let r=this.zone,s=function(o){r.runGuarded(()=>{e.apply(this,[o])})};return this.delegate.schedule(s,n,i)}},_p=class{zone;task=null;constructor(e){this.zone=e}call(e,n){let i=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Is,{},Is,Is)),n.pipe(ot({next:i,complete:i,error:i})).subscribe(e).add(i)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},pn=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new ql(Zone.current)),this.insideAngular=n.run(()=>new ql(Zone.current,Ky)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(i){return new(i||t)(M(ce))};static \u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Gl(){let t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return t}function ek(t){return Gl().ngZone.runOutsideAngular(()=>t())}function wr(t){return Gl().ngZone.run(()=>t())}function tk(t){return nk(Gl())(t)}function nk(t){return function(n){return n=n.lift(new _p(t.ngZone)),n.pipe(Ah(t.outsideAngular),Sh(t.insideAngular))}}var ik=(t,e)=>function(){let i=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),wr(()=>t.apply(void 0,i))},Me=(t,e)=>function(){let n,i=arguments;for(let s=0;s<arguments.length;s++)typeof i[s]=="function"&&(e&&(n||=wr(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Is,{},Is,Is))),i[s]=ik(i[s],n));let r=ek(()=>t.apply(this,i));if(!e)if(r instanceof Et){let s=Gl();return r.pipe(Ah(s.outsideAngular),Sh(s.insideAngular))}else return wr(()=>r);return r instanceof Et?r.pipe(tk):r instanceof Promise?wr(()=>new Promise((s,o)=>r.then(c=>wr(()=>s(c)),c=>wr(()=>o(c))))):typeof r=="function"&&n?function(){return setTimeout(()=>{n&&n.state==="scheduled"&&n.invoke()},10),r.apply(this,arguments)}:wr(()=>r)};var $t=class{constructor(e){return e}},nn=class{constructor(){return $l()}};function rk(t){return t&&t.length===1?t[0]:new $t(en())}var vp=new te("angularfire2._apps"),sk={provide:$t,useFactory:rk,deps:[[new Ve,vp]]},ok={provide:nn,deps:[[new Ve,vp]]};function ak(t){return(e,n)=>{let i=n.get(wn);we("angularfire",tn.full,"core"),we("angularfire",tn.full,"app"),we("angular",m0.full,i.toString());let r=e.runOutsideAngular(()=>t(n));return new $t(r)}}function tw(t,...e){return pt([sk,ok,{provide:vp,useFactory:ak(t),multi:!0,deps:[ce,ke,pn,...e]}])}var nw=Me(gp,!0);function vw(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var yw=vw,bw=new Zt("auth","Firebase",vw());var Xl=new zi("@firebase/auth");function ck(t,...e){Xl.logLevel<=Ie.WARN&&Xl.warn(`Auth (${Ln}): ${t}`,...e)}function Hl(t,...e){Xl.logLevel<=Ie.ERROR&&Xl.error(`Auth (${Ln}): ${t}`,...e)}function Wi(t,...e){throw qp(t,...e)}function Bn(t,...e){return qp(t,...e)}function ww(t,e,n){let i=Object.assign(Object.assign({},yw()),{[e]:n});return new Zt("auth","Firebase",i).create(e,{appName:t.name})}function Gi(t){return ww(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function qp(t,...e){if(typeof t!="string"){let n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return bw.create(t,...e)}function ee(t,e,...n){if(!t)throw qp(e,...n)}function hi(t){let e="INTERNAL ASSERTION FAILED: "+t;throw Hl(e),new Error(e)}function Hi(t,e){t||hi(e)}function Ep(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function Iw(){return iw()==="http:"||iw()==="https:"}function iw(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function lk(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Iw()||Mb()||"connection"in navigator)?navigator.onLine:!0}function uk(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var Ir=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,Hi(n>e,"Short delay should be less than long delay!"),this.isMobile=xb()||Nb()}get(){return lk()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function Gp(t,e){Hi(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var Jl=class{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;hi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;hi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;hi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var dk={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var hk=new Ir(3e4,6e4);function pi(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function zn(s,o,c,l){return g(this,arguments,function*(t,e,n,i,r={}){return Ew(t,r,()=>g(this,null,function*(){let u={},h={};i&&(e==="GET"?h=i:u={body:JSON.stringify(i)});let p=ws(Object.assign({key:t.config.apiKey},h)).slice(1),_=yield t._getAdditionalHeaders();return _["Content-Type"]="application/json",t.languageCode&&(_["X-Firebase-Locale"]=t.languageCode),Jl.fetch()(Cw(t,t.config.apiHost,n,p),Object.assign({method:e,headers:_,referrerPolicy:"no-referrer"},u))}))})}function Ew(t,e,n){return g(this,null,function*(){t._canInitEmulator=!1;let i=Object.assign(Object.assign({},dk),e);try{let r=new Cp(t),s=yield Promise.race([n(),r.promise]);r.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw Ca(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let c=s.ok?o.errorMessage:o.error.message,[l,u]=c.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ca(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Ca(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw Ca(t,"user-disabled",o);let h=i[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw ww(t,h,u);Wi(t,h)}}catch(r){if(r instanceof vt)throw r;Wi(t,"network-request-failed",{message:String(r)})}})}function cu(s,o,c,l){return g(this,arguments,function*(t,e,n,i,r={}){let u=yield zn(t,e,n,i,r);return"mfaPendingCredential"in u&&Wi(t,"multi-factor-auth-required",{_serverResponse:u}),u})}function Cw(t,e,n,i){let r=`${e}${n}?${i}`;return t.config.emulator?Gp(t.config,r):`${t.config.apiScheme}://${r}`}var Cp=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(Bn(this.auth,"network-request-failed")),hk.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function Ca(t,e,n){let i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);let r=Bn(t,e,i);return r.customData._tokenResponse=n,r}function rw(t){return t!==void 0&&t.getResponse!==void 0}function fk(t){return g(this,null,function*(){return(yield zn(t,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})}function pk(t,e){return g(this,null,function*(){return zn(t,"POST","/v1/accounts:delete",e)})}function Tw(t,e){return g(this,null,function*(){return zn(t,"POST","/v1/accounts:lookup",e)})}function Ta(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function Wp(t,e=!1){return g(this,null,function*(){let n=Re(t),i=yield n.getIdToken(e),r=Hp(i);ee(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");let s=typeof r.firebase=="object"?r.firebase:void 0,o=s?.sign_in_provider;return{claims:r,token:i,authTime:Ta(yp(r.auth_time)),issuedAtTime:Ta(yp(r.iat)),expirationTime:Ta(yp(r.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function yp(t){return Number(t)*1e3}function Hp(t){let[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return Hl("JWT malformed, contained fewer than 3 sections"),null;try{let r=Jf(n);return r?JSON.parse(r):(Hl("Failed to decode base64 JWT payload"),null)}catch(r){return Hl("Caught error parsing JWT payload as JSON",r?.toString()),null}}function sw(t){let e=Hp(t);return ee(e,"internal-error"),ee(typeof e.exp<"u","internal-error"),ee(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Aa(t,e,n=!1){return g(this,null,function*(){if(n)return e;try{return yield e}catch(i){throw i instanceof vt&&mk(i)&&t.auth.currentUser===t&&(yield t.auth.signOut()),i}})}function mk({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var Tp=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){let i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;let r=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(()=>g(this,null,function*(){yield this.iteration()}),n)}iteration(){return g(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Pa=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ta(this.lastLoginAt),this.creationTime=Ta(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function Zl(t){return g(this,null,function*(){var e;let n=t.auth,i=yield t.getIdToken(),r=yield Aa(t,Tw(n,{idToken:i}));ee(r?.users.length,n,"internal-error");let s=r.users[0];t._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?Sw(s.providerUserInfo):[],c=gk(t.providerData,o),l=t.isAnonymous,u=!(t.email&&s.passwordHash)&&!c?.length,h=l?u:!1,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:c,metadata:new Pa(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(t,p)})}function Kp(t){return g(this,null,function*(){let e=Re(t);yield Zl(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function gk(t,e){return[...t.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function Sw(t){return t.map(e=>{var{providerId:n}=e,i=Th(e,["providerId"]);return{providerId:n,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}function _k(t,e){return g(this,null,function*(){let n=yield Ew(t,{},()=>g(this,null,function*(){let i=ws({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:s}=t.config,o=Cw(t,r,"/v1/token",`key=${s}`),c=yield t._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",Jl.fetch()(o,{method:"POST",headers:c,body:i})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})}function vk(t,e){return g(this,null,function*(){return zn(t,"POST","/v2/accounts:revokeToken",pi(t,e))})}var Sa=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ee(e.idToken,"internal-error"),ee(typeof e.idToken<"u","internal-error"),ee(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):sw(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ee(e.length!==0,"internal-error");let n=sw(e);this.updateTokensAndExpiration(e,null,n)}getToken(e,n=!1){return g(this,null,function*(){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ee(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,n){return g(this,null,function*(){let{accessToken:i,refreshToken:r,expiresIn:s}=yield _k(e,n);this.updateTokensAndExpiration(i,r,Number(s))})}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){let{refreshToken:i,accessToken:r,expirationTime:s}=n,o=new t;return i&&(ee(typeof i=="string","internal-error",{appName:e}),o.refreshToken=i),r&&(ee(typeof r=="string","internal-error",{appName:e}),o.accessToken=r),s&&(ee(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return hi("not implemented")}};function qi(t,e){ee(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var Es=class t{constructor(e){var{uid:n,auth:i,stsTokenManager:r}=e,s=Th(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Tp(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Pa(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return g(this,null,function*(){let n=yield Aa(this,this.stsTokenManager.getToken(this.auth,e));return ee(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n})}getIdTokenResult(e){return Wp(this,e)}reload(){return Kp(this)}_assign(e){this!==e&&(ee(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ee(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){return g(this,null,function*(){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&(yield Zl(this)),yield this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)})}delete(){return g(this,null,function*(){if(Vn(this.auth.app))return Promise.reject(Gi(this.auth));let e=yield this.getIdToken();return yield Aa(this,pk(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var i,r,s,o,c,l,u,h;let p=(i=n.displayName)!==null&&i!==void 0?i:void 0,_=(r=n.email)!==null&&r!==void 0?r:void 0,C=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,O=(o=n.photoURL)!==null&&o!==void 0?o:void 0,F=(c=n.tenantId)!==null&&c!==void 0?c:void 0,D=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,z=(u=n.createdAt)!==null&&u!==void 0?u:void 0,X=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:Y,emailVerified:Z,isAnonymous:Ne,providerData:le,stsTokenManager:T}=n;ee(Y&&T,e,"internal-error");let b=Sa.fromJSON(this.name,T);ee(typeof Y=="string",e,"internal-error"),qi(p,e.name),qi(_,e.name),ee(typeof Z=="boolean",e,"internal-error"),ee(typeof Ne=="boolean",e,"internal-error"),qi(C,e.name),qi(O,e.name),qi(F,e.name),qi(D,e.name),qi(z,e.name),qi(X,e.name);let w=new t({uid:Y,auth:e,email:_,emailVerified:Z,displayName:p,isAnonymous:Ne,photoURL:O,phoneNumber:C,tenantId:F,stsTokenManager:b,createdAt:z,lastLoginAt:X});return le&&Array.isArray(le)&&(w.providerData=le.map(S=>Object.assign({},S))),D&&(w._redirectEventId=D),w}static _fromIdTokenResponse(e,n,i=!1){return g(this,null,function*(){let r=new Sa;r.updateFromServerResponse(n);let s=new t({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:i});return yield Zl(s),s})}static _fromGetAccountInfoResponse(e,n,i){return g(this,null,function*(){let r=n.users[0];ee(r.localId!==void 0,"internal-error");let s=r.providerUserInfo!==void 0?Sw(r.providerUserInfo):[],o=!(r.email&&r.passwordHash)&&!s?.length,c=new Sa;c.updateFromIdToken(i);let l=new t({uid:r.localId,auth:e,stsTokenManager:c,isAnonymous:o}),u={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:s,metadata:new Pa(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!s?.length};return Object.assign(l,u),l})}};var ow=new Map;function fi(t){Hi(t instanceof Function,"Expected a class definition");let e=ow.get(t);return e?(Hi(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,ow.set(t,e),e)}var yk=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return g(this,null,function*(){return!0})}_set(n,i){return g(this,null,function*(){this.storage[n]=i})}_get(n){return g(this,null,function*(){let i=this.storage[n];return i===void 0?null:i})}_remove(n){return g(this,null,function*(){delete this.storage[n]})}_addListener(n,i){}_removeListener(n,i){}}return t.type="NONE",t})(),Sp=yk;function Kl(t,e,n){return`firebase:${t}:${e}:${n}`}var eu=class t{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;let{config:r,name:s}=this.auth;this.fullUserKey=Kl(this.userKey,r.apiKey,s),this.fullPersistenceKey=Kl("persistence",r.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return g(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?Es._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return g(this,null,function*(){if(this.persistence===e)return;let n=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,i="authUser"){return g(this,null,function*(){if(!n.length)return new t(fi(Sp),e,i);let r=(yield Promise.all(n.map(u=>g(this,null,function*(){if(yield u._isAvailable())return u})))).filter(u=>u),s=r[0]||fi(Sp),o=Kl(i,e.config.apiKey,e.name),c=null;for(let u of n)try{let h=yield u._get(o);if(h){let p=Es._fromJSON(e,h);u!==s&&(c=p),s=u;break}}catch{}let l=r.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new t(s,e,i):(s=l[0],c&&(yield s._set(o,c.toJSON())),yield Promise.all(n.map(u=>g(this,null,function*(){if(u!==s)try{yield u._remove(o)}catch{}}))),new t(s,e,i))})}};function aw(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Rw(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Aw(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Ow(e))return"Blackberry";if(kw(e))return"Webos";if(Yp(e))return"Safari";if((e.includes("chrome/")||Pw(e))&&!e.includes("edge/"))return"Chrome";if(Dw(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if(i?.length===2)return i[1]}return"Other"}function Aw(t=mt()){return/firefox\//i.test(t)}function Yp(t=mt()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Pw(t=mt()){return/crios\//i.test(t)}function Rw(t=mt()){return/iemobile/i.test(t)}function Dw(t=mt()){return/android/i.test(t)}function Ow(t=mt()){return/blackberry/i.test(t)}function kw(t=mt()){return/webos/i.test(t)}function lu(t=mt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function bk(t=mt()){var e;return lu(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function wk(){return Fb()&&document.documentMode===10}function xw(t=mt()){return lu(t)||Dw(t)||kw(t)||Ow(t)||/windows phone/i.test(t)||Rw(t)}function Ik(){try{return!!(window&&window!==window.top)}catch{return!1}}function Mw(t,e=[]){let n;switch(t){case"Browser":n=aw(mt());break;case"Worker":n=`${aw(mt())}-${t}`;break;default:n=t}let i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ln}/${i}`}var Ap=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let i=s=>new Promise((o,c)=>{try{let l=e(s);o(l)}catch(l){c(l)}});i.onAbort=n,this.queue.push(i);let r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}runMiddleware(e){return g(this,null,function*(){if(this.auth.currentUser===e)return;let n=[];try{for(let i of this.queue)yield i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(let r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}})}};function Ek(n){return g(this,arguments,function*(t,e={}){return zn(t,"GET","/v2/passwordPolicy",pi(t,e))})}var Ck=6,Pp=class{constructor(e){var n,i,r,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:Ck,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,i,r,s,o,c;let l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(i=l.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(r=l.containsLowercaseLetter)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(c=l.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),l}validatePasswordLengthOptions(e,n){let i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,r,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var Rp=class{constructor(e,n,i,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new tu(this),this.idTokenSubscription=new tu(this),this.beforeStateQueue=new Ap(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=bw,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=fi(n)),this._initializationPromise=this.queue(()=>g(this,null,function*(){var i,r;if(!this._deleted&&(this.persistenceManager=yield eu.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(n),this.lastNotifiedUid=((r=this.currentUser)===null||r===void 0?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return g(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return g(this,null,function*(){try{let n=yield Tw(this,{idToken:e}),i=yield Es._fromGetAccountInfoResponse(this,n,e);yield this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return g(this,null,function*(){var n;if(Vn(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(c,c))}):this.directlySetCurrentUser(null)}let i=yield this.assertedPersistence.getCurrentUser(),r=i,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,c=r?._redirectEventId,l=yield this.tryRedirectSignIn(e);(!o||o===c)&&l?.user&&(r=l.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(r)}catch(o){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return ee(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)})}tryRedirectSignIn(e){return g(this,null,function*(){let n=null;try{n=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return n})}reloadAndSetCurrentUserOrClear(e){return g(this,null,function*(){try{yield Zl(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=uk()}_delete(){return g(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return g(this,null,function*(){if(Vn(this.app))return Promise.reject(Gi(this));let n=e?Re(e):null;return n&&ee(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))})}_updateCurrentUser(e,n=!1){return g(this,null,function*(){if(!this._deleted)return e&&ee(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>g(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return g(this,null,function*(){return Vn(this.app)?Promise.reject(Gi(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return Vn(this.app)?Promise.reject(Gi(this)):this.queue(()=>g(this,null,function*(){yield this.assertedPersistence.setPersistence(fi(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return g(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return g(this,null,function*(){let e=yield Ek(this),n=new Pp(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Zt("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let i=this.onAuthStateChanged(()=>{i(),e()},n)}})}revokeAccessToken(e){return g(this,null,function*(){if(this.currentUser){let n=yield this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),yield vk(this,i)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,n){return g(this,null,function*(){let i=yield this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return g(this,null,function*(){if(!this.redirectPersistenceManager){let n=e&&fi(e)||this._popupRedirectResolver;ee(n,this,"argument-error"),this.redirectPersistenceManager=yield eu.create(this,[fi(n._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return g(this,null,function*(){var n,i;return this._isInitialized&&(yield this.queue(()=>g(this,null,function*(){}))),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return g(this,null,function*(){if(e===this.currentUser)return this.queue(()=>g(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let i=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,r){if(this._deleted)return()=>{};let s=typeof n=="function"?n:n.next.bind(n),o=!1,c=this._isInitialized?Promise.resolve():this._initializationPromise;if(ee(c,this,"internal-error"),c.then(()=>{o||s(this.currentUser)}),typeof n=="function"){let l=e.addObserver(n,i,r);return()=>{o=!0,l()}}else{let l=e.addObserver(n);return()=>{o=!0,l()}}}directlySetCurrentUser(e){return g(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ee(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Mw(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return g(this,null,function*(){var e;let n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);let i=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();i&&(n["X-Firebase-Client"]=i);let r=yield this._getAppCheckToken();return r&&(n["X-Firebase-AppCheck"]=r),n})}_getAppCheckToken(){return g(this,null,function*(){var e;let n=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return n?.error&&ck(`Error while retrieving App Check token: ${n.error}`),n?.token})}};function Cs(t){return Re(t)}var tu=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=jb(n=>this.observer=n)}get next(){return ee(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var uu={loadJS(){return g(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Tk(t){uu=t}function Nw(t){return uu.loadJS(t)}function Sk(){return uu.recaptchaV2Script}function Ak(){return uu.gapiScript}function Fw(t){return`__${t}${Math.floor(Math.random()*1e6)}`}function Qp(t,e){let n=Ht(t,"auth");if(n.isInitialized()){let r=n.getImmediate(),s=n.getOptions();if(_r(s,e??{}))return r;Wi(r,"already-initialized")}return n.initialize({options:e})}function Pk(t,e){let n=e?.persistence||[],i=(Array.isArray(n)?n:[n]).map(fi);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e?.popupRedirectResolver)}function Xp(t,e,n){let i=Cs(t);ee(i._canInitEmulator,i,"emulator-config-failed"),ee(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");let r=!!n?.disableWarnings,s=Vw(e),{host:o,port:c}=Rk(e),l=c===null?"":`:${c}`;i.config.emulator={url:`${s}//${o}${l}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:o,port:c,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})}),r||Dk()}function Vw(t){let e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function Rk(t){let e=Vw(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};let i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){let s=r[1];return{host:s,port:cw(i.substr(s.length+1))}}else{let[s,o]=i.split(":");return{host:s,port:cw(o)}}}function cw(t){if(!t)return null;let e=Number(t);return isNaN(e)?null:e}function Dk(){function t(){let e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}var Ra=class{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return hi("not implemented")}_getIdTokenResponse(e){return hi("not implemented")}_linkToIdToken(e,n){return hi("not implemented")}_getReauthenticationResolver(e){return hi("not implemented")}};function bp(t,e){return g(this,null,function*(){return cu(t,"POST","/v1/accounts:signInWithIdp",pi(t,e))})}function Ok(t,e){return g(this,null,function*(){return zn(t,"POST","/v1/accounts:sendVerificationCode",pi(t,e))})}function kk(t,e){return g(this,null,function*(){return cu(t,"POST","/v1/accounts:signInWithPhoneNumber",pi(t,e))})}function xk(t,e){return g(this,null,function*(){let n=yield cu(t,"POST","/v1/accounts:signInWithPhoneNumber",pi(t,e));if(n.temporaryProof)throw Ca(t,"account-exists-with-different-credential",n);return n})}var Mk={USER_NOT_FOUND:"user-not-found"};function Nk(t,e){return g(this,null,function*(){let n=Object.assign(Object.assign({},e),{operation:"REAUTH"});return cu(t,"POST","/v1/accounts:signInWithPhoneNumber",pi(t,n),Mk)})}var nu=class t extends Ra{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,n){return new t({verificationId:e,verificationCode:n})}static _fromTokenResponse(e,n){return new t({phoneNumber:e,temporaryProof:n})}_getIdTokenResponse(e){return kk(e,this._makeVerificationRequest())}_linkToIdToken(e,n){return xk(e,Object.assign({idToken:n},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return Nk(e,this._makeVerificationRequest())}_makeVerificationRequest(){let{temporaryProof:e,phoneNumber:n,verificationId:i,verificationCode:r}=this.params;return e&&n?{temporaryProof:e,phoneNumber:n}:{sessionInfo:i,code:r}}toJSON(){let e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));let{verificationId:n,verificationCode:i,phoneNumber:r,temporaryProof:s}=e;return!i&&!n&&!r&&!s?null:new t({verificationId:n,verificationCode:i,phoneNumber:r,temporaryProof:s})}};var iu=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var Dp=class extends iu{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var Da=class t{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,n,i,r=!1){return g(this,null,function*(){let s=yield Es._fromIdTokenResponse(e,i,r),o=lw(i);return new t({user:s,providerId:o,_tokenResponse:i,operationType:n})})}static _forOperation(e,n,i){return g(this,null,function*(){yield e._updateTokensIfNecessary(i,!0);let r=lw(i);return new t({user:e,providerId:r,_tokenResponse:i,operationType:n})})}};function lw(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}var Op=class t extends vt{constructor(e,n,i,r){var s;super(n.code,n.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,t.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,r){return new t(e,n,i,r)}};function Lw(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Op._fromErrorAndOperation(t,s,e,i):s})}function Fk(t,e,n=!1){return g(this,null,function*(){let i=yield Aa(t,e._linkToIdToken(t.auth,yield t.getIdToken()),n);return Da._forOperation(t,"link",i)})}function Vk(t,e,n=!1){return g(this,null,function*(){let{auth:i}=t;if(Vn(i.app))return Promise.reject(Gi(i));let r="reauthenticate";try{let s=yield Aa(t,Lw(i,r,e,t),n);ee(s.idToken,i,"internal-error");let o=Hp(s.idToken);ee(o,i,"internal-error");let{sub:c}=o;return ee(t.uid===c,i,"user-mismatch"),Da._forOperation(t,r,s)}catch(s){throw s?.code==="auth/user-not-found"&&Wi(i,"user-mismatch"),s}})}function Uw(t,e,n=!1){return g(this,null,function*(){if(Vn(t.app))return Promise.reject(Gi(t));let i="signIn",r=yield Lw(t,i,e),s=yield Da._fromIdTokenResponse(t,i,r);return n||(yield t._updateCurrentUser(s.user)),s})}function Jp(t,e){return g(this,null,function*(){return Uw(Cs(t),e)})}function ka(t,e,n,i){return Re(t).onIdTokenChanged(e,n,i)}function Zp(t,e,n){return Re(t).beforeAuthStateChanged(e,n)}function em(t){return Re(t).signOut()}function Lk(t,e){return zn(t,"POST","/v2/accounts/mfaEnrollment:start",pi(t,e))}var ru="__sak";var su=class{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(ru,"1"),this.storage.removeItem(ru),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){let n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};function Uk(){let t=mt();return Yp(t)||lu(t)}var jk=1e3,Bk=10,zk=(()=>{class t extends su{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(n,i)=>this.onStorageEvent(n,i),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=Uk()&&Ik(),this.fallbackToPolling=xw(),this._shouldAllowMigration=!0}forAllChangedKeys(n){for(let i of Object.keys(this.listeners)){let r=this.storage.getItem(i),s=this.localCache[i];r!==s&&n(i,s,r)}}onStorageEvent(n,i=!1){if(!n.key){this.forAllChangedKeys((c,l,u)=>{this.notifyListeners(c,u)});return}let r=n.key;if(i?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){let c=this.storage.getItem(r);if(n.newValue!==c)n.newValue!==null?this.storage.setItem(r,n.newValue):this.storage.removeItem(r);else if(this.localCache[r]===n.newValue&&!i)return}let s=()=>{let c=this.storage.getItem(r);!i&&this.localCache[r]===c||this.notifyListeners(r,c)},o=this.storage.getItem(r);wk()&&o!==n.newValue&&n.newValue!==n.oldValue?setTimeout(s,Bk):s()}notifyListeners(n,i){this.localCache[n]=i;let r=this.listeners[n];if(r)for(let s of Array.from(r))s(i&&JSON.parse(i))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((n,i,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:n,oldValue:i,newValue:r}),!0)})},jk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(n,i){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[n]||(this.listeners[n]=new Set,this.localCache[n]=this.storage.getItem(n)),this.listeners[n].add(i)}_removeListener(n,i){this.listeners[n]&&(this.listeners[n].delete(i),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(n,i){return g(this,null,function*(){yield Di(t.prototype,this,"_set").call(this,n,i),this.localCache[n]=JSON.stringify(i)})}_get(n){return g(this,null,function*(){let i=yield Di(t.prototype,this,"_get").call(this,n);return this.localCache[n]=JSON.stringify(i),i})}_remove(n){return g(this,null,function*(){yield Di(t.prototype,this,"_remove").call(this,n),delete this.localCache[n]})}}return t.type="LOCAL",t})(),jw=zk;var $k=(()=>{class t extends su{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(n,i){}_removeListener(n,i){}}return t.type="SESSION",t})(),tm=$k;function qk(t){return Promise.all(t.map(e=>g(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(n){return{fulfilled:!1,reason:n}}})))}var Gk=(()=>{class t{constructor(n){this.eventTarget=n,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(n){let i=this.receivers.find(s=>s.isListeningto(n));if(i)return i;let r=new t(n);return this.receivers.push(r),r}isListeningto(n){return this.eventTarget===n}handleEvent(n){return g(this,null,function*(){let i=n,{eventId:r,eventType:s,data:o}=i.data,c=this.handlersMap[s];if(!c?.size)return;i.ports[0].postMessage({status:"ack",eventId:r,eventType:s});let l=Array.from(c).map(h=>g(this,null,function*(){return h(i.origin,o)})),u=yield qk(l);i.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:u})})}_subscribe(n,i){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[n]||(this.handlersMap[n]=new Set),this.handlersMap[n].add(i)}_unsubscribe(n,i){this.handlersMap[n]&&i&&this.handlersMap[n].delete(i),(!i||this.handlersMap[n].size===0)&&delete this.handlersMap[n],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}t.receivers=[];return t})();function Bw(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}var kp=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,n,i=50){return g(this,null,function*(){let r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,o;return new Promise((c,l)=>{let u=Bw("",20);r.port1.start();let h=setTimeout(()=>{l(new Error("unsupported_event"))},i);o={messageChannel:r,onMessage(p){let _=p;if(_.data.eventId===u)switch(_.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),c(_.data.response);break;default:clearTimeout(h),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[r.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})})}};function ct(){return window}function Wk(t){ct().location.href=t}function nm(){return typeof ct().WorkerGlobalScope<"u"&&typeof ct().importScripts=="function"}function Hk(){return g(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function Kk(){var t;return((t=navigator?.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function Yk(){return nm()?self:null}var zw="firebaseLocalStorageDb",Qk=1,ou="firebaseLocalStorage",$w="fbase_key",Er=class{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}};function du(t,e){return t.transaction([ou],e?"readwrite":"readonly").objectStore(ou)}function Xk(){let t=indexedDB.deleteDatabase(zw);return new Er(t).toPromise()}function xp(){let t=indexedDB.open(zw,Qk);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{let i=t.result;try{i.createObjectStore(ou,{keyPath:$w})}catch(r){n(r)}}),t.addEventListener("success",()=>g(this,null,function*(){let i=t.result;i.objectStoreNames.contains(ou)?e(i):(i.close(),yield Xk(),e(yield xp()))}))})}function uw(t,e,n){return g(this,null,function*(){let i=du(t,!0).put({[$w]:e,value:n});return new Er(i).toPromise()})}function Jk(t,e){return g(this,null,function*(){let n=du(t,!1).get(e),i=yield new Er(n).toPromise();return i===void 0?null:i.value})}function dw(t,e){let n=du(t,!0).delete(e);return new Er(n).toPromise()}var Zk=800,ex=3,tx=(()=>{class t{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return g(this,null,function*(){return this.db?this.db:(this.db=yield xp(),this.db)})}_withRetries(n){return g(this,null,function*(){let i=0;for(;;)try{let r=yield this._openDb();return yield n(r)}catch(r){if(i++>ex)throw r;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return g(this,null,function*(){return nm()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return g(this,null,function*(){this.receiver=Gk._getInstance(Yk()),this.receiver._subscribe("keyChanged",(n,i)=>g(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(i.key)}})),this.receiver._subscribe("ping",(n,i)=>g(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return g(this,null,function*(){var n,i;if(this.activeServiceWorker=yield Hk(),!this.activeServiceWorker)return;this.sender=new kp(this.activeServiceWorker);let r=yield this.sender._send("ping",{},800);r&&!((n=r[0])===null||n===void 0)&&n.fulfilled&&!((i=r[0])===null||i===void 0)&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(n){return g(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||Kk()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:n},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return g(this,null,function*(){try{if(!indexedDB)return!1;let n=yield xp();return yield uw(n,ru,"1"),yield dw(n,ru),!0}catch{}return!1})}_withPendingWrite(n){return g(this,null,function*(){this.pendingWrites++;try{yield n()}finally{this.pendingWrites--}})}_set(n,i){return g(this,null,function*(){return this._withPendingWrite(()=>g(this,null,function*(){return yield this._withRetries(r=>uw(r,n,i)),this.localCache[n]=i,this.notifyServiceWorker(n)}))})}_get(n){return g(this,null,function*(){let i=yield this._withRetries(r=>Jk(r,n));return this.localCache[n]=i,i})}_remove(n){return g(this,null,function*(){return this._withPendingWrite(()=>g(this,null,function*(){return yield this._withRetries(i=>dw(i,n)),delete this.localCache[n],this.notifyServiceWorker(n)}))})}_poll(){return g(this,null,function*(){let n=yield this._withRetries(s=>{let o=du(s,!1).getAll();return new Er(o).toPromise()});if(!n)return[];if(this.pendingWrites!==0)return[];let i=[],r=new Set;if(n.length!==0)for(let{fbase_key:s,value:o}of n)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),i.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),i.push(s));return i})}notifyListeners(n,i){this.localCache[n]=i;let r=this.listeners[n];if(r)for(let s of Array.from(r))s(i)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>g(this,null,function*(){return this._poll()}),Zk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(n,i){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[n]||(this.listeners[n]=new Set,this._get(n)),this.listeners[n].add(i)}_removeListener(n,i){this.listeners[n]&&(this.listeners[n].delete(i),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return t.type="LOCAL",t})(),qw=tx;function nx(t,e){return zn(t,"POST","/v2/accounts/mfaSignIn:start",pi(t,e))}var ix=500,rx=6e4,Wl=1e12,Mp=class{constructor(e){this.auth=e,this.counter=Wl,this._widgets=new Map}render(e,n){let i=this.counter;return this._widgets.set(i,new Np(e,this.auth.name,n||{})),this.counter++,i}reset(e){var n;let i=e||Wl;(n=this._widgets.get(i))===null||n===void 0||n.delete(),this._widgets.delete(i)}getResponse(e){var n;let i=e||Wl;return((n=this._widgets.get(i))===null||n===void 0?void 0:n.getResponse())||""}execute(e){return g(this,null,function*(){var n;let i=e||Wl;return(n=this._widgets.get(i))===null||n===void 0||n.execute(),""})}},Np=class{constructor(e,n,i){this.params=i,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};let r=typeof e=="string"?document.getElementById(e):e;ee(r,"argument-error",{appName:n}),this.container=r,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=sx(50);let{callback:e,"expired-callback":n}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,n)try{n()}catch{}this.isVisible&&this.execute()},rx)},ix))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}};function sx(t){let e=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let i=0;i<t;i++)e.push(n.charAt(Math.floor(Math.random()*n.length)));return e.join("")}var wp=Fw("rcb"),ox=new Ir(3e4,6e4),Fp=class{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(!((e=ct().grecaptcha)===null||e===void 0)&&e.render)}load(e,n=""){return ee(ax(n),e,"argument-error"),this.shouldResolveImmediately(n)&&rw(ct().grecaptcha)?Promise.resolve(ct().grecaptcha):new Promise((i,r)=>{let s=ct().setTimeout(()=>{r(Bn(e,"network-request-failed"))},ox.get());ct()[wp]=()=>{ct().clearTimeout(s),delete ct()[wp];let c=ct().grecaptcha;if(!c||!rw(c)){r(Bn(e,"internal-error"));return}let l=c.render;c.render=(u,h)=>{let p=l(u,h);return this.counter++,p},this.hostLanguage=n,i(c)};let o=`${Sk()}?${ws({onload:wp,render:"explicit",hl:n})}`;Nw(o).catch(()=>{clearTimeout(s),r(Bn(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var n;return!!(!((n=ct().grecaptcha)===null||n===void 0)&&n.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}};function ax(t){return t.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(t)}var Vp=class{load(e){return g(this,null,function*(){return new Mp(e)})}clearedOneInstance(){}};var Gw="recaptcha",cx={theme:"light",type:"image"},Cr=class{constructor(e,n,i=Object.assign({},cx)){this.parameters=i,this.type=Gw,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Cs(e),this.isInvisible=this.parameters.size==="invisible",ee(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");let r=typeof n=="string"?document.getElementById(n):n;ee(r,this.auth,"argument-error"),this.container=r,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Vp:new Fp,this.validateStartingState()}verify(){return g(this,null,function*(){this.assertNotDestroyed();let e=yield this.render(),n=this.getAssertedRecaptcha(),i=n.getResponse(e);return i||new Promise(r=>{let s=o=>{o&&(this.tokenChangeListeners.delete(s),r(o))};this.tokenChangeListeners.add(s),this.isInvisible&&n.execute(e)})})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){ee(!this.parameters.sitekey,this.auth,"argument-error"),ee(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ee(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return n=>{if(this.tokenChangeListeners.forEach(i=>i(n)),typeof e=="function")e(n);else if(typeof e=="string"){let i=ct()[e];typeof i=="function"&&i(n)}}}assertNotDestroyed(){ee(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){return g(this,null,function*(){if(yield this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){let n=document.createElement("div");e.appendChild(n),e=n}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId})}init(){return g(this,null,function*(){ee(Iw()&&!nm(),this.auth,"internal-error"),yield lx(),this.recaptcha=yield this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);let e=yield fk(this.auth);ee(e,this.auth,"internal-error"),this.parameters.sitekey=e})}getAssertedRecaptcha(){return ee(this.recaptcha,this.auth,"internal-error"),this.recaptcha}};function lx(){let t=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}t=()=>e(),window.addEventListener("load",t)}).catch(e=>{throw t&&window.removeEventListener("load",t),e})}var Lp=class{constructor(e,n){this.verificationId=e,this.onConfirmation=n}confirm(e){let n=nu._fromVerification(this.verificationId,e);return this.onConfirmation(n)}};function im(t,e,n){return g(this,null,function*(){if(Vn(t.app))return Promise.reject(Gi(t));let i=Cs(t),r=yield ux(i,e,Re(n));return new Lp(r,s=>Jp(i,s))})}function ux(t,e,n){return g(this,null,function*(){var i;let r=yield n.verify();try{ee(typeof r=="string",t,"argument-error"),ee(n.type===Gw,t,"argument-error");let s;if(typeof e=="string"?s={phoneNumber:e}:s=e,"session"in s){let o=s.session;if("phoneNumber"in s)return ee(o.type==="enroll",t,"internal-error"),(yield Lk(t,{idToken:o.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:r}})).phoneSessionInfo.sessionInfo;{ee(o.type==="signin",t,"internal-error");let c=((i=s.multiFactorHint)===null||i===void 0?void 0:i.uid)||s.multiFactorUid;return ee(c,t,"missing-multi-factor-info"),(yield nx(t,{mfaPendingCredential:o.credential,mfaEnrollmentId:c,phoneSignInInfo:{recaptchaToken:r}})).phoneResponseInfo.sessionInfo}}else{let{sessionInfo:o}=yield Ok(t,{phoneNumber:s.phoneNumber,recaptchaToken:r});return o}}finally{n._reset()}})}function dx(t,e){return e?fi(e):(ee(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}var Oa=class extends Ra{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return bp(e,this._buildIdpRequest())}_linkToIdToken(e,n){return bp(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return bp(e,this._buildIdpRequest())}_buildIdpRequest(e){let n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}};function hx(t){return Uw(t.auth,new Oa(t),t.bypassAuthState)}function fx(t){let{auth:e,user:n}=t;return ee(n,e,"internal-error"),Vk(n,new Oa(t),t.bypassAuthState)}function px(t){return g(this,null,function*(){let{auth:e,user:n}=t;return ee(n,e,"internal-error"),Fk(n,new Oa(t),t.bypassAuthState)})}var Up=class{constructor(e,n,i,r,s=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise((e,n)=>g(this,null,function*(){this.pendingPromise={resolve:e,reject:n};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}}))}onAuthEvent(e){return g(this,null,function*(){let{urlResponse:n,sessionId:i,postBody:r,tenantId:s,error:o,type:c}=e;if(o){this.reject(o);return}let l={auth:this.auth,requestUri:n,sessionId:i,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(c)(l))}catch(u){this.reject(u)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return hx;case"linkViaPopup":case"linkViaRedirect":return px;case"reauthViaPopup":case"reauthViaRedirect":return fx;default:Wi(this.auth,"internal-error")}}resolve(e){Hi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Hi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var I4=new Ir(2e3,1e4);var mx="pendingRedirect",Yl=new Map,jp=class t extends Up{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}execute(){return g(this,null,function*(){let e=Yl.get(this.auth._key());if(!e){try{let i=(yield gx(this.resolver,this.auth))?yield Di(t.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}Yl.set(this.auth._key(),e)}return this.bypassAuthState||Yl.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return g(this,null,function*(){if(e.type==="signInViaRedirect")return Di(t.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let n=yield this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,Di(t.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return g(this,null,function*(){})}cleanUp(){}};function gx(t,e){return g(this,null,function*(){let n=yx(e),i=vx(t);if(!(yield i._isAvailable()))return!1;let r=(yield i._get(n))==="true";return yield i._remove(n),r})}function _x(t,e){Yl.set(t._key(),e)}function vx(t){return fi(t._redirectPersistence)}function yx(t){return Kl(mx,t.config.apiKey,t.name)}function bx(t,e,n=!1){return g(this,null,function*(){if(Vn(t.app))return Promise.reject(Gi(t));let i=Cs(t),r=dx(i,e),o=yield new jp(i,r,n).execute();return o&&!n&&(delete o.user._redirectEventId,yield i._persistUserIfCurrent(o.user),yield i._setRedirectUser(null,e)),o})}var wx=10*60*1e3,Bp=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Ix(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!Ww(e)){let r=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";n.onError(Bn(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){let i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=wx&&this.cachedEventUids.clear(),this.cachedEventUids.has(hw(e))}saveEventToCache(e){this.cachedEventUids.add(hw(e)),this.lastProcessedEventTime=Date.now()}};function hw(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function Ww({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function Ix(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ww(t);default:return!1}}function Ex(n){return g(this,arguments,function*(t,e={}){return zn(t,"GET","/v1/projects",e)})}var Cx=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Tx=/^https?/;function Sx(t){return g(this,null,function*(){if(t.config.emulator)return;let{authorizedDomains:e}=yield Ex(t);for(let n of e)try{if(Ax(n))return}catch{}Wi(t,"unauthorized-domain")})}function Ax(t){let e=Ep(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){let o=new URL(t);return o.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===i}if(!Tx.test(n))return!1;if(Cx.test(t))return i===t;let r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}var Px=new Ir(3e4,6e4);function fw(){let t=ct().___jsl;if(t?.H){for(let e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function Rx(t){return new Promise((e,n)=>{var i,r,s;function o(){fw(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{fw(),n(Bn(t,"network-request-failed"))},timeout:Px.get()})}if(!((r=(i=ct().gapi)===null||i===void 0?void 0:i.iframes)===null||r===void 0)&&r.Iframe)e(gapi.iframes.getContext());else if(!((s=ct().gapi)===null||s===void 0)&&s.load)o();else{let c=Fw("iframefcb");return ct()[c]=()=>{gapi.load?o():n(Bn(t,"network-request-failed"))},Nw(`${Ak()}?onload=${c}`).catch(l=>n(l))}}).catch(e=>{throw Ql=null,e})}var Ql=null;function Dx(t){return Ql=Ql||Rx(t),Ql}var Ox=new Ir(5e3,15e3),kx="__/auth/iframe",xx="emulator/auth/iframe",Mx={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Nx=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Fx(t){let e=t.config;ee(e.authDomain,t,"auth-domain-config-required");let n=e.emulator?Gp(e,xx):`https://${t.config.authDomain}/${kx}`,i={apiKey:e.apiKey,appName:t.name,v:Ln},r=Nx.get(t.config.apiHost);r&&(i.eid=r);let s=t._getFrameworks();return s.length&&(i.fw=s.join(",")),`${n}?${ws(i).slice(1)}`}function Vx(t){return g(this,null,function*(){let e=yield Dx(t),n=ct().gapi;return ee(n,t,"internal-error"),e.open({where:document.body,url:Fx(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Mx,dontclear:!0},i=>new Promise((r,s)=>g(this,null,function*(){yield i.restyle({setHideOnLeave:!1});let o=Bn(t,"network-request-failed"),c=ct().setTimeout(()=>{s(o)},Ox.get());function l(){ct().clearTimeout(c),r(i)}i.ping(l).then(l,()=>{s(o)})})))})}var Lx={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Ux=500,jx=600,Bx="_blank",zx="http://localhost",au=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function $x(t,e,n,i=Ux,r=jx){let s=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-i)/2,0).toString(),c="",l=Object.assign(Object.assign({},Lx),{width:i.toString(),height:r.toString(),top:s,left:o}),u=mt().toLowerCase();n&&(c=Pw(u)?Bx:n),Aw(u)&&(e=e||zx,l.scrollbars="yes");let h=Object.entries(l).reduce((_,[C,O])=>`${_}${C}=${O},`,"");if(bk(u)&&c!=="_self")return qx(e||"",c),new au(null);let p=window.open(e||"",c,h);ee(p,t,"popup-blocked");try{p.focus()}catch{}return new au(p)}function qx(t,e){let n=document.createElement("a");n.href=t,n.target=e;let i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}var Gx="__/auth/handler",Wx="emulator/auth/handler",Hx=encodeURIComponent("fac");function pw(t,e,n,i,r,s){return g(this,null,function*(){ee(t.config.authDomain,t,"auth-domain-config-required"),ee(t.config.apiKey,t,"invalid-api-key");let o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:Ln,eventId:r};if(e instanceof iu){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",Ub(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(let[h,p]of Object.entries(s||{}))o[h]=p}if(e instanceof Dp){let h=e.getScopes().filter(p=>p!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);let c=o;for(let h of Object.keys(c))c[h]===void 0&&delete c[h];let l=yield t._getAppCheckToken(),u=l?`#${Hx}=${encodeURIComponent(l)}`:"";return`${Kx(t)}?${ws(c).slice(1)}${u}`})}function Kx({config:t}){return t.emulator?Gp(t,Wx):`https://${t.authDomain}/${Gx}`}var Ip="webStorageSupport",zp=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=tm,this._completeRedirectFn=bx,this._overrideRedirectResult=_x}_openPopup(e,n,i,r){return g(this,null,function*(){var s;Hi((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let o=yield pw(e,n,i,Ep(),r);return $x(e,o,Bw())})}_openRedirect(e,n,i,r){return g(this,null,function*(){yield this._originValidation(e);let s=yield pw(e,n,i,Ep(),r);return Wk(s),new Promise(()=>{})})}_initialize(e){let n=e._key();if(this.eventManagers[n]){let{manager:r,promise:s}=this.eventManagers[n];return r?Promise.resolve(r):(Hi(s,"If manager is not set, promise should be"),s)}let i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}initAndGetManager(e){return g(this,null,function*(){let n=yield Vx(e),i=new Bp(e);return n.register("authEvent",r=>(ee(r?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i})}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Ip,{type:Ip},r=>{var s;let o=(s=r?.[0])===null||s===void 0?void 0:s[Ip];o!==void 0&&n(!!o),Wi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Sx(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return xw()||Yp()||lu()}},Hw=zp;var mw="@firebase/auth",gw="1.7.5";var $p=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return g(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ee(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function Yx(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Qx(t){yt(new et("auth",(e,{options:n})=>{let i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:c}=i.options;ee(o&&!o.includes(":"),"invalid-api-key",{appName:i.name});let l={apiKey:o,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Mw(t)},u=new Rp(i,r,s,l);return Pk(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),yt(new et("auth-internal",e=>{let n=Cs(e.getProvider("auth").getImmediate());return(i=>new $p(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),we(mw,gw,Yx(t)),we(mw,gw,"esm2017")}var Xx=5*60,Jx=tp("authIdTokenMaxAge")||Xx,_w=null,Zx=t=>e=>g(void 0,null,function*(){let n=e&&(yield e.getIdTokenResult()),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>Jx)return;let r=n?.token;_w!==r&&(_w=r,yield fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))});function rm(t=en()){let e=Ht(t,"auth");if(e.isInitialized())return e.getImmediate();let n=Qp(t,{popupRedirectResolver:Hw,persistence:[qw,jw,tm]}),i=tp("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){let s=new URL(i,location.origin);if(location.origin===s.origin){let o=Zx(s.toString());Zp(n,o,()=>o(n.currentUser)),ka(n,c=>o(c))}}let r=Zf("auth");return r&&Xp(n,`http://${r}`),n}function e1(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}Tk({loadJS(t){return new Promise((e,n)=>{let i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=r=>{let s=Bn("internal-error");s.customData=r,n(s)},i.type="text/javascript",i.charset="UTF-8",e1().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Qx("Browser");function Qw(t){return new Et(function(e){var n=ka(t,e.next.bind(e),e.error.bind(e),e.complete.bind(e));return{unsubscribe:n}})}var Xw="auth",Sn=class{constructor(e){return e}},mi=class{constructor(){return Tn(Xw)}};var sm=new te("angularfire2.auth-instances");function $1(t,e){let n=jn(Xw,t,e);return n&&new Sn(n)}function q1(t){return(e,n)=>{let i=e.runOutsideAngular(()=>t(n));return new Sn(i)}}var G1={provide:mi,deps:[[new Ve,sm]]},W1={provide:Sn,useFactory:$1,deps:[[new Ve,sm],$t]};function Jw(t,...e){return we("angularfire",tn.full,"auth"),pt([W1,G1,{provide:sm,useFactory:q1(t),multi:!0,deps:[ce,ke,pn,nn,[new Ve,Un],...e]}])}var Zw=Me(Qw,!0);var hu=Me(rm,!0);var eI=Me(im,!0);var tI=Me(em,!0);var uI=(()=>{let e=class e{constructor(i,r){this._renderer=i,this._elementRef=r,this.onChange=s=>{},this.onTouched=()=>{}}setProperty(i,r){this._renderer.setProperty(this._elementRef.nativeElement,i,r)}registerOnTouched(i){this.onTouched=i}registerOnChange(i){this.onChange=i}setDisabledState(i){this.setProperty("disabled",i)}};e.\u0275fac=function(r){return new(r||e)(k(rs),k(Je))},e.\u0275dir=Oe({type:e});let t=e;return t})(),Cu=(()=>{let e=class e extends uI{};e.\u0275fac=(()=>{let i;return function(s){return(i||(i=un(e)))(s||e)}})(),e.\u0275dir=Oe({type:e,features:[Ze]});let t=e;return t})(),Sr=new te("");var H1={provide:Sr,useExisting:ln(()=>mn),multi:!0};function K1(){let t=us()?us().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var Y1=new te(""),mn=(()=>{let e=class e extends uI{constructor(i,r,s){super(i,r),this._compositionMode=s,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!K1())}writeValue(i){let r=i??"";this.setProperty("value",r)}_handleInput(i){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(i)}_compositionStart(){this._composing=!0}_compositionEnd(i){this._composing=!1,this._compositionMode&&this.onChange(i)}};e.\u0275fac=function(r){return new(r||e)(k(rs),k(Je),k(Y1,8))},e.\u0275dir=Oe({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,s){r&1&&G("input",function(c){return s._handleInput(c.target.value)})("blur",function(){return s.onTouched()})("compositionstart",function(){return s._compositionStart()})("compositionend",function(c){return s._compositionEnd(c.target.value)})},features:[Mt([H1]),Ze]});let t=e;return t})();function Ki(t){return t==null||(typeof t=="string"||Array.isArray(t))&&t.length===0}function dI(t){return t!=null&&typeof t.length=="number"}var Ar=new te(""),Tu=new te(""),Q1=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,qe=class{static min(e){return X1(e)}static max(e){return J1(e)}static required(e){return Z1(e)}static requiredTrue(e){return eM(e)}static email(e){return tM(e)}static minLength(e){return hI(e)}static maxLength(e){return fI(e)}static pattern(e){return pI(e)}static nullValidator(e){return pu(e)}static compose(e){return bI(e)}static composeAsync(e){return II(e)}};function X1(t){return e=>{if(Ki(e.value)||Ki(t))return null;let n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}function J1(t){return e=>{if(Ki(e.value)||Ki(t))return null;let n=parseFloat(e.value);return!isNaN(n)&&n>t?{max:{max:t,actual:e.value}}:null}}function Z1(t){return Ki(t.value)?{required:!0}:null}function eM(t){return t.value===!0?null:{required:!0}}function tM(t){return Ki(t.value)||Q1.test(t.value)?null:{email:!0}}function hI(t){return e=>Ki(e.value)||!dI(e.value)?null:e.value.length<t?{minlength:{requiredLength:t,actualLength:e.value.length}}:null}function fI(t){return e=>dI(e.value)&&e.value.length>t?{maxlength:{requiredLength:t,actualLength:e.value.length}}:null}function pI(t){if(!t)return pu;let e,n;return typeof t=="string"?(n="",t.charAt(0)!=="^"&&(n+="^"),n+=t,t.charAt(t.length-1)!=="$"&&(n+="$"),e=new RegExp(n)):(n=t.toString(),e=t),i=>{if(Ki(i.value))return null;let r=i.value;return e.test(r)?null:{pattern:{requiredPattern:n,actualValue:r}}}}function pu(t){return null}function mI(t){return t!=null}function gI(t){return al(t)?Ct(t):t}function _I(t){let e={};return t.forEach(n=>{e=n!=null?U(U({},e),n):e}),Object.keys(e).length===0?null:e}function vI(t,e){return e.map(n=>n(t))}function nM(t){return!t.validate}function yI(t){return t.map(e=>nM(e)?e:n=>e.validate(n))}function bI(t){if(!t)return null;let e=t.filter(mI);return e.length==0?null:function(n){return _I(vI(n,e))}}function wI(t){return t!=null?bI(yI(t)):null}function II(t){if(!t)return null;let e=t.filter(mI);return e.length==0?null:function(n){let i=vI(n,e).map(gI);return Xy(i).pipe(ye(_I))}}function EI(t){return t!=null?II(yI(t)):null}function iI(t,e){return t===null?[e]:Array.isArray(t)?[...t,e]:[t,e]}function CI(t){return t._rawValidators}function TI(t){return t._rawAsyncValidators}function om(t){return t?Array.isArray(t)?t:[t]:[]}function mu(t,e){return Array.isArray(t)?t.includes(e):t===e}function rI(t,e){let n=om(e);return om(t).forEach(r=>{mu(n,r)||n.push(r)}),n}function sI(t,e){return om(e).filter(n=>!mu(t,n))}var gu=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=wI(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=EI(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return this.control?this.control.hasError(e,n):!1}getError(e,n){return this.control?this.control.getError(e,n):null}},Tr=class extends gu{get formDirective(){return null}get path(){return null}},gi=class extends gu{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},_u=class{constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},iM={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},Pz=me(U({},iM),{"[class.ng-submitted]":"isSubmitted"}),qn=(()=>{let e=class e extends _u{constructor(i){super(i)}};e.\u0275fac=function(r){return new(r||e)(k(gi,2))},e.\u0275dir=Oe({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,s){r&2&&St("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)},features:[Ze]});let t=e;return t})(),As=(()=>{let e=class e extends _u{constructor(i){super(i)}};e.\u0275fac=function(r){return new(r||e)(k(Tr,10))},e.\u0275dir=Oe({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,s){r&2&&St("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)("ng-submitted",s.isSubmitted)},features:[Ze]});let t=e;return t})();var xa="VALID",fu="INVALID",Ts="PENDING",Ma="DISABLED",Yi=class{},vu=class extends Yi{constructor(e,n){super(),this.value=e,this.source=n}},Na=class extends Yi{constructor(e,n){super(),this.pristine=e,this.source=n}},Fa=class extends Yi{constructor(e,n){super(),this.touched=e,this.source=n}},Ss=class extends Yi{constructor(e,n){super(),this.status=e,this.source=n}},am=class extends Yi{constructor(e){super(),this.source=e}},cm=class extends Yi{constructor(e){super(),this.source=e}};function SI(t){return(Su(t)?t.validators:t)||null}function rM(t){return Array.isArray(t)?wI(t):t||null}function AI(t,e){return(Su(e)?e.asyncValidators:t)||null}function sM(t){return Array.isArray(t)?EI(t):t||null}function Su(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}function oM(t,e,n){let i=t.controls;if(!(e?Object.keys(i):i).length)throw new je(1e3,"");if(!i[n])throw new je(1001,"")}function aM(t,e,n){t._forEachChild((i,r)=>{if(n[r]===void 0)throw new je(1002,"")})}var yu=class{constructor(e,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=Go(()=>this.statusReactive()),this.statusReactive=Wt(void 0),this._pristine=Go(()=>this.pristineReactive()),this.pristineReactive=Wt(!0),this._touched=Go(()=>this.touchedReactive()),this.touchedReactive=Wt(!1),this._events=new Se,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return Nn(this.statusReactive)}set status(e){Nn(()=>this.statusReactive.set(e))}get valid(){return this.status===xa}get invalid(){return this.status===fu}get pending(){return this.status==Ts}get disabled(){return this.status===Ma}get enabled(){return this.status!==Ma}get pristine(){return Nn(this.pristineReactive)}set pristine(e){Nn(()=>this.pristineReactive.set(e))}get dirty(){return!this.pristine}get touched(){return Nn(this.touchedReactive)}set touched(e){Nn(()=>this.touchedReactive.set(e))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(rI(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(rI(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(sI(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(sI(e,this._rawAsyncValidators))}hasValidator(e){return mu(this._rawValidators,e)}hasAsyncValidator(e){return mu(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let n=this.touched===!1;this.touched=!0;let i=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(me(U({},e),{sourceControl:i})),n&&e.emitEvent!==!1&&this._events.next(new Fa(!0,i))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsTouched(e))}markAsUntouched(e={}){let n=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let i=e.sourceControl??this;this._forEachChild(r=>{r.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:i})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,i),n&&e.emitEvent!==!1&&this._events.next(new Fa(!1,i))}markAsDirty(e={}){let n=this.pristine===!0;this.pristine=!1;let i=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(me(U({},e),{sourceControl:i})),n&&e.emitEvent!==!1&&this._events.next(new Na(!1,i))}markAsPristine(e={}){let n=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let i=e.sourceControl??this;this._forEachChild(r=>{r.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,i),n&&e.emitEvent!==!1&&this._events.next(new Na(!0,i))}markAsPending(e={}){this.status=Ts;let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Ss(this.status,n)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(me(U({},e),{sourceControl:n}))}disable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=Ma,this.errors=null,this._forEachChild(r=>{r.disable(me(U({},e),{onlySelf:!0}))}),this._updateValue();let i=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new vu(this.value,i)),this._events.next(new Ss(this.status,i)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(me(U({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=xa,this._forEachChild(i=>{i.enable(me(U({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(me(U({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e,n){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},n),this._parent._updateTouched({},n))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let i=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===xa||this.status===Ts)&&this._runAsyncValidator(i,e.emitEvent)}let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new vu(this.value,n)),this._events.next(new Ss(this.status,n)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(me(U({},e),{sourceControl:n}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Ma:xa}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,n){if(this.asyncValidator){this.status=Ts,this._hasOwnPendingAsyncValidator={emitEvent:n!==!1};let i=gI(this.asyncValidator(this));this._asyncValidationSubscription=i.subscribe(r=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(r,{emitEvent:n,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(n.emitEvent!==!1,this,n.shouldHaveEmitted)}get(e){let n=e;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((i,r)=>i&&i._find(r),this)}getError(e,n){let i=n?this.get(n):this;return i&&i.errors?i.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,n,i){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||i)&&this._events.next(new Ss(this.status,n)),this._parent&&this._parent._updateControlsErrors(e,n,i)}_initObservables(){this.valueChanges=new Ke,this.statusChanges=new Ke}_calculateStatus(){return this._allControlsDisabled()?Ma:this.errors?fu:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Ts)?Ts:this._anyControlsHaveStatus(fu)?fu:xa}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,n){let i=!this._anyControlsDirty(),r=this.pristine!==i;this.pristine=i,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,n),r&&this._events.next(new Na(this.pristine,n))}_updateTouched(e={},n){this.touched=this._anyControlsTouched(),this._events.next(new Fa(this.touched,n)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,n)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Su(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let n=this._parent&&this._parent.dirty;return!e&&!!n&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=rM(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=sM(this._rawAsyncValidators)}},$n=class extends yu{constructor(e,n,i){super(SI(n),AI(i,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(e,n,i={}){this.registerControl(e,n),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(e,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(e,n,i={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,n={}){aM(this,!0,e),Object.keys(e).forEach(i=>{oM(this,!0,i),this.controls[i].setValue(e[i],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){e!=null&&(Object.keys(e).forEach(i=>{let r=this.controls[i];r&&r.patchValue(e[i],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e={},n={}){this._forEachChild((i,r)=>{i.reset(e?e[r]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n,this),this._updateTouched(n,this),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(e,n,i)=>(e[i]=n.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(n,i)=>i._syncPendingControls()?!0:n);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(n=>{let i=this.controls[n];i&&e(i,n)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[n,i]of Object.entries(this.controls))if(this.contains(n)&&e(i))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(n,i,r)=>((i.enabled||this.disabled)&&(n[r]=i.value),n))}_reduceChildren(e,n){let i=e;return this._forEachChild((r,s)=>{i=n(i,r,s)}),i}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var Va=new te("CallSetDisabledState",{providedIn:"root",factory:()=>Au}),Au="always";function PI(t,e){return[...e.path,t]}function bu(t,e,n=Au){lm(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||n==="always")&&e.valueAccessor.setDisabledState?.(t.disabled),lM(t,e),dM(t,e),uM(t,e),cM(t,e)}function wu(t,e,n=!0){let i=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(i),e.valueAccessor.registerOnTouched(i)),Eu(t,e),t&&(e._invokeOnDestroyCallbacks(),t._registerOnCollectionChange(()=>{}))}function Iu(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function cM(t,e){if(e.valueAccessor.setDisabledState){let n=i=>{e.valueAccessor.setDisabledState(i)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}function lm(t,e){let n=CI(t);e.validator!==null?t.setValidators(iI(n,e.validator)):typeof n=="function"&&t.setValidators([n]);let i=TI(t);e.asyncValidator!==null?t.setAsyncValidators(iI(i,e.asyncValidator)):typeof i=="function"&&t.setAsyncValidators([i]);let r=()=>t.updateValueAndValidity();Iu(e._rawValidators,r),Iu(e._rawAsyncValidators,r)}function Eu(t,e){let n=!1;if(t!==null){if(e.validator!==null){let r=CI(t);if(Array.isArray(r)&&r.length>0){let s=r.filter(o=>o!==e.validator);s.length!==r.length&&(n=!0,t.setValidators(s))}}if(e.asyncValidator!==null){let r=TI(t);if(Array.isArray(r)&&r.length>0){let s=r.filter(o=>o!==e.asyncValidator);s.length!==r.length&&(n=!0,t.setAsyncValidators(s))}}}let i=()=>{};return Iu(e._rawValidators,i),Iu(e._rawAsyncValidators,i),n}function lM(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&RI(t,e)})}function uM(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&RI(t,e),t.updateOn!=="submit"&&t.markAsTouched()})}function RI(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function dM(t,e){let n=(i,r)=>{e.valueAccessor.writeValue(i),r&&e.viewToModelUpdate(i)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}function hM(t,e){t==null,lm(t,e)}function fM(t,e){return Eu(t,e)}function um(t,e){if(!t.hasOwnProperty("model"))return!1;let n=t.model;return n.isFirstChange()?!0:!Object.is(e,n.currentValue)}function pM(t){return Object.getPrototypeOf(t.constructor)===Cu}function mM(t,e){t._syncPendingControls(),e.forEach(n=>{let i=n.control;i.updateOn==="submit"&&i._pendingChange&&(n.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}function dm(t,e){if(!e)return null;Array.isArray(e);let n,i,r;return e.forEach(s=>{s.constructor===mn?n=s:pM(s)?i=s:r=s}),r||i||n||null}function gM(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function oI(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function aI(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var De=class extends yu{constructor(e=null,n,i){super(SI(n),AI(i,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Su(n)&&(n.nonNullable||n.initialValueIsDefault)&&(aI(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(i=>i(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){oI(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){oI(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){aI(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var _M=t=>t instanceof De;var vM={provide:gi,useExisting:ln(()=>hm)},cI=Promise.resolve(),hm=(()=>{let e=class e extends gi{constructor(i,r,s,o,c,l){super(),this._changeDetectorRef=c,this.callSetDisabledState=l,this.control=new De,this._registered=!1,this.name="",this.update=new Ke,this._parent=i,this._setValidators(r),this._setAsyncValidators(s),this.valueAccessor=dm(this,o)}ngOnChanges(i){if(this._checkForErrors(),!this._registered||"name"in i){if(this._registered&&(this._checkName(),this.formDirective)){let r=i.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in i&&this._updateDisabled(i),um(i,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(i){this.viewModel=i,this.update.emit(i)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){bu(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(i){cI.then(()=>{this.control.setValue(i,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(i){let r=i.isDisabled.currentValue,s=r!==0&&ls(r);cI.then(()=>{s&&!this.control.disabled?this.control.disable():!s&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(i){return this._parent?PI(i,this._parent):[i]}};e.\u0275fac=function(r){return new(r||e)(k(Tr,9),k(Ar,10),k(Tu,10),k(Sr,10),k(ci,8),k(Va,8))},e.\u0275dir=Oe({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Mt([vM]),Ze,bn]});let t=e;return t})(),Ps=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=Oe({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]});let t=e;return t})(),yM={provide:Sr,useExisting:ln(()=>fm),multi:!0},fm=(()=>{let e=class e extends Cu{writeValue(i){let r=i??"";this.setProperty("value",r)}registerOnChange(i){this.onChange=r=>{i(r==""?null:parseFloat(r))}}};e.\u0275fac=(()=>{let i;return function(s){return(i||(i=un(e)))(s||e)}})(),e.\u0275dir=Oe({type:e,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,s){r&1&&G("input",function(c){return s.onChange(c.target.value)})("blur",function(){return s.onTouched()})},features:[Mt([yM]),Ze]});let t=e;return t})();var pm=new te(""),bM={provide:gi,useExisting:ln(()=>mm)},mm=(()=>{let e=class e extends gi{set isDisabled(i){}constructor(i,r,s,o,c){super(),this._ngModelWarningConfig=o,this.callSetDisabledState=c,this.update=new Ke,this._ngModelWarningSent=!1,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=dm(this,s)}ngOnChanges(i){if(this._isControlChanged(i)){let r=i.form.previousValue;r&&wu(r,this,!1),bu(this.form,this,this.callSetDisabledState),this.form.updateValueAndValidity({emitEvent:!1})}um(i,this.viewModel)&&(this.form.setValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.form&&wu(this.form,this,!1)}get path(){return[]}get control(){return this.form}viewToModelUpdate(i){this.viewModel=i,this.update.emit(i)}_isControlChanged(i){return i.hasOwnProperty("form")}};e._ngModelWarningSentOnce=!1,e.\u0275fac=function(r){return new(r||e)(k(Ar,10),k(Tu,10),k(Sr,10),k(pm,8),k(Va,8))},e.\u0275dir=Oe({type:e,selectors:[["","formControl",""]],inputs:{form:[0,"formControl","form"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},exportAs:["ngForm"],features:[Mt([bM]),Ze,bn]});let t=e;return t})(),wM={provide:Tr,useExisting:ln(()=>Pr)},Pr=(()=>{let e=class e extends Tr{get submitted(){return Nn(this._submittedReactive)}set submitted(i){this._submittedReactive.set(i)}constructor(i,r,s){super(),this.callSetDisabledState=s,this._submitted=Go(()=>this._submittedReactive()),this._submittedReactive=Wt(!1),this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new Ke,this._setValidators(i),this._setAsyncValidators(r)}ngOnChanges(i){this._checkFormPresent(),i.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Eu(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(i){let r=this.form.get(i.path);return bu(r,i,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(i),r}getControl(i){return this.form.get(i.path)}removeControl(i){wu(i.control||null,i,!1),gM(this.directives,i)}addFormGroup(i){this._setUpFormContainer(i)}removeFormGroup(i){this._cleanUpFormContainer(i)}getFormGroup(i){return this.form.get(i.path)}addFormArray(i){this._setUpFormContainer(i)}removeFormArray(i){this._cleanUpFormContainer(i)}getFormArray(i){return this.form.get(i.path)}updateModel(i,r){this.form.get(i.path).setValue(r)}onSubmit(i){return this._submittedReactive.set(!0),mM(this.form,this.directives),this.ngSubmit.emit(i),this.form._events.next(new am(this.control)),i?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(i=void 0){this.form.reset(i),this._submittedReactive.set(!1),this.form._events.next(new cm(this.form))}_updateDomValue(){this.directives.forEach(i=>{let r=i.control,s=this.form.get(i.path);r!==s&&(wu(r||null,i),_M(s)&&(bu(s,i,this.callSetDisabledState),i.control=s))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(i){let r=this.form.get(i.path);hM(r,i),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(i){if(this.form){let r=this.form.get(i.path);r&&fM(r,i)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){lm(this.form,this),this._oldForm&&Eu(this._oldForm,this)}_checkFormPresent(){this.form}};e.\u0275fac=function(r){return new(r||e)(k(Ar,10),k(Tu,10),k(Va,8))},e.\u0275dir=Oe({type:e,selectors:[["","formGroup",""]],hostBindings:function(r,s){r&1&&G("submit",function(c){return s.onSubmit(c)})("reset",function(){return s.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Mt([wM]),Ze,bn]});let t=e;return t})();var IM={provide:gi,useExisting:ln(()=>Rr)},Rr=(()=>{let e=class e extends gi{set isDisabled(i){}constructor(i,r,s,o,c){super(),this._ngModelWarningConfig=c,this._added=!1,this.name=null,this.update=new Ke,this._ngModelWarningSent=!1,this._parent=i,this._setValidators(r),this._setAsyncValidators(s),this.valueAccessor=dm(this,o)}ngOnChanges(i){this._added||this._setUpControl(),um(i,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(i){this.viewModel=i,this.update.emit(i)}get path(){return PI(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}};e._ngModelWarningSentOnce=!1,e.\u0275fac=function(r){return new(r||e)(k(Tr,13),k(Ar,10),k(Tu,10),k(Sr,10),k(pm,8))},e.\u0275dir=Oe({type:e,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},features:[Mt([IM]),Ze,bn]});let t=e;return t})(),EM={provide:Sr,useExisting:ln(()=>Qi),multi:!0};function DI(t,e){return t==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${t}: ${e}`.slice(0,50))}function CM(t){return t.split(":")[0]}var Qi=(()=>{let e=class e extends Cu{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(i){this._compareWith=i}writeValue(i){this.value=i;let r=this._getOptionId(i),s=DI(r,i);this.setProperty("value",s)}registerOnChange(i){this.onChange=r=>{this.value=this._getOptionValue(r),i(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(i){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),i))return r;return null}_getOptionValue(i){let r=CM(i);return this._optionMap.has(r)?this._optionMap.get(r):i}};e.\u0275fac=(()=>{let i;return function(s){return(i||(i=un(e)))(s||e)}})(),e.\u0275dir=Oe({type:e,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,s){r&1&&G("change",function(c){return s.onChange(c.target.value)})("blur",function(){return s.onTouched()})},inputs:{compareWith:"compareWith"},features:[Mt([EM]),Ze]});let t=e;return t})(),Rs=(()=>{let e=class e{constructor(i,r,s){this._element=i,this._renderer=r,this._select=s,this._select&&(this.id=this._select._registerOption())}set ngValue(i){this._select!=null&&(this._select._optionMap.set(this.id,i),this._setElementValue(DI(this.id,i)),this._select.writeValue(this._select.value))}set value(i){this._setElementValue(i),this._select&&this._select.writeValue(this._select.value)}_setElementValue(i){this._renderer.setProperty(this._element.nativeElement,"value",i)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}};e.\u0275fac=function(r){return new(r||e)(k(Je),k(rs),k(Qi,9))},e.\u0275dir=Oe({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}});let t=e;return t})(),TM={provide:Sr,useExisting:ln(()=>OI),multi:!0};function lI(t,e){return t==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${t}: ${e}`.slice(0,50))}function SM(t){return t.split(":")[0]}var OI=(()=>{let e=class e extends Cu{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(i){this._compareWith=i}writeValue(i){this.value=i;let r;if(Array.isArray(i)){let s=i.map(o=>this._getOptionId(o));r=(o,c)=>{o._setSelected(s.indexOf(c.toString())>-1)}}else r=(s,o)=>{s._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(i){this.onChange=r=>{let s=[],o=r.selectedOptions;if(o!==void 0){let c=o;for(let l=0;l<c.length;l++){let u=c[l],h=this._getOptionValue(u.value);s.push(h)}}else{let c=r.options;for(let l=0;l<c.length;l++){let u=c[l];if(u.selected){let h=this._getOptionValue(u.value);s.push(h)}}}this.value=s,i(s)}}_registerOption(i){let r=(this._idCounter++).toString();return this._optionMap.set(r,i),r}_getOptionId(i){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,i))return r;return null}_getOptionValue(i){let r=SM(i);return this._optionMap.has(r)?this._optionMap.get(r)._value:i}};e.\u0275fac=(()=>{let i;return function(s){return(i||(i=un(e)))(s||e)}})(),e.\u0275dir=Oe({type:e,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,s){r&1&&G("change",function(c){return s.onChange(c.target)})("blur",function(){return s.onTouched()})},inputs:{compareWith:"compareWith"},features:[Mt([TM]),Ze]});let t=e;return t})(),Ds=(()=>{let e=class e{constructor(i,r,s){this._element=i,this._renderer=r,this._select=s,this._select&&(this.id=this._select._registerOption(this))}set ngValue(i){this._select!=null&&(this._value=i,this._setElementValue(lI(this.id,i)),this._select.writeValue(this._select.value))}set value(i){this._select?(this._value=i,this._setElementValue(lI(this.id,i)),this._select.writeValue(this._select.value)):this._setElementValue(i)}_setElementValue(i){this._renderer.setProperty(this._element.nativeElement,"value",i)}_setSelected(i){this._renderer.setProperty(this._element.nativeElement,"selected",i)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}};e.\u0275fac=function(r){return new(r||e)(k(Je),k(rs),k(OI,9))},e.\u0275dir=Oe({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}});let t=e;return t})();function kI(t){return typeof t=="number"?t:parseInt(t,10)}var gm=(()=>{let e=class e{constructor(){this._validator=pu}ngOnChanges(i){if(this.inputName in i){let r=this.normalizeInput(i[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):pu,this._onChange&&this._onChange()}}validate(i){return this._validator(i)}registerOnValidatorChange(i){this._onChange=i}enabled(i){return i!=null}};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=Oe({type:e,features:[bn]});let t=e;return t})();var AM={provide:Ar,useExisting:ln(()=>_m),multi:!0},_m=(()=>{let e=class e extends gm{constructor(){super(...arguments),this.inputName="minlength",this.normalizeInput=i=>kI(i),this.createValidator=i=>hI(i)}};e.\u0275fac=(()=>{let i;return function(s){return(i||(i=un(e)))(s||e)}})(),e.\u0275dir=Oe({type:e,selectors:[["","minlength","","formControlName",""],["","minlength","","formControl",""],["","minlength","","ngModel",""]],hostVars:1,hostBindings:function(r,s){r&2&&dn("minlength",s._enabled?s.minlength:null)},inputs:{minlength:"minlength"},features:[Mt([AM]),Ze]});let t=e;return t})(),PM={provide:Ar,useExisting:ln(()=>La),multi:!0},La=(()=>{let e=class e extends gm{constructor(){super(...arguments),this.inputName="maxlength",this.normalizeInput=i=>kI(i),this.createValidator=i=>fI(i)}};e.\u0275fac=(()=>{let i;return function(s){return(i||(i=un(e)))(s||e)}})(),e.\u0275dir=Oe({type:e,selectors:[["","maxlength","","formControlName",""],["","maxlength","","formControl",""],["","maxlength","","ngModel",""]],hostVars:1,hostBindings:function(r,s){r&2&&dn("maxlength",s._enabled?s.maxlength:null)},inputs:{maxlength:"maxlength"},features:[Mt([PM]),Ze]});let t=e;return t})(),RM={provide:Ar,useExisting:ln(()=>vm),multi:!0},vm=(()=>{let e=class e extends gm{constructor(){super(...arguments),this.inputName="pattern",this.normalizeInput=i=>i,this.createValidator=i=>pI(i)}};e.\u0275fac=(()=>{let i;return function(s){return(i||(i=un(e)))(s||e)}})(),e.\u0275dir=Oe({type:e,selectors:[["","pattern","","formControlName",""],["","pattern","","formControl",""],["","pattern","","ngModel",""]],hostVars:1,hostBindings:function(r,s){r&2&&dn("pattern",s._enabled?s.pattern:null)},inputs:{pattern:"pattern"},features:[Mt([RM]),Ze]});let t=e;return t})();var xI=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=He({type:e}),e.\u0275inj=We({});let t=e;return t})();var Os=(()=>{let e=class e{static withConfig(i){return{ngModule:e,providers:[{provide:Va,useValue:i.callSetDisabledState??Au}]}}};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=He({type:e}),e.\u0275inj=We({imports:[xI]});let t=e;return t})(),Gn=(()=>{let e=class e{static withConfig(i){return{ngModule:e,providers:[{provide:pm,useValue:i.warnOnNgModelWithFormControl??"always"},{provide:Va,useValue:i.callSetDisabledState??Au}]}}};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=He({type:e}),e.\u0275inj=We({imports:[xI]});let t=e;return t})();var MI=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},NI={};var Xi,ym;(function(){var t;function e(T,b){function w(){}w.prototype=b.prototype,T.D=b.prototype,T.prototype=new w,T.prototype.constructor=T,T.C=function(S,A,R){for(var I=Array(arguments.length-2),ii=2;ii<arguments.length;ii++)I[ii-2]=arguments[ii];return b.prototype[A].apply(S,I)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(T,b,w){w||(w=0);var S=Array(16);if(typeof b=="string")for(var A=0;16>A;++A)S[A]=b.charCodeAt(w++)|b.charCodeAt(w++)<<8|b.charCodeAt(w++)<<16|b.charCodeAt(w++)<<24;else for(A=0;16>A;++A)S[A]=b[w++]|b[w++]<<8|b[w++]<<16|b[w++]<<24;b=T.g[0],w=T.g[1],A=T.g[2];var R=T.g[3],I=b+(R^w&(A^R))+S[0]+3614090360&4294967295;b=w+(I<<7&4294967295|I>>>25),I=R+(A^b&(w^A))+S[1]+3905402710&4294967295,R=b+(I<<12&4294967295|I>>>20),I=A+(w^R&(b^w))+S[2]+606105819&4294967295,A=R+(I<<17&4294967295|I>>>15),I=w+(b^A&(R^b))+S[3]+3250441966&4294967295,w=A+(I<<22&4294967295|I>>>10),I=b+(R^w&(A^R))+S[4]+4118548399&4294967295,b=w+(I<<7&4294967295|I>>>25),I=R+(A^b&(w^A))+S[5]+1200080426&4294967295,R=b+(I<<12&4294967295|I>>>20),I=A+(w^R&(b^w))+S[6]+2821735955&4294967295,A=R+(I<<17&4294967295|I>>>15),I=w+(b^A&(R^b))+S[7]+4249261313&4294967295,w=A+(I<<22&4294967295|I>>>10),I=b+(R^w&(A^R))+S[8]+1770035416&4294967295,b=w+(I<<7&4294967295|I>>>25),I=R+(A^b&(w^A))+S[9]+2336552879&4294967295,R=b+(I<<12&4294967295|I>>>20),I=A+(w^R&(b^w))+S[10]+4294925233&4294967295,A=R+(I<<17&4294967295|I>>>15),I=w+(b^A&(R^b))+S[11]+2304563134&4294967295,w=A+(I<<22&4294967295|I>>>10),I=b+(R^w&(A^R))+S[12]+1804603682&4294967295,b=w+(I<<7&4294967295|I>>>25),I=R+(A^b&(w^A))+S[13]+4254626195&4294967295,R=b+(I<<12&4294967295|I>>>20),I=A+(w^R&(b^w))+S[14]+2792965006&4294967295,A=R+(I<<17&4294967295|I>>>15),I=w+(b^A&(R^b))+S[15]+1236535329&4294967295,w=A+(I<<22&4294967295|I>>>10),I=b+(A^R&(w^A))+S[1]+4129170786&4294967295,b=w+(I<<5&4294967295|I>>>27),I=R+(w^A&(b^w))+S[6]+3225465664&4294967295,R=b+(I<<9&4294967295|I>>>23),I=A+(b^w&(R^b))+S[11]+643717713&4294967295,A=R+(I<<14&4294967295|I>>>18),I=w+(R^b&(A^R))+S[0]+3921069994&4294967295,w=A+(I<<20&4294967295|I>>>12),I=b+(A^R&(w^A))+S[5]+3593408605&4294967295,b=w+(I<<5&4294967295|I>>>27),I=R+(w^A&(b^w))+S[10]+38016083&4294967295,R=b+(I<<9&4294967295|I>>>23),I=A+(b^w&(R^b))+S[15]+3634488961&4294967295,A=R+(I<<14&4294967295|I>>>18),I=w+(R^b&(A^R))+S[4]+3889429448&4294967295,w=A+(I<<20&4294967295|I>>>12),I=b+(A^R&(w^A))+S[9]+568446438&4294967295,b=w+(I<<5&4294967295|I>>>27),I=R+(w^A&(b^w))+S[14]+3275163606&4294967295,R=b+(I<<9&4294967295|I>>>23),I=A+(b^w&(R^b))+S[3]+4107603335&4294967295,A=R+(I<<14&4294967295|I>>>18),I=w+(R^b&(A^R))+S[8]+1163531501&4294967295,w=A+(I<<20&4294967295|I>>>12),I=b+(A^R&(w^A))+S[13]+2850285829&4294967295,b=w+(I<<5&4294967295|I>>>27),I=R+(w^A&(b^w))+S[2]+4243563512&4294967295,R=b+(I<<9&4294967295|I>>>23),I=A+(b^w&(R^b))+S[7]+1735328473&4294967295,A=R+(I<<14&4294967295|I>>>18),I=w+(R^b&(A^R))+S[12]+2368359562&4294967295,w=A+(I<<20&4294967295|I>>>12),I=b+(w^A^R)+S[5]+4294588738&4294967295,b=w+(I<<4&4294967295|I>>>28),I=R+(b^w^A)+S[8]+2272392833&4294967295,R=b+(I<<11&4294967295|I>>>21),I=A+(R^b^w)+S[11]+1839030562&4294967295,A=R+(I<<16&4294967295|I>>>16),I=w+(A^R^b)+S[14]+4259657740&4294967295,w=A+(I<<23&4294967295|I>>>9),I=b+(w^A^R)+S[1]+2763975236&4294967295,b=w+(I<<4&4294967295|I>>>28),I=R+(b^w^A)+S[4]+1272893353&4294967295,R=b+(I<<11&4294967295|I>>>21),I=A+(R^b^w)+S[7]+4139469664&4294967295,A=R+(I<<16&4294967295|I>>>16),I=w+(A^R^b)+S[10]+3200236656&4294967295,w=A+(I<<23&4294967295|I>>>9),I=b+(w^A^R)+S[13]+681279174&4294967295,b=w+(I<<4&4294967295|I>>>28),I=R+(b^w^A)+S[0]+3936430074&4294967295,R=b+(I<<11&4294967295|I>>>21),I=A+(R^b^w)+S[3]+3572445317&4294967295,A=R+(I<<16&4294967295|I>>>16),I=w+(A^R^b)+S[6]+76029189&4294967295,w=A+(I<<23&4294967295|I>>>9),I=b+(w^A^R)+S[9]+3654602809&4294967295,b=w+(I<<4&4294967295|I>>>28),I=R+(b^w^A)+S[12]+3873151461&4294967295,R=b+(I<<11&4294967295|I>>>21),I=A+(R^b^w)+S[15]+530742520&4294967295,A=R+(I<<16&4294967295|I>>>16),I=w+(A^R^b)+S[2]+3299628645&4294967295,w=A+(I<<23&4294967295|I>>>9),I=b+(A^(w|~R))+S[0]+4096336452&4294967295,b=w+(I<<6&4294967295|I>>>26),I=R+(w^(b|~A))+S[7]+1126891415&4294967295,R=b+(I<<10&4294967295|I>>>22),I=A+(b^(R|~w))+S[14]+2878612391&4294967295,A=R+(I<<15&4294967295|I>>>17),I=w+(R^(A|~b))+S[5]+4237533241&4294967295,w=A+(I<<21&4294967295|I>>>11),I=b+(A^(w|~R))+S[12]+1700485571&4294967295,b=w+(I<<6&4294967295|I>>>26),I=R+(w^(b|~A))+S[3]+2399980690&4294967295,R=b+(I<<10&4294967295|I>>>22),I=A+(b^(R|~w))+S[10]+4293915773&4294967295,A=R+(I<<15&4294967295|I>>>17),I=w+(R^(A|~b))+S[1]+2240044497&4294967295,w=A+(I<<21&4294967295|I>>>11),I=b+(A^(w|~R))+S[8]+1873313359&4294967295,b=w+(I<<6&4294967295|I>>>26),I=R+(w^(b|~A))+S[15]+4264355552&4294967295,R=b+(I<<10&4294967295|I>>>22),I=A+(b^(R|~w))+S[6]+2734768916&4294967295,A=R+(I<<15&4294967295|I>>>17),I=w+(R^(A|~b))+S[13]+1309151649&4294967295,w=A+(I<<21&4294967295|I>>>11),I=b+(A^(w|~R))+S[4]+4149444226&4294967295,b=w+(I<<6&4294967295|I>>>26),I=R+(w^(b|~A))+S[11]+3174756917&4294967295,R=b+(I<<10&4294967295|I>>>22),I=A+(b^(R|~w))+S[2]+718787259&4294967295,A=R+(I<<15&4294967295|I>>>17),I=w+(R^(A|~b))+S[9]+3951481745&4294967295,T.g[0]=T.g[0]+b&4294967295,T.g[1]=T.g[1]+(A+(I<<21&4294967295|I>>>11))&4294967295,T.g[2]=T.g[2]+A&4294967295,T.g[3]=T.g[3]+R&4294967295}i.prototype.u=function(T,b){b===void 0&&(b=T.length);for(var w=b-this.blockSize,S=this.B,A=this.h,R=0;R<b;){if(A==0)for(;R<=w;)r(this,T,R),R+=this.blockSize;if(typeof T=="string"){for(;R<b;)if(S[A++]=T.charCodeAt(R++),A==this.blockSize){r(this,S),A=0;break}}else for(;R<b;)if(S[A++]=T[R++],A==this.blockSize){r(this,S),A=0;break}}this.h=A,this.o+=b},i.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var b=1;b<T.length-8;++b)T[b]=0;var w=8*this.o;for(b=T.length-8;b<T.length;++b)T[b]=w&255,w/=256;for(this.u(T),T=Array(16),b=w=0;4>b;++b)for(var S=0;32>S;S+=8)T[w++]=this.g[b]>>>S&255;return T};function s(T,b){var w=c;return Object.prototype.hasOwnProperty.call(w,T)?w[T]:w[T]=b(T)}function o(T,b){this.h=b;for(var w=[],S=!0,A=T.length-1;0<=A;A--){var R=T[A]|0;S&&R==b||(w[A]=R,S=!1)}this.g=w}var c={};function l(T){return-128<=T&&128>T?s(T,function(b){return new o([b|0],0>b?-1:0)}):new o([T|0],0>T?-1:0)}function u(T){if(isNaN(T)||!isFinite(T))return p;if(0>T)return D(u(-T));for(var b=[],w=1,S=0;T>=w;S++)b[S]=T/w|0,w*=4294967296;return new o(b,0)}function h(T,b){if(T.length==0)throw Error("number format error: empty string");if(b=b||10,2>b||36<b)throw Error("radix out of range: "+b);if(T.charAt(0)=="-")return D(h(T.substring(1),b));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var w=u(Math.pow(b,8)),S=p,A=0;A<T.length;A+=8){var R=Math.min(8,T.length-A),I=parseInt(T.substring(A,A+R),b);8>R?(R=u(Math.pow(b,R)),S=S.j(R).add(u(I))):(S=S.j(w),S=S.add(u(I)))}return S}var p=l(0),_=l(1),C=l(16777216);t=o.prototype,t.m=function(){if(F(this))return-D(this).m();for(var T=0,b=1,w=0;w<this.g.length;w++){var S=this.i(w);T+=(0<=S?S:4294967296+S)*b,b*=4294967296}return T},t.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(O(this))return"0";if(F(this))return"-"+D(this).toString(T);for(var b=u(Math.pow(T,6)),w=this,S="";;){var A=Z(w,b).g;w=z(w,A.j(b));var R=((0<w.g.length?w.g[0]:w.h)>>>0).toString(T);if(w=A,O(w))return R+S;for(;6>R.length;)R="0"+R;S=R+S}},t.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function O(T){if(T.h!=0)return!1;for(var b=0;b<T.g.length;b++)if(T.g[b]!=0)return!1;return!0}function F(T){return T.h==-1}t.l=function(T){return T=z(this,T),F(T)?-1:O(T)?0:1};function D(T){for(var b=T.g.length,w=[],S=0;S<b;S++)w[S]=~T.g[S];return new o(w,~T.h).add(_)}t.abs=function(){return F(this)?D(this):this},t.add=function(T){for(var b=Math.max(this.g.length,T.g.length),w=[],S=0,A=0;A<=b;A++){var R=S+(this.i(A)&65535)+(T.i(A)&65535),I=(R>>>16)+(this.i(A)>>>16)+(T.i(A)>>>16);S=I>>>16,R&=65535,I&=65535,w[A]=I<<16|R}return new o(w,w[w.length-1]&-2147483648?-1:0)};function z(T,b){return T.add(D(b))}t.j=function(T){if(O(this)||O(T))return p;if(F(this))return F(T)?D(this).j(D(T)):D(D(this).j(T));if(F(T))return D(this.j(D(T)));if(0>this.l(C)&&0>T.l(C))return u(this.m()*T.m());for(var b=this.g.length+T.g.length,w=[],S=0;S<2*b;S++)w[S]=0;for(S=0;S<this.g.length;S++)for(var A=0;A<T.g.length;A++){var R=this.i(S)>>>16,I=this.i(S)&65535,ii=T.i(A)>>>16,po=T.i(A)&65535;w[2*S+2*A]+=I*po,X(w,2*S+2*A),w[2*S+2*A+1]+=R*po,X(w,2*S+2*A+1),w[2*S+2*A+1]+=I*ii,X(w,2*S+2*A+1),w[2*S+2*A+2]+=R*ii,X(w,2*S+2*A+2)}for(S=0;S<b;S++)w[S]=w[2*S+1]<<16|w[2*S];for(S=b;S<2*b;S++)w[S]=0;return new o(w,0)};function X(T,b){for(;(T[b]&65535)!=T[b];)T[b+1]+=T[b]>>>16,T[b]&=65535,b++}function Y(T,b){this.g=T,this.h=b}function Z(T,b){if(O(b))throw Error("division by zero");if(O(T))return new Y(p,p);if(F(T))return b=Z(D(T),b),new Y(D(b.g),D(b.h));if(F(b))return b=Z(T,D(b)),new Y(D(b.g),b.h);if(30<T.g.length){if(F(T)||F(b))throw Error("slowDivide_ only works with positive integers.");for(var w=_,S=b;0>=S.l(T);)w=Ne(w),S=Ne(S);var A=le(w,1),R=le(S,1);for(S=le(S,2),w=le(w,2);!O(S);){var I=R.add(S);0>=I.l(T)&&(A=A.add(w),R=I),S=le(S,1),w=le(w,1)}return b=z(T,A.j(b)),new Y(A,b)}for(A=p;0<=T.l(b);){for(w=Math.max(1,Math.floor(T.m()/b.m())),S=Math.ceil(Math.log(w)/Math.LN2),S=48>=S?1:Math.pow(2,S-48),R=u(w),I=R.j(b);F(I)||0<I.l(T);)w-=S,R=u(w),I=R.j(b);O(R)&&(R=_),A=A.add(R),T=z(T,I)}return new Y(A,T)}t.A=function(T){return Z(this,T).h},t.and=function(T){for(var b=Math.max(this.g.length,T.g.length),w=[],S=0;S<b;S++)w[S]=this.i(S)&T.i(S);return new o(w,this.h&T.h)},t.or=function(T){for(var b=Math.max(this.g.length,T.g.length),w=[],S=0;S<b;S++)w[S]=this.i(S)|T.i(S);return new o(w,this.h|T.h)},t.xor=function(T){for(var b=Math.max(this.g.length,T.g.length),w=[],S=0;S<b;S++)w[S]=this.i(S)^T.i(S);return new o(w,this.h^T.h)};function Ne(T){for(var b=T.g.length+1,w=[],S=0;S<b;S++)w[S]=T.i(S)<<1|T.i(S-1)>>>31;return new o(w,T.h)}function le(T,b){var w=b>>5;b%=32;for(var S=T.g.length-w,A=[],R=0;R<S;R++)A[R]=0<b?T.i(R+w)>>>b|T.i(R+w+1)<<32-b:T.i(R+w);return new o(A,T.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,ym=NI.Md5=i,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=h,Xi=NI.Integer=o}).apply(typeof MI<"u"?MI:typeof self<"u"?self:typeof window<"u"?window:{});var Pu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},_i={};var bm,wm,ks,Im,ja,Ru,Em,Cm,Tm;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,d,f){return a==Array.prototype||a==Object.prototype||(a[d]=f.value),a};function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof Pu=="object"&&Pu];for(var d=0;d<a.length;++d){var f=a[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var i=n(this);function r(a,d){if(d)e:{var f=i;a=a.split(".");for(var m=0;m<a.length-1;m++){var P=a[m];if(!(P in f))break e;f=f[P]}a=a[a.length-1],m=f[a],d=d(m),d!=m&&d!=null&&e(f,a,{configurable:!0,writable:!0,value:d})}}function s(a,d){a instanceof String&&(a+="");var f=0,m=!1,P={next:function(){if(!m&&f<a.length){var x=f++;return{value:d(x,a[x]),done:!1}}return m=!0,{done:!0,value:void 0}}};return P[Symbol.iterator]=function(){return P},P}r("Array.prototype.values",function(a){return a||function(){return s(this,function(d,f){return f})}});var o=o||{},c=this||self;function l(a){var d=typeof a;return d=d!="object"?d:a?Array.isArray(a)?"array":d:"null",d=="array"||d=="object"&&typeof a.length=="number"}function u(a){var d=typeof a;return d=="object"&&a!=null||d=="function"}function h(a,d,f){return a.call.apply(a.bind,arguments)}function p(a,d,f){if(!a)throw Error();if(2<arguments.length){var m=Array.prototype.slice.call(arguments,2);return function(){var P=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(P,m),a.apply(d,P)}}return function(){return a.apply(d,arguments)}}function _(a,d,f){return _=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,_.apply(null,arguments)}function C(a,d){var f=Array.prototype.slice.call(arguments,1);return function(){var m=f.slice();return m.push.apply(m,arguments),a.apply(this,m)}}function O(a,d){function f(){}f.prototype=d.prototype,a.aa=d.prototype,a.prototype=new f,a.prototype.constructor=a,a.Qb=function(m,P,x){for(var q=Array(arguments.length-2),Fe=2;Fe<arguments.length;Fe++)q[Fe-2]=arguments[Fe];return d.prototype[P].apply(m,q)}}function F(a){let d=a.length;if(0<d){let f=Array(d);for(let m=0;m<d;m++)f[m]=a[m];return f}return[]}function D(a,d){for(let f=1;f<arguments.length;f++){let m=arguments[f];if(l(m)){let P=a.length||0,x=m.length||0;a.length=P+x;for(let q=0;q<x;q++)a[P+q]=m[q]}else a.push(m)}}class z{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function X(a){return/^[\s\xa0]*$/.test(a)}function Y(){var a=c.navigator;return a&&(a=a.userAgent)?a:""}function Z(a){return Z[" "](a),a}Z[" "]=function(){};var Ne=Y().indexOf("Gecko")!=-1&&!(Y().toLowerCase().indexOf("webkit")!=-1&&Y().indexOf("Edge")==-1)&&!(Y().indexOf("Trident")!=-1||Y().indexOf("MSIE")!=-1)&&Y().indexOf("Edge")==-1;function le(a,d,f){for(let m in a)d.call(f,a[m],m,a)}function T(a,d){for(let f in a)d.call(void 0,a[f],f,a)}function b(a){let d={};for(let f in a)d[f]=a[f];return d}let w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function S(a,d){let f,m;for(let P=1;P<arguments.length;P++){m=arguments[P];for(f in m)a[f]=m[f];for(let x=0;x<w.length;x++)f=w[x],Object.prototype.hasOwnProperty.call(m,f)&&(a[f]=m[f])}}function A(a){var d=1;a=a.split(":");let f=[];for(;0<d&&a.length;)f.push(a.shift()),d--;return a.length&&f.push(a.join(":")),f}function R(a){c.setTimeout(()=>{throw a},0)}function I(){var a=Xd;let d=null;return a.g&&(d=a.g,a.g=a.g.next,a.g||(a.h=null),d.next=null),d}class ii{constructor(){this.h=this.g=null}add(d,f){let m=po.get();m.set(d,f),this.h?this.h.next=m:this.g=m,this.h=m}}var po=new z(()=>new wA,a=>a.reset());class wA{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let mo,go=!1,Xd=new ii,Hv=()=>{let a=c.Promise.resolve(void 0);mo=()=>{a.then(IA)}};var IA=()=>{for(var a;a=I();){try{a.h.call(a.g)}catch(f){R(f)}var d=po;d.j(a),100>d.h&&(d.h++,a.next=d.g,d.g=a)}go=!1};function Si(){this.s=this.s,this.C=this.C}Si.prototype.s=!1,Si.prototype.ma=function(){this.s||(this.s=!0,this.N())},Si.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Dt(a,d){this.type=a,this.g=this.target=d,this.defaultPrevented=!1}Dt.prototype.h=function(){this.defaultPrevented=!0};var EA=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var a=!1,d=Object.defineProperty({},"passive",{get:function(){a=!0}});try{let f=()=>{};c.addEventListener("test",f,d),c.removeEventListener("test",f,d)}catch{}return a}();function _o(a,d){if(Dt.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var f=this.type=a.type,m=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=d,d=a.relatedTarget){if(Ne){e:{try{Z(d.nodeName);var P=!0;break e}catch{}P=!1}P||(d=null)}}else f=="mouseover"?d=a.fromElement:f=="mouseout"&&(d=a.toElement);this.relatedTarget=d,m?(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:CA[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&_o.aa.h.call(this)}}O(_o,Dt);var CA={2:"touch",3:"pen",4:"mouse"};_o.prototype.h=function(){_o.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var vo="closure_listenable_"+(1e6*Math.random()|0),TA=0;function SA(a,d,f,m,P){this.listener=a,this.proxy=null,this.src=d,this.type=f,this.capture=!!m,this.ha=P,this.key=++TA,this.da=this.fa=!1}function xc(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function Mc(a){this.src=a,this.g={},this.h=0}Mc.prototype.add=function(a,d,f,m,P){var x=a.toString();a=this.g[x],a||(a=this.g[x]=[],this.h++);var q=Zd(a,d,m,P);return-1<q?(d=a[q],f||(d.fa=!1)):(d=new SA(d,this.src,x,!!m,P),d.fa=f,a.push(d)),d};function Jd(a,d){var f=d.type;if(f in a.g){var m=a.g[f],P=Array.prototype.indexOf.call(m,d,void 0),x;(x=0<=P)&&Array.prototype.splice.call(m,P,1),x&&(xc(d),a.g[f].length==0&&(delete a.g[f],a.h--))}}function Zd(a,d,f,m){for(var P=0;P<a.length;++P){var x=a[P];if(!x.da&&x.listener==d&&x.capture==!!f&&x.ha==m)return P}return-1}var eh="closure_lm_"+(1e6*Math.random()|0),th={};function Kv(a,d,f,m,P){if(m&&m.once)return Qv(a,d,f,m,P);if(Array.isArray(d)){for(var x=0;x<d.length;x++)Kv(a,d[x],f,m,P);return null}return f=sh(f),a&&a[vo]?a.K(d,f,u(m)?!!m.capture:!!m,P):Yv(a,d,f,!1,m,P)}function Yv(a,d,f,m,P,x){if(!d)throw Error("Invalid event type");var q=u(P)?!!P.capture:!!P,Fe=ih(a);if(Fe||(a[eh]=Fe=new Mc(a)),f=Fe.add(d,f,m,q,x),f.proxy)return f;if(m=AA(),f.proxy=m,m.src=a,m.listener=f,a.addEventListener)EA||(P=q),P===void 0&&(P=!1),a.addEventListener(d.toString(),m,P);else if(a.attachEvent)a.attachEvent(Jv(d.toString()),m);else if(a.addListener&&a.removeListener)a.addListener(m);else throw Error("addEventListener and attachEvent are unavailable.");return f}function AA(){function a(f){return d.call(a.src,a.listener,f)}let d=PA;return a}function Qv(a,d,f,m,P){if(Array.isArray(d)){for(var x=0;x<d.length;x++)Qv(a,d[x],f,m,P);return null}return f=sh(f),a&&a[vo]?a.L(d,f,u(m)?!!m.capture:!!m,P):Yv(a,d,f,!0,m,P)}function Xv(a,d,f,m,P){if(Array.isArray(d))for(var x=0;x<d.length;x++)Xv(a,d[x],f,m,P);else m=u(m)?!!m.capture:!!m,f=sh(f),a&&a[vo]?(a=a.i,d=String(d).toString(),d in a.g&&(x=a.g[d],f=Zd(x,f,m,P),-1<f&&(xc(x[f]),Array.prototype.splice.call(x,f,1),x.length==0&&(delete a.g[d],a.h--)))):a&&(a=ih(a))&&(d=a.g[d.toString()],a=-1,d&&(a=Zd(d,f,m,P)),(f=-1<a?d[a]:null)&&nh(f))}function nh(a){if(typeof a!="number"&&a&&!a.da){var d=a.src;if(d&&d[vo])Jd(d.i,a);else{var f=a.type,m=a.proxy;d.removeEventListener?d.removeEventListener(f,m,a.capture):d.detachEvent?d.detachEvent(Jv(f),m):d.addListener&&d.removeListener&&d.removeListener(m),(f=ih(d))?(Jd(f,a),f.h==0&&(f.src=null,d[eh]=null)):xc(a)}}}function Jv(a){return a in th?th[a]:th[a]="on"+a}function PA(a,d){if(a.da)a=!0;else{d=new _o(d,this);var f=a.listener,m=a.ha||a.src;a.fa&&nh(a),a=f.call(m,d)}return a}function ih(a){return a=a[eh],a instanceof Mc?a:null}var rh="__closure_events_fn_"+(1e9*Math.random()>>>0);function sh(a){return typeof a=="function"?a:(a[rh]||(a[rh]=function(d){return a.handleEvent(d)}),a[rh])}function Ot(){Si.call(this),this.i=new Mc(this),this.M=this,this.F=null}O(Ot,Si),Ot.prototype[vo]=!0,Ot.prototype.removeEventListener=function(a,d,f,m){Xv(this,a,d,f,m)};function jt(a,d){var f,m=a.F;if(m)for(f=[];m;m=m.F)f.push(m);if(a=a.M,m=d.type||d,typeof d=="string")d=new Dt(d,a);else if(d instanceof Dt)d.target=d.target||a;else{var P=d;d=new Dt(m,a),S(d,P)}if(P=!0,f)for(var x=f.length-1;0<=x;x--){var q=d.g=f[x];P=Nc(q,m,!0,d)&&P}if(q=d.g=a,P=Nc(q,m,!0,d)&&P,P=Nc(q,m,!1,d)&&P,f)for(x=0;x<f.length;x++)q=d.g=f[x],P=Nc(q,m,!1,d)&&P}Ot.prototype.N=function(){if(Ot.aa.N.call(this),this.i){var a=this.i,d;for(d in a.g){for(var f=a.g[d],m=0;m<f.length;m++)xc(f[m]);delete a.g[d],a.h--}}this.F=null},Ot.prototype.K=function(a,d,f,m){return this.i.add(String(a),d,!1,f,m)},Ot.prototype.L=function(a,d,f,m){return this.i.add(String(a),d,!0,f,m)};function Nc(a,d,f,m){if(d=a.i.g[String(d)],!d)return!0;d=d.concat();for(var P=!0,x=0;x<d.length;++x){var q=d[x];if(q&&!q.da&&q.capture==f){var Fe=q.listener,It=q.ha||q.src;q.fa&&Jd(a.i,q),P=Fe.call(It,m)!==!1&&P}}return P&&!m.defaultPrevented}function Zv(a,d,f){if(typeof a=="function")f&&(a=_(a,f));else if(a&&typeof a.handleEvent=="function")a=_(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:c.setTimeout(a,d||0)}function ey(a){a.g=Zv(()=>{a.g=null,a.i&&(a.i=!1,ey(a))},a.l);let d=a.h;a.h=null,a.m.apply(null,d)}class RA extends Si{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:ey(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function yo(a){Si.call(this),this.h=a,this.g={}}O(yo,Si);var ty=[];function ny(a){le(a.g,function(d,f){this.g.hasOwnProperty(f)&&nh(d)},a),a.g={}}yo.prototype.N=function(){yo.aa.N.call(this),ny(this)},yo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var oh=c.JSON.stringify,DA=c.JSON.parse,OA=class{stringify(a){return c.JSON.stringify(a,void 0)}parse(a){return c.JSON.parse(a,void 0)}};function ah(){}ah.prototype.h=null;function iy(a){return a.h||(a.h=a.i())}function ry(){}var bo={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ch(){Dt.call(this,"d")}O(ch,Dt);function lh(){Dt.call(this,"c")}O(lh,Dt);var rr={},sy=null;function Fc(){return sy=sy||new Ot}rr.La="serverreachability";function oy(a){Dt.call(this,rr.La,a)}O(oy,Dt);function wo(a){let d=Fc();jt(d,new oy(d))}rr.STAT_EVENT="statevent";function ay(a,d){Dt.call(this,rr.STAT_EVENT,a),this.stat=d}O(ay,Dt);function Bt(a){let d=Fc();jt(d,new ay(d,a))}rr.Ma="timingevent";function cy(a,d){Dt.call(this,rr.Ma,a),this.size=d}O(cy,Dt);function Io(a,d){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){a()},d)}function Eo(){this.g=!0}Eo.prototype.xa=function(){this.g=!1};function kA(a,d,f,m,P,x){a.info(function(){if(a.g)if(x)for(var q="",Fe=x.split("&"),It=0;It<Fe.length;It++){var Te=Fe[It].split("=");if(1<Te.length){var kt=Te[0];Te=Te[1];var xt=kt.split("_");q=2<=xt.length&&xt[1]=="type"?q+(kt+"="+Te+"&"):q+(kt+"=redacted&")}}else q=null;else q=x;return"XMLHTTP REQ ("+m+") [attempt "+P+"]: "+d+`
`+f+`
`+q})}function xA(a,d,f,m,P,x,q){a.info(function(){return"XMLHTTP RESP ("+m+") [ attempt "+P+"]: "+d+`
`+f+`
`+x+" "+q})}function Zr(a,d,f,m){a.info(function(){return"XMLHTTP TEXT ("+d+"): "+NA(a,f)+(m?" "+m:"")})}function MA(a,d){a.info(function(){return"TIMEOUT: "+d})}Eo.prototype.info=function(){};function NA(a,d){if(!a.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(a=0;a<f.length;a++)if(Array.isArray(f[a])){var m=f[a];if(!(2>m.length)){var P=m[1];if(Array.isArray(P)&&!(1>P.length)){var x=P[0];if(x!="noop"&&x!="stop"&&x!="close")for(var q=1;q<P.length;q++)P[q]=""}}}}return oh(f)}catch{return d}}var Vc={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ly={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},uh;function Lc(){}O(Lc,ah),Lc.prototype.g=function(){return new XMLHttpRequest},Lc.prototype.i=function(){return{}},uh=new Lc;function Ai(a,d,f,m){this.j=a,this.i=d,this.l=f,this.R=m||1,this.U=new yo(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new uy}function uy(){this.i=null,this.g="",this.h=!1}var dy={},dh={};function hh(a,d,f){a.L=1,a.v=zc(ri(d)),a.m=f,a.P=!0,hy(a,null)}function hy(a,d){a.F=Date.now(),Uc(a),a.A=ri(a.v);var f=a.A,m=a.R;Array.isArray(m)||(m=[String(m)]),Sy(f.i,"t",m),a.C=0,f=a.j.J,a.h=new uy,a.g=qy(a.j,f?d:null,!a.m),0<a.O&&(a.M=new RA(_(a.Y,a,a.g),a.O)),d=a.U,f=a.g,m=a.ca;var P="readystatechange";Array.isArray(P)||(P&&(ty[0]=P.toString()),P=ty);for(var x=0;x<P.length;x++){var q=Kv(f,P[x],m||d.handleEvent,!1,d.h||d);if(!q)break;d.g[q.key]=q}d=a.H?b(a.H):{},a.m?(a.u||(a.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,d)):(a.u="GET",a.g.ea(a.A,a.u,null,d)),wo(),kA(a.i,a.u,a.A,a.l,a.R,a.m)}Ai.prototype.ca=function(a){a=a.target;let d=this.M;d&&si(a)==3?d.j():this.Y(a)},Ai.prototype.Y=function(a){try{if(a==this.g)e:{let xt=si(this.g);var d=this.g.Ba();let ns=this.g.Z();if(!(3>xt)&&(xt!=3||this.g&&(this.h.h||this.g.oa()||xy(this.g)))){this.J||xt!=4||d==7||(d==8||0>=ns?wo(3):wo(2)),fh(this);var f=this.g.Z();this.X=f;t:if(fy(this)){var m=xy(this.g);a="";var P=m.length,x=si(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){sr(this),Co(this);var q="";break t}this.h.i=new c.TextDecoder}for(d=0;d<P;d++)this.h.h=!0,a+=this.h.i.decode(m[d],{stream:!(x&&d==P-1)});m.length=0,this.h.g+=a,this.C=0,q=this.h.g}else q=this.g.oa();if(this.o=f==200,xA(this.i,this.u,this.A,this.l,this.R,xt,f),this.o){if(this.T&&!this.K){t:{if(this.g){var Fe,It=this.g;if((Fe=It.g?It.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!X(Fe)){var Te=Fe;break t}}Te=null}if(f=Te)Zr(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ph(this,f);else{this.o=!1,this.s=3,Bt(12),sr(this),Co(this);break e}}if(this.P){f=!0;let vn;for(;!this.J&&this.C<q.length;)if(vn=FA(this,q),vn==dh){xt==4&&(this.s=4,Bt(14),f=!1),Zr(this.i,this.l,null,"[Incomplete Response]");break}else if(vn==dy){this.s=4,Bt(15),Zr(this.i,this.l,q,"[Invalid Chunk]"),f=!1;break}else Zr(this.i,this.l,vn,null),ph(this,vn);if(fy(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),xt!=4||q.length!=0||this.h.h||(this.s=1,Bt(16),f=!1),this.o=this.o&&f,!f)Zr(this.i,this.l,q,"[Invalid Chunked Response]"),sr(this),Co(this);else if(0<q.length&&!this.W){this.W=!0;var kt=this.j;kt.g==this&&kt.ba&&!kt.M&&(kt.j.info("Great, no buffering proxy detected. Bytes received: "+q.length),bh(kt),kt.M=!0,Bt(11))}}else Zr(this.i,this.l,q,null),ph(this,q);xt==4&&sr(this),this.o&&!this.J&&(xt==4?jy(this.j,this):(this.o=!1,Uc(this)))}else ZA(this.g),f==400&&0<q.indexOf("Unknown SID")?(this.s=3,Bt(12)):(this.s=0,Bt(13)),sr(this),Co(this)}}}catch{}finally{}};function fy(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function FA(a,d){var f=a.C,m=d.indexOf(`
`,f);return m==-1?dh:(f=Number(d.substring(f,m)),isNaN(f)?dy:(m+=1,m+f>d.length?dh:(d=d.slice(m,m+f),a.C=m+f,d)))}Ai.prototype.cancel=function(){this.J=!0,sr(this)};function Uc(a){a.S=Date.now()+a.I,py(a,a.I)}function py(a,d){if(a.B!=null)throw Error("WatchDog timer not null");a.B=Io(_(a.ba,a),d)}function fh(a){a.B&&(c.clearTimeout(a.B),a.B=null)}Ai.prototype.ba=function(){this.B=null;let a=Date.now();0<=a-this.S?(MA(this.i,this.A),this.L!=2&&(wo(),Bt(17)),sr(this),this.s=2,Co(this)):py(this,this.S-a)};function Co(a){a.j.G==0||a.J||jy(a.j,a)}function sr(a){fh(a);var d=a.M;d&&typeof d.ma=="function"&&d.ma(),a.M=null,ny(a.U),a.g&&(d=a.g,a.g=null,d.abort(),d.ma())}function ph(a,d){try{var f=a.j;if(f.G!=0&&(f.g==a||mh(f.h,a))){if(!a.K&&mh(f.h,a)&&f.G==3){try{var m=f.Da.g.parse(d)}catch{m=null}if(Array.isArray(m)&&m.length==3){var P=m;if(P[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<a.F)Hc(f),Gc(f);else break e;yh(f),Bt(18)}}else f.za=P[1],0<f.za-f.T&&37500>P[2]&&f.F&&f.v==0&&!f.C&&(f.C=Io(_(f.Za,f),6e3));if(1>=_y(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else ar(f,11)}else if((a.K||f.g==a)&&Hc(f),!X(d))for(P=f.Da.g.parse(d),d=0;d<P.length;d++){let Te=P[d];if(f.T=Te[0],Te=Te[1],f.G==2)if(Te[0]=="c"){f.K=Te[1],f.ia=Te[2];let kt=Te[3];kt!=null&&(f.la=kt,f.j.info("VER="+f.la));let xt=Te[4];xt!=null&&(f.Aa=xt,f.j.info("SVER="+f.Aa));let ns=Te[5];ns!=null&&typeof ns=="number"&&0<ns&&(m=1.5*ns,f.L=m,f.j.info("backChannelRequestTimeoutMs_="+m)),m=f;let vn=a.g;if(vn){let Yc=vn.g?vn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Yc){var x=m.h;x.g||Yc.indexOf("spdy")==-1&&Yc.indexOf("quic")==-1&&Yc.indexOf("h2")==-1||(x.j=x.l,x.g=new Set,x.h&&(gh(x,x.h),x.h=null))}if(m.D){let wh=vn.g?vn.g.getResponseHeader("X-HTTP-Session-Id"):null;wh&&(m.ya=wh,$e(m.I,m.D,wh))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-a.F,f.j.info("Handshake RTT: "+f.R+"ms")),m=f;var q=a;if(m.qa=$y(m,m.J?m.ia:null,m.W),q.K){vy(m.h,q);var Fe=q,It=m.L;It&&(Fe.I=It),Fe.B&&(fh(Fe),Uc(Fe)),m.g=q}else Ly(m);0<f.i.length&&Wc(f)}else Te[0]!="stop"&&Te[0]!="close"||ar(f,7);else f.G==3&&(Te[0]=="stop"||Te[0]=="close"?Te[0]=="stop"?ar(f,7):vh(f):Te[0]!="noop"&&f.l&&f.l.ta(Te),f.v=0)}}wo(4)}catch{}}var VA=class{constructor(a,d){this.g=a,this.map=d}};function my(a){this.l=a||10,c.PerformanceNavigationTiming?(a=c.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function gy(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function _y(a){return a.h?1:a.g?a.g.size:0}function mh(a,d){return a.h?a.h==d:a.g?a.g.has(d):!1}function gh(a,d){a.g?a.g.add(d):a.h=d}function vy(a,d){a.h&&a.h==d?a.h=null:a.g&&a.g.has(d)&&a.g.delete(d)}my.prototype.cancel=function(){if(this.i=yy(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let a of this.g.values())a.cancel();this.g.clear()}};function yy(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let d=a.i;for(let f of a.g.values())d=d.concat(f.D);return d}return F(a.i)}function LA(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(l(a)){for(var d=[],f=a.length,m=0;m<f;m++)d.push(a[m]);return d}d=[],f=0;for(m in a)d[f++]=a[m];return d}function UA(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(l(a)||typeof a=="string"){var d=[];a=a.length;for(var f=0;f<a;f++)d.push(f);return d}d=[],f=0;for(let m in a)d[f++]=m;return d}}}function by(a,d){if(a.forEach&&typeof a.forEach=="function")a.forEach(d,void 0);else if(l(a)||typeof a=="string")Array.prototype.forEach.call(a,d,void 0);else for(var f=UA(a),m=LA(a),P=m.length,x=0;x<P;x++)d.call(void 0,m[x],f&&f[x],a)}var wy=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function jA(a,d){if(a){a=a.split("&");for(var f=0;f<a.length;f++){var m=a[f].indexOf("="),P=null;if(0<=m){var x=a[f].substring(0,m);P=a[f].substring(m+1)}else x=a[f];d(x,P?decodeURIComponent(P.replace(/\+/g," ")):"")}}}function or(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof or){this.h=a.h,jc(this,a.j),this.o=a.o,this.g=a.g,Bc(this,a.s),this.l=a.l;var d=a.i,f=new Ao;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),Iy(this,f),this.m=a.m}else a&&(d=String(a).match(wy))?(this.h=!1,jc(this,d[1]||"",!0),this.o=To(d[2]||""),this.g=To(d[3]||"",!0),Bc(this,d[4]),this.l=To(d[5]||"",!0),Iy(this,d[6]||"",!0),this.m=To(d[7]||"")):(this.h=!1,this.i=new Ao(null,this.h))}or.prototype.toString=function(){var a=[],d=this.j;d&&a.push(So(d,Ey,!0),":");var f=this.g;return(f||d=="file")&&(a.push("//"),(d=this.o)&&a.push(So(d,Ey,!0),"@"),a.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&a.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&a.push("/"),a.push(So(f,f.charAt(0)=="/"?$A:zA,!0))),(f=this.i.toString())&&a.push("?",f),(f=this.m)&&a.push("#",So(f,GA)),a.join("")};function ri(a){return new or(a)}function jc(a,d,f){a.j=f?To(d,!0):d,a.j&&(a.j=a.j.replace(/:$/,""))}function Bc(a,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);a.s=d}else a.s=null}function Iy(a,d,f){d instanceof Ao?(a.i=d,WA(a.i,a.h)):(f||(d=So(d,qA)),a.i=new Ao(d,a.h))}function $e(a,d,f){a.i.set(d,f)}function zc(a){return $e(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function To(a,d){return a?d?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function So(a,d,f){return typeof a=="string"?(a=encodeURI(a).replace(d,BA),f&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function BA(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var Ey=/[#\/\?@]/g,zA=/[#\?:]/g,$A=/[#\?]/g,qA=/[#\?@]/g,GA=/#/g;function Ao(a,d){this.h=this.g=null,this.i=a||null,this.j=!!d}function Pi(a){a.g||(a.g=new Map,a.h=0,a.i&&jA(a.i,function(d,f){a.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}t=Ao.prototype,t.add=function(a,d){Pi(this),this.i=null,a=es(this,a);var f=this.g.get(a);return f||this.g.set(a,f=[]),f.push(d),this.h+=1,this};function Cy(a,d){Pi(a),d=es(a,d),a.g.has(d)&&(a.i=null,a.h-=a.g.get(d).length,a.g.delete(d))}function Ty(a,d){return Pi(a),d=es(a,d),a.g.has(d)}t.forEach=function(a,d){Pi(this),this.g.forEach(function(f,m){f.forEach(function(P){a.call(d,P,m,this)},this)},this)},t.na=function(){Pi(this);let a=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let m=0;m<d.length;m++){let P=a[m];for(let x=0;x<P.length;x++)f.push(d[m])}return f},t.V=function(a){Pi(this);let d=[];if(typeof a=="string")Ty(this,a)&&(d=d.concat(this.g.get(es(this,a))));else{a=Array.from(this.g.values());for(let f=0;f<a.length;f++)d=d.concat(a[f])}return d},t.set=function(a,d){return Pi(this),this.i=null,a=es(this,a),Ty(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[d]),this.h+=1,this},t.get=function(a,d){return a?(a=this.V(a),0<a.length?String(a[0]):d):d};function Sy(a,d,f){Cy(a,d),0<f.length&&(a.i=null,a.g.set(es(a,d),F(f)),a.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";let a=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var m=d[f];let x=encodeURIComponent(String(m)),q=this.V(m);for(m=0;m<q.length;m++){var P=x;q[m]!==""&&(P+="="+encodeURIComponent(String(q[m]))),a.push(P)}}return this.i=a.join("&")};function es(a,d){return d=String(d),a.j&&(d=d.toLowerCase()),d}function WA(a,d){d&&!a.j&&(Pi(a),a.i=null,a.g.forEach(function(f,m){var P=m.toLowerCase();m!=P&&(Cy(this,m),Sy(this,P,f))},a)),a.j=d}function HA(a,d){let f=new Eo;if(c.Image){let m=new Image;m.onload=C(Ri,f,"TestLoadImage: loaded",!0,d,m),m.onerror=C(Ri,f,"TestLoadImage: error",!1,d,m),m.onabort=C(Ri,f,"TestLoadImage: abort",!1,d,m),m.ontimeout=C(Ri,f,"TestLoadImage: timeout",!1,d,m),c.setTimeout(function(){m.ontimeout&&m.ontimeout()},1e4),m.src=a}else d(!1)}function KA(a,d){let f=new Eo,m=new AbortController,P=setTimeout(()=>{m.abort(),Ri(f,"TestPingServer: timeout",!1,d)},1e4);fetch(a,{signal:m.signal}).then(x=>{clearTimeout(P),x.ok?Ri(f,"TestPingServer: ok",!0,d):Ri(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(P),Ri(f,"TestPingServer: error",!1,d)})}function Ri(a,d,f,m,P){try{P&&(P.onload=null,P.onerror=null,P.onabort=null,P.ontimeout=null),m(f)}catch{}}function YA(){this.g=new OA}function QA(a,d,f){let m=f||"";try{by(a,function(P,x){let q=P;u(P)&&(q=oh(P)),d.push(m+x+"="+encodeURIComponent(q))})}catch(P){throw d.push(m+"type="+encodeURIComponent("_badmap")),P}}function Po(a){this.l=a.Ub||null,this.j=a.eb||!1}O(Po,ah),Po.prototype.g=function(){return new $c(this.l,this.j)},Po.prototype.i=function(a){return function(){return a}}({});function $c(a,d){Ot.call(this),this.D=a,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}O($c,Ot),t=$c.prototype,t.open=function(a,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=d,this.readyState=1,Do(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(d.body=a),(this.D||c).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ro(this)),this.readyState=0},t.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,Do(this)),this.g&&(this.readyState=3,Do(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ay(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function Ay(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}t.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var d=a.value?a.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!a.done}))&&(this.response=this.responseText+=d)}a.done?Ro(this):Do(this),this.readyState==3&&Ay(this)}},t.Ra=function(a){this.g&&(this.response=this.responseText=a,Ro(this))},t.Qa=function(a){this.g&&(this.response=a,Ro(this))},t.ga=function(){this.g&&Ro(this)};function Ro(a){a.readyState=4,a.l=null,a.j=null,a.v=null,Do(a)}t.setRequestHeader=function(a,d){this.u.append(a,d)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";let a=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,a.push(f[0]+": "+f[1]),f=d.next();return a.join(`\r
`)};function Do(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty($c.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function Py(a){let d="";return le(a,function(f,m){d+=m,d+=":",d+=f,d+=`\r
`}),d}function _h(a,d,f){e:{for(m in f){var m=!1;break e}m=!0}m||(f=Py(f),typeof a=="string"?f!=null&&encodeURIComponent(String(f)):$e(a,d,f))}function Xe(a){Ot.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}O(Xe,Ot);var XA=/^https?$/i,JA=["POST","PUT"];t=Xe.prototype,t.Ha=function(a){this.J=a},t.ea=function(a,d,f,m){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);d=d?d.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():uh.g(),this.v=this.o?iy(this.o):iy(uh),this.g.onreadystatechange=_(this.Ea,this);try{this.B=!0,this.g.open(d,String(a),!0),this.B=!1}catch(x){Ry(this,x);return}if(a=f||"",f=new Map(this.headers),m)if(Object.getPrototypeOf(m)===Object.prototype)for(var P in m)f.set(P,m[P]);else if(typeof m.keys=="function"&&typeof m.get=="function")for(let x of m.keys())f.set(x,m.get(x));else throw Error("Unknown input type for opt_headers: "+String(m));m=Array.from(f.keys()).find(x=>x.toLowerCase()=="content-type"),P=c.FormData&&a instanceof c.FormData,!(0<=Array.prototype.indexOf.call(JA,d,void 0))||m||P||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[x,q]of f)this.g.setRequestHeader(x,q);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ky(this),this.u=!0,this.g.send(a),this.u=!1}catch(x){Ry(this,x)}};function Ry(a,d){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=d,a.m=5,Dy(a),qc(a)}function Dy(a){a.A||(a.A=!0,jt(a,"complete"),jt(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,jt(this,"complete"),jt(this,"abort"),qc(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),qc(this,!0)),Xe.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Oy(this):this.bb())},t.bb=function(){Oy(this)};function Oy(a){if(a.h&&typeof o<"u"&&(!a.v[1]||si(a)!=4||a.Z()!=2)){if(a.u&&si(a)==4)Zv(a.Ea,0,a);else if(jt(a,"readystatechange"),si(a)==4){a.h=!1;try{let q=a.Z();e:switch(q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var m;if(m=q===0){var P=String(a.D).match(wy)[1]||null;!P&&c.self&&c.self.location&&(P=c.self.location.protocol.slice(0,-1)),m=!XA.test(P?P.toLowerCase():"")}f=m}if(f)jt(a,"complete"),jt(a,"success");else{a.m=6;try{var x=2<si(a)?a.g.statusText:""}catch{x=""}a.l=x+" ["+a.Z()+"]",Dy(a)}}finally{qc(a)}}}}function qc(a,d){if(a.g){ky(a);let f=a.g,m=a.v[0]?()=>{}:null;a.g=null,a.v=null,d||jt(a,"ready");try{f.onreadystatechange=m}catch{}}}function ky(a){a.I&&(c.clearTimeout(a.I),a.I=null)}t.isActive=function(){return!!this.g};function si(a){return a.g?a.g.readyState:0}t.Z=function(){try{return 2<si(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(a){if(this.g){var d=this.g.responseText;return a&&d.indexOf(a)==0&&(d=d.substring(a.length)),DA(d)}};function xy(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function ZA(a){let d={};a=(a.g&&2<=si(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let m=0;m<a.length;m++){if(X(a[m]))continue;var f=A(a[m]);let P=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let x=d[P]||[];d[P]=x,x.push(f)}T(d,function(m){return m.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Oo(a,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[a]||d}function My(a){this.Aa=0,this.i=[],this.j=new Eo,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Oo("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Oo("baseRetryDelayMs",5e3,a),this.cb=Oo("retryDelaySeedMs",1e4,a),this.Wa=Oo("forwardChannelMaxRetries",2,a),this.wa=Oo("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new my(a&&a.concurrentRequestLimit),this.Da=new YA,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=My.prototype,t.la=8,t.G=1,t.connect=function(a,d,f,m){Bt(0),this.W=a,this.H=d||{},f&&m!==void 0&&(this.H.OSID=f,this.H.OAID=m),this.F=this.X,this.I=$y(this,null,this.W),Wc(this)};function vh(a){if(Ny(a),a.G==3){var d=a.U++,f=ri(a.I);if($e(f,"SID",a.K),$e(f,"RID",d),$e(f,"TYPE","terminate"),ko(a,f),d=new Ai(a,a.j,d),d.L=2,d.v=zc(ri(f)),f=!1,c.navigator&&c.navigator.sendBeacon)try{f=c.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&c.Image&&(new Image().src=d.v,f=!0),f||(d.g=qy(d.j,null),d.g.ea(d.v)),d.F=Date.now(),Uc(d)}zy(a)}function Gc(a){a.g&&(bh(a),a.g.cancel(),a.g=null)}function Ny(a){Gc(a),a.u&&(c.clearTimeout(a.u),a.u=null),Hc(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&c.clearTimeout(a.s),a.s=null)}function Wc(a){if(!gy(a.h)&&!a.s){a.s=!0;var d=a.Ga;mo||Hv(),go||(mo(),go=!0),Xd.add(d,a),a.B=0}}function eP(a,d){return _y(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=d.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=Io(_(a.Ga,a,d),By(a,a.B)),a.B++,!0)}t.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;let P=new Ai(this,this.j,a),x=this.o;if(this.S&&(x?(x=b(x),S(x,this.S)):x=this.S),this.m!==null||this.O||(P.H=x,x=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var m=this.i[f];if("__data__"in m.map&&(m=m.map.__data__,typeof m=="string")){m=m.length;break t}m=void 0}if(m===void 0)break;if(d+=m,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=Vy(this,P,d),f=ri(this.I),$e(f,"RID",a),$e(f,"CVER",22),this.D&&$e(f,"X-HTTP-Session-Id",this.D),ko(this,f),x&&(this.O?d="headers="+encodeURIComponent(String(Py(x)))+"&"+d:this.m&&_h(f,this.m,x)),gh(this.h,P),this.Ua&&$e(f,"TYPE","init"),this.P?($e(f,"$req",d),$e(f,"SID","null"),P.T=!0,hh(P,f,null)):hh(P,f,d),this.G=2}}else this.G==3&&(a?Fy(this,a):this.i.length==0||gy(this.h)||Fy(this))};function Fy(a,d){var f;d?f=d.l:f=a.U++;let m=ri(a.I);$e(m,"SID",a.K),$e(m,"RID",f),$e(m,"AID",a.T),ko(a,m),a.m&&a.o&&_h(m,a.m,a.o),f=new Ai(a,a.j,f,a.B+1),a.m===null&&(f.H=a.o),d&&(a.i=d.D.concat(a.i)),d=Vy(a,f,1e3),f.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),gh(a.h,f),hh(f,m,d)}function ko(a,d){a.H&&le(a.H,function(f,m){$e(d,m,f)}),a.l&&by({},function(f,m){$e(d,m,f)})}function Vy(a,d,f){f=Math.min(a.i.length,f);var m=a.l?_(a.l.Na,a.l,a):null;e:{var P=a.i;let x=-1;for(;;){let q=["count="+f];x==-1?0<f?(x=P[0].g,q.push("ofs="+x)):x=0:q.push("ofs="+x);let Fe=!0;for(let It=0;It<f;It++){let Te=P[It].g,kt=P[It].map;if(Te-=x,0>Te)x=Math.max(0,P[It].g-100),Fe=!1;else try{QA(kt,q,"req"+Te+"_")}catch{m&&m(kt)}}if(Fe){m=q.join("&");break e}}}return a=a.i.splice(0,f),d.D=a,m}function Ly(a){if(!a.g&&!a.u){a.Y=1;var d=a.Fa;mo||Hv(),go||(mo(),go=!0),Xd.add(d,a),a.v=0}}function yh(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=Io(_(a.Fa,a),By(a,a.v)),a.v++,!0)}t.Fa=function(){if(this.u=null,Uy(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=Io(_(this.ab,this),a)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Bt(10),Gc(this),Uy(this))};function bh(a){a.A!=null&&(c.clearTimeout(a.A),a.A=null)}function Uy(a){a.g=new Ai(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var d=ri(a.qa);$e(d,"RID","rpc"),$e(d,"SID",a.K),$e(d,"AID",a.T),$e(d,"CI",a.F?"0":"1"),!a.F&&a.ja&&$e(d,"TO",a.ja),$e(d,"TYPE","xmlhttp"),ko(a,d),a.m&&a.o&&_h(d,a.m,a.o),a.L&&(a.g.I=a.L);var f=a.g;a=a.ia,f.L=1,f.v=zc(ri(d)),f.m=null,f.P=!0,hy(f,a)}t.Za=function(){this.C!=null&&(this.C=null,Gc(this),yh(this),Bt(19))};function Hc(a){a.C!=null&&(c.clearTimeout(a.C),a.C=null)}function jy(a,d){var f=null;if(a.g==d){Hc(a),bh(a),a.g=null;var m=2}else if(mh(a.h,d))f=d.D,vy(a.h,d),m=1;else return;if(a.G!=0){if(d.o)if(m==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var P=a.B;m=Fc(),jt(m,new cy(m,f)),Wc(a)}else Ly(a);else if(P=d.s,P==3||P==0&&0<d.X||!(m==1&&eP(a,d)||m==2&&yh(a)))switch(f&&0<f.length&&(d=a.h,d.i=d.i.concat(f)),P){case 1:ar(a,5);break;case 4:ar(a,10);break;case 3:ar(a,6);break;default:ar(a,2)}}}function By(a,d){let f=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(f*=2),f*d}function ar(a,d){if(a.j.info("Error code "+d),d==2){var f=_(a.fb,a),m=a.Xa;let P=!m;m=new or(m||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||jc(m,"https"),zc(m),P?HA(m.toString(),f):KA(m.toString(),f)}else Bt(2);a.G=0,a.l&&a.l.sa(d),zy(a),Ny(a)}t.fb=function(a){a?(this.j.info("Successfully pinged google.com"),Bt(2)):(this.j.info("Failed to ping google.com"),Bt(1))};function zy(a){if(a.G=0,a.ka=[],a.l){let d=yy(a.h);(d.length!=0||a.i.length!=0)&&(D(a.ka,d),D(a.ka,a.i),a.h.i.length=0,F(a.i),a.i.length=0),a.l.ra()}}function $y(a,d,f){var m=f instanceof or?ri(f):new or(f);if(m.g!="")d&&(m.g=d+"."+m.g),Bc(m,m.s);else{var P=c.location;m=P.protocol,d=d?d+"."+P.hostname:P.hostname,P=+P.port;var x=new or(null);m&&jc(x,m),d&&(x.g=d),P&&Bc(x,P),f&&(x.l=f),m=x}return f=a.D,d=a.ya,f&&d&&$e(m,f,d),$e(m,"VER",a.la),ko(a,m),m}function qy(a,d,f){if(d&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=a.Ca&&!a.pa?new Xe(new Po({eb:f})):new Xe(a.pa),d.Ha(a.J),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Gy(){}t=Gy.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Kc(){}Kc.prototype.g=function(a,d){return new Yt(a,d)};function Yt(a,d){Ot.call(this),this.g=new My(d),this.l=a,this.h=d&&d.messageUrlParams||null,a=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(a?a["X-WebChannel-Content-Type"]=d.messageContentType:a={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(a?a["X-WebChannel-Client-Profile"]=d.va:a={"X-WebChannel-Client-Profile":d.va}),this.g.S=a,(a=d&&d.Sb)&&!X(a)&&(this.g.m=a),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!X(d)&&(this.g.D=d,a=this.h,a!==null&&d in a&&(a=this.h,d in a&&delete a[d])),this.j=new ts(this)}O(Yt,Ot),Yt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Yt.prototype.close=function(){vh(this.g)},Yt.prototype.o=function(a){var d=this.g;if(typeof a=="string"){var f={};f.__data__=a,a=f}else this.u&&(f={},f.__data__=oh(a),a=f);d.i.push(new VA(d.Ya++,a)),d.G==3&&Wc(d)},Yt.prototype.N=function(){this.g.l=null,delete this.j,vh(this.g),delete this.g,Yt.aa.N.call(this)};function Wy(a){ch.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var d=a.__sm__;if(d){e:{for(let f in d){a=f;break e}a=void 0}(this.i=a)&&(a=this.i,d=d!==null&&a in d?d[a]:void 0),this.data=d}else this.data=a}O(Wy,ch);function Hy(){lh.call(this),this.status=1}O(Hy,lh);function ts(a){this.g=a}O(ts,Gy),ts.prototype.ua=function(){jt(this.g,"a")},ts.prototype.ta=function(a){jt(this.g,new Wy(a))},ts.prototype.sa=function(a){jt(this.g,new Hy)},ts.prototype.ra=function(){jt(this.g,"b")},Kc.prototype.createWebChannel=Kc.prototype.g,Yt.prototype.send=Yt.prototype.o,Yt.prototype.open=Yt.prototype.m,Yt.prototype.close=Yt.prototype.close,Tm=_i.createWebChannelTransport=function(){return new Kc},Cm=_i.getStatEventTarget=function(){return Fc()},Em=_i.Event=rr,Ru=_i.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Vc.NO_ERROR=0,Vc.TIMEOUT=8,Vc.HTTP_ERROR=6,ja=_i.ErrorCode=Vc,ly.COMPLETE="complete",Im=_i.EventType=ly,ry.EventType=bo,bo.OPEN="a",bo.CLOSE="b",bo.ERROR="c",bo.MESSAGE="d",Ot.prototype.listen=Ot.prototype.K,ks=_i.WebChannel=ry,wm=_i.FetchXmlHttpFactory=Po,Xe.prototype.listenOnce=Xe.prototype.L,Xe.prototype.getLastError=Xe.prototype.Ka,Xe.prototype.getLastErrorCode=Xe.prototype.Ba,Xe.prototype.getStatus=Xe.prototype.Z,Xe.prototype.getResponseJson=Xe.prototype.Oa,Xe.prototype.getResponseText=Xe.prototype.oa,Xe.prototype.send=Xe.prototype.ea,Xe.prototype.setWithCredentials=Xe.prototype.Ha,bm=_i.XhrIo=Xe}).apply(typeof Pu<"u"?Pu:typeof self<"u"?self:typeof window<"u"?window:{});var FI="@firebase/firestore";var bt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};bt.UNAUTHENTICATED=new bt(null),bt.GOOGLE_CREDENTIALS=new bt("google-credentials-uid"),bt.FIRST_PARTY=new bt("first-party-uid"),bt.MOCK_USER=new bt("mock-user");var Js="10.12.3";var xr=new zi("@firebase/firestore");function Ba(){return xr.logLevel}function J(t,...e){if(xr.logLevel<=Ie.DEBUG){let n=e.map(c_);xr.debug(`Firestore (${Js}): ${t}`,...n)}}function yi(t,...e){if(xr.logLevel<=Ie.ERROR){let n=e.map(c_);xr.error(`Firestore (${Js}): ${t}`,...n)}}function Us(t,...e){if(xr.logLevel<=Ie.WARN){let n=e.map(c_);xr.warn(`Firestore (${Js}): ${t}`,...n)}}function c_(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function ae(t="Unexpected state"){let e=`FIRESTORE (${Js}) INTERNAL ASSERTION FAILED: `+t;throw yi(e),new Error(e)}function Be(t,e){t||ae()}function de(t,e){return t}var V={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},K=class extends vt{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var An=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var Mu=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Dm=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(bt.UNAUTHENTICATED))}shutdown(){}},Om=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},km=class{constructor(e){this.t=e,this.currentUser=bt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let i=this.i,r=l=>this.i!==i?(i=this.i,n(l)):Promise.resolve(),s=new An;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new An,e.enqueueRetryable(()=>r(this.currentUser))};let o=()=>{let l=s;e.enqueueRetryable(()=>g(this,null,function*(){yield l.promise,yield r(this.currentUser)}))},c=l=>{J("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>c(l)),setTimeout(()=>{if(!this.auth){let l=this.t.getImmediate({optional:!0});l?c(l):(J("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new An)}},0),o()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(J("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Be(typeof i.accessToken=="string"),new Mu(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let e=this.auth&&this.auth.getUid();return Be(e===null||typeof e=="string"),new bt(e)}},xm=class{constructor(e,n,i){this.l=e,this.h=n,this.P=i,this.type="FirstParty",this.user=bt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},Mm=class{constructor(e,n,i){this.l=e,this.h=n,this.P=i}getToken(){return Promise.resolve(new xm(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(bt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Nm=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Fm=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){let i=s=>{s.error!=null&&J("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.R;return this.R=s.token,J("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>i(s))};let r=s=>{J("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?r(s):J("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Be(typeof n.token=="string"),this.R=n.token,new Nm(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function DM(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}var Nu=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length,i="";for(;i.length<20;){let r=DM(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<n&&(i+=e.charAt(r[s]%e.length))}return i}};function Ae(t,e){return t<e?-1:t>e?1:0}function js(t,e,n){return t.length===e.length&&t.every((i,r)=>n(i,e[r]))}var Pt=class t{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new K(V.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new K(V.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new K(V.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new K(V.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*n));return new t(n,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ae(this.nanoseconds,e.nanoseconds):Ae(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var fe=class t{constructor(e){this.timestamp=e}static fromTimestamp(e){return new t(e)}static min(){return new t(new Pt(0,0))}static max(){return new t(new Pt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Fu=class t{constructor(e,n,i){n===void 0?n=0:n>e.length&&ae(),i===void 0?i=e.length-n:i>e.length-n&&ae(),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let i=Math.min(e.length,n.length);for(let r=0;r<i;r++){let s=e.get(r),o=n.get(r);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}},Ye=class t extends Fu{construct(e,n,i){return new t(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let i of e){if(i.indexOf("//")>=0)throw new K(V.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(r=>r.length>0))}return new t(n)}static emptyPath(){return new t([])}},OM=/^[_a-zA-Z][_a-zA-Z0-9]*$/,sn=class t extends Fu{construct(e,n,i){return new t(e,n,i)}static isValidIdentifier(e){return OM.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new t(["__name__"])}static fromServerFormat(e){let n=[],i="",r=0,s=()=>{if(i.length===0)throw new K(V.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""},o=!1;for(;r<e.length;){let c=e[r];if(c==="\\"){if(r+1===e.length)throw new K(V.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let l=e[r+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new K(V.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=l,r+=2}else c==="`"?(o=!o,r++):c!=="."||o?(i+=c,r++):(s(),r++)}if(s(),o)throw new K(V.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var re=class t{constructor(e){this.path=e}static fromPath(e){return new t(Ye.fromString(e))}static fromName(e){return new t(Ye.fromString(e).popFirst(5))}static empty(){return new t(Ye.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ye.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ye.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new Ye(e.slice()))}};var Vm=class{constructor(e,n,i,r){this.indexId=e,this.collectionGroup=n,this.fields=i,this.indexState=r}};Vm.UNKNOWN_ID=-1;function kM(t,e){let n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,r=fe.fromTimestamp(i===1e9?new Pt(n+1,0):new Pt(n,i));return new Mr(r,re.empty(),e)}function xM(t){return new Mr(t.readTime,t.key,-1)}var Mr=class t{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new t(fe.min(),re.empty(),-1)}static max(){return new t(fe.max(),re.empty(),-1)}};function MM(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=re.comparator(t.documentKey,e.documentKey),n!==0?n:Ae(t.largestBatchId,e.largestBatchId))}var NM="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Lm=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function cc(t){return g(this,null,function*(){if(t.code!==V.FAILED_PRECONDITION||t.message!==NM)throw t;J("LocalStore","Unexpectedly lost primary lease")})}var B=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ae(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(n,s).next(i,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,i)=>{n(e)})}static reject(e){return new t((n,i)=>{i(e)})}static waitFor(e){return new t((n,i)=>{let r=0,s=0,o=!1;e.forEach(c=>{++r,c.next(()=>{++s,o&&s===r&&n()},l=>i(l))}),o=!0,s===r&&n()})}static or(e){let n=t.resolve(!1);for(let i of e)n=n.next(r=>r?t.resolve(r):i());return n}static forEach(e,n){let i=[];return e.forEach((r,s)=>{i.push(n.call(this,r,s))}),this.waitFor(i)}static mapArray(e,n){return new t((i,r)=>{let s=e.length,o=new Array(s),c=0;for(let l=0;l<s;l++){let u=l;n(e[u]).next(h=>{o[u]=h,++c,c===s&&i(o)},h=>r(h))}})}static doWhile(e,n){return new t((i,r)=>{let s=()=>{e()===!0?n().next(()=>{s()},r):i()};s()})}};function FM(t){let e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function lc(t){return t.name==="IndexedDbTransactionError"}var pE=(()=>{class t{constructor(n,i){this.previousValue=n,i&&(i.sequenceNumberHandler=r=>this.ie(r),this.se=r=>i.writeSequenceNumber(r))}ie(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.se&&this.se(n),n}}return t.oe=-1,t})();function hd(t){return t==null}function Ha(t){return t===0&&1/t==-1/0}function VM(t){return typeof t=="number"&&Number.isInteger(t)&&!Ha(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var LM=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],zz=[...LM,"documentOverlays"],UM=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],jM=UM,$z=[...jM,"indexConfiguration","indexState","indexEntries"];function VI(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Br(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function mE(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var nt=class t{constructor(e,n){this.comparator=e,this.root=n||Hn.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Hn.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Hn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){let r=this.comparator(e,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){let e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Fs(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Fs(this.root,e,this.comparator,!1)}getReverseIterator(){return new Fs(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Fs(this.root,e,this.comparator,!0)}},Fs=class{constructor(e,n,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?i(e.key,n):1,n&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Hn=class t{constructor(e,n,i,r,s){this.key=e,this.value=n,this.color=i??t.RED,this.left=r??t.EMPTY,this.right=s??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,r,s){return new t(e??this.key,n??this.value,i??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let r=this,s=i(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,n,i),null):s===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return t.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ae();let e=this.left.check();if(e!==this.right.check())throw ae();return e+(this.isRed()?0:1)}};Hn.EMPTY=null,Hn.RED=!0,Hn.BLACK=!1;Hn.EMPTY=new class{constructor(){this.size=0}get key(){throw ae()}get value(){throw ae()}get color(){throw ae()}get left(){throw ae()}get right(){throw ae()}copy(e,n,i,r,s){return this}insert(e,n,i){return new Hn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Vt=class t{constructor(e){this.comparator=e,this.data=new nt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){let i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){let r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Vu(this.data.getIterator())}getIteratorFrom(e){return new Vu(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){let r=n.getNext().key,s=i.getNext().key;if(this.comparator(r,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},Vu=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var gn=class t{constructor(e){this.fields=e,e.sort(sn.comparator)}static empty(){return new t([])}unionWith(e){let n=new Vt(sn.comparator);for(let i of this.fields)n=n.add(i);for(let i of e)n=n.add(i);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return js(this.fields,e.fields,(n,i)=>n.isEqual(i))}};var Lu=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var qt=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Lu("Invalid base64 string: "+s):s}}(e);return new t(n)}static fromUint8Array(e){let n=function(r){let s="";for(let o=0;o<r.length;++o)s+=String.fromCharCode(r[o]);return s}(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ae(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};qt.EMPTY_BYTE_STRING=new qt("");var BM=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function bi(t){if(Be(!!t),typeof t=="string"){let e=0,n=BM.exec(t);if(Be(!!n),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}let i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:tt(t.seconds),nanos:tt(t.nanos)}}function tt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Zi(t){return typeof t=="string"?qt.fromBase64String(t):qt.fromUint8Array(t)}function l_(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function u_(t){let e=t.mapValue.fields.__previous_value__;return l_(e)?u_(e):e}function Ka(t){let e=bi(t.mapValue.fields.__local_write_time__.timestampValue);return new Pt(e.seconds,e.nanos)}var Um=class{constructor(e,n,i,r,s,o,c,l,u){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=c,this.longPollingOptions=l,this.useFetchStreams=u}},Uu=class t{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new t("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var Du={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Nr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?l_(t)?4:gE(t)?9007199254740991:10:ae()}function Qn(t,e){if(t===e)return!0;let n=Nr(t);if(n!==Nr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ka(t).isEqual(Ka(e));case 3:return function(r,s){if(typeof r.timestampValue=="string"&&typeof s.timestampValue=="string"&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;let o=bi(r.timestampValue),c=bi(s.timestampValue);return o.seconds===c.seconds&&o.nanos===c.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,s){return Zi(r.bytesValue).isEqual(Zi(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,s){return tt(r.geoPointValue.latitude)===tt(s.geoPointValue.latitude)&&tt(r.geoPointValue.longitude)===tt(s.geoPointValue.longitude)}(t,e);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return tt(r.integerValue)===tt(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){let o=tt(r.doubleValue),c=tt(s.doubleValue);return o===c?Ha(o)===Ha(c):isNaN(o)&&isNaN(c)}return!1}(t,e);case 9:return js(t.arrayValue.values||[],e.arrayValue.values||[],Qn);case 10:return function(r,s){let o=r.mapValue.fields||{},c=s.mapValue.fields||{};if(VI(o)!==VI(c))return!1;for(let l in o)if(o.hasOwnProperty(l)&&(c[l]===void 0||!Qn(o[l],c[l])))return!1;return!0}(t,e);default:return ae()}}function Ya(t,e){return(t.values||[]).find(n=>Qn(n,e))!==void 0}function Bs(t,e){if(t===e)return 0;let n=Nr(t),i=Nr(e);if(n!==i)return Ae(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ae(t.booleanValue,e.booleanValue);case 2:return function(s,o){let c=tt(s.integerValue||s.doubleValue),l=tt(o.integerValue||o.doubleValue);return c<l?-1:c>l?1:c===l?0:isNaN(c)?isNaN(l)?0:-1:1}(t,e);case 3:return LI(t.timestampValue,e.timestampValue);case 4:return LI(Ka(t),Ka(e));case 5:return Ae(t.stringValue,e.stringValue);case 6:return function(s,o){let c=Zi(s),l=Zi(o);return c.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){let c=s.split("/"),l=o.split("/");for(let u=0;u<c.length&&u<l.length;u++){let h=Ae(c[u],l[u]);if(h!==0)return h}return Ae(c.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){let c=Ae(tt(s.latitude),tt(o.latitude));return c!==0?c:Ae(tt(s.longitude),tt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(s,o){let c=s.values||[],l=o.values||[];for(let u=0;u<c.length&&u<l.length;++u){let h=Bs(c[u],l[u]);if(h)return h}return Ae(c.length,l.length)}(t.arrayValue,e.arrayValue);case 10:return function(s,o){if(s===Du.mapValue&&o===Du.mapValue)return 0;if(s===Du.mapValue)return 1;if(o===Du.mapValue)return-1;let c=s.fields||{},l=Object.keys(c),u=o.fields||{},h=Object.keys(u);l.sort(),h.sort();for(let p=0;p<l.length&&p<h.length;++p){let _=Ae(l[p],h[p]);if(_!==0)return _;let C=Bs(c[l[p]],u[h[p]]);if(C!==0)return C}return Ae(l.length,h.length)}(t.mapValue,e.mapValue);default:throw ae()}}function LI(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ae(t,e);let n=bi(t),i=bi(e),r=Ae(n.seconds,i.seconds);return r!==0?r:Ae(n.nanos,i.nanos)}function zs(t){return jm(t)}function jm(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){let i=bi(n);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Zi(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return re.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let i="[",r=!0;for(let s of n.values||[])r?r=!1:i+=",",i+=jm(s);return i+"]"}(t.arrayValue):"mapValue"in t?function(n){let i=Object.keys(n.fields||{}).sort(),r="{",s=!0;for(let o of i)s?s=!1:r+=",",r+=`${o}:${jm(n.fields[o])}`;return r+"}"}(t.mapValue):ae()}function UI(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Bm(t){return!!t&&"integerValue"in t}function d_(t){return!!t&&"arrayValue"in t}function jI(t){return!!t&&"nullValue"in t}function BI(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function ku(t){return!!t&&"mapValue"in t}function $a(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return Br(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=$a(i)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=$a(t.arrayValue.values[n]);return e}return Object.assign({},t)}function gE(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var rn=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!ku(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=$a(n)}setAll(e){let n=sn.emptyPath(),i={},r=[];e.forEach((o,c)=>{if(!n.isImmediateParentOf(c)){let l=this.getFieldsMap(n);this.applyChanges(l,i,r),i={},r=[],n=c.popLast()}o?i[c.lastSegment()]=$a(o):r.push(c.lastSegment())});let s=this.getFieldsMap(n);this.applyChanges(s,i,r)}delete(e){let n=this.field(e.popLast());ku(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Qn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=n.mapValue.fields[e.get(i)];ku(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,i){Br(n,(r,s)=>e[r]=s);for(let r of i)delete e[r]}clone(){return new t($a(this.value))}};function _E(t){let e=[];return Br(t.fields,(n,i)=>{let r=new sn([n]);if(ku(i)){let s=_E(i.mapValue).fields;if(s.length===0)e.push(r);else for(let o of s)e.push(r.child(o))}else e.push(r)}),new gn(e)}var Pn=class t{constructor(e,n,i,r,s,o,c){this.key=e,this.documentType=n,this.version=i,this.readTime=r,this.createTime=s,this.data=o,this.documentState=c}static newInvalidDocument(e){return new t(e,0,fe.min(),fe.min(),fe.min(),rn.empty(),0)}static newFoundDocument(e,n,i,r){return new t(e,1,n,fe.min(),i,r,0)}static newNoDocument(e,n){return new t(e,2,n,fe.min(),fe.min(),rn.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,fe.min(),fe.min(),rn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(fe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=rn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=rn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=fe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var $s=class{constructor(e,n){this.position=e,this.inclusive=n}};function zI(t,e,n){let i=0;for(let r=0;r<t.position.length;r++){let s=e[r],o=t.position[r];if(s.field.isKeyField()?i=re.comparator(re.fromName(o.referenceValue),n.key):i=Bs(o,n.data.field(s.field)),s.dir==="desc"&&(i*=-1),i!==0)break}return i}function $I(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Qn(t.position[n],e.position[n]))return!1;return!0}var qs=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function zM(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var ju=class{},dt=class t extends ju{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new $m(e,n,i):n==="array-contains"?new Wm(e,i):n==="in"?new Hm(e,i):n==="not-in"?new Km(e,i):n==="array-contains-any"?new Ym(e,i):new t(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new qm(e,i):new Gm(e,i)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Bs(n,this.value)):n!==null&&Nr(this.value)===Nr(n)&&this.matchesComparison(Bs(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ae()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Rn=class t extends ju{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new t(e,n)}matches(e){return vE(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function vE(t){return t.op==="and"}function yE(t){return $M(t)&&vE(t)}function $M(t){for(let e of t.filters)if(e instanceof Rn)return!1;return!0}function zm(t){if(t instanceof dt)return t.field.canonicalString()+t.op.toString()+zs(t.value);if(yE(t))return t.filters.map(e=>zm(e)).join(",");{let e=t.filters.map(n=>zm(n)).join(",");return`${t.op}(${e})`}}function bE(t,e){return t instanceof dt?function(i,r){return r instanceof dt&&i.op===r.op&&i.field.isEqual(r.field)&&Qn(i.value,r.value)}(t,e):t instanceof Rn?function(i,r){return r instanceof Rn&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((s,o,c)=>s&&bE(o,r.filters[c]),!0):!1}(t,e):void ae()}function wE(t){return t instanceof dt?function(n){return`${n.field.canonicalString()} ${n.op} ${zs(n.value)}`}(t):t instanceof Rn?function(n){return n.op.toString()+" {"+n.getFilters().map(wE).join(" ,")+"}"}(t):"Filter"}var $m=class extends dt{constructor(e,n,i){super(e,n,i),this.key=re.fromName(i.referenceValue)}matches(e){let n=re.comparator(e.key,this.key);return this.matchesComparison(n)}},qm=class extends dt{constructor(e,n){super(e,"in",n),this.keys=IE("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},Gm=class extends dt{constructor(e,n){super(e,"not-in",n),this.keys=IE("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function IE(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(i=>re.fromName(i.referenceValue))}var Wm=class extends dt{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return d_(n)&&Ya(n.arrayValue,this.value)}},Hm=class extends dt{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&Ya(this.value.arrayValue,n)}},Km=class extends dt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ya(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&!Ya(this.value.arrayValue,n)}},Ym=class extends dt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!d_(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>Ya(this.value.arrayValue,i))}};var Qm=class{constructor(e,n=null,i=[],r=[],s=null,o=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=o,this.endAt=c,this.ue=null}};function qI(t,e=null,n=[],i=[],r=null,s=null,o=null){return new Qm(t,e,n,i,r,s,o)}function h_(t){let e=de(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>zm(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(s){return s.field.canonicalString()+s.dir}(i)).join(","),hd(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>zs(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>zs(i)).join(",")),e.ue=n}return e.ue}function f_(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!zM(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!bE(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!$I(t.startAt,e.startAt)&&$I(t.endAt,e.endAt)}function Xm(t){return re.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}var Fr=class{constructor(e,n=null,i=[],r=[],s=null,o="F",c=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=o,this.startAt=c,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function qM(t,e,n,i,r,s,o,c){return new Fr(t,e,n,i,r,s,o,c)}function fd(t){return new Fr(t)}function GI(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function EE(t){return t.collectionGroup!==null}function qa(t){let e=de(t);if(e.ce===null){e.ce=[];let n=new Set;for(let s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());let i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let c=new Vt(sn.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(c=c.add(u.field))})}),c})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new qs(s,i))}),n.has(sn.keyField().canonicalString())||e.ce.push(new qs(sn.keyField(),i))}return e.ce}function Kn(t){let e=de(t);return e.le||(e.le=GM(e,qa(t))),e.le}function GM(t,e){if(t.limitType==="F")return qI(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(r=>{let s=r.dir==="desc"?"asc":"desc";return new qs(r.field,s)});let n=t.endAt?new $s(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new $s(t.startAt.position,t.startAt.inclusive):null;return qI(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function Jm(t,e){let n=t.filters.concat([e]);return new Fr(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Zm(t,e,n){return new Fr(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function pd(t,e){return f_(Kn(t),Kn(e))&&t.limitType===e.limitType}function CE(t){return`${h_(Kn(t))}|lt:${t.limitType}`}function xs(t){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(r=>wE(r)).join(", ")}]`),hd(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(r=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(r)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(r=>zs(r)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(r=>zs(r)).join(",")),`Target(${i})`}(Kn(t))}; limitType=${t.limitType})`}function md(t,e){return e.isFoundDocument()&&function(i,r){let s=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(s):re.isDocumentKey(i.path)?i.path.isEqual(s):i.path.isImmediateParentOf(s)}(t,e)&&function(i,r){for(let s of qa(i))if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1;return!0}(t,e)&&function(i,r){for(let s of i.filters)if(!s.matches(r))return!1;return!0}(t,e)&&function(i,r){return!(i.startAt&&!function(o,c,l){let u=zI(o,c,l);return o.inclusive?u<=0:u<0}(i.startAt,qa(i),r)||i.endAt&&!function(o,c,l){let u=zI(o,c,l);return o.inclusive?u>=0:u>0}(i.endAt,qa(i),r))}(t,e)}function WM(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function TE(t){return(e,n)=>{let i=!1;for(let r of qa(t)){let s=HM(r,e,n);if(s!==0)return s;i=i||r.field.isKeyField()}return 0}}function HM(t,e,n){let i=t.field.isKeyField()?re.comparator(e.key,n.key):function(s,o,c){let l=o.data.field(s),u=c.data.field(s);return l!==null&&u!==null?Bs(l,u):ae()}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return ae()}}var er=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(let[r,s]of i)if(this.equalsFn(r,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){let i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Br(this.inner,(n,i)=>{for(let[r,s]of i)e(r,s)})}isEmpty(){return mE(this.inner)}size(){return this.innerSize}};var KM=new nt(re.comparator);function wi(){return KM}var SE=new nt(re.comparator);function za(...t){let e=SE;for(let n of t)e=e.insert(n.key,n);return e}function AE(t){let e=SE;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function Dr(){return Ga()}function PE(){return Ga()}function Ga(){return new er(t=>t.toString(),(t,e)=>t.isEqual(e))}var YM=new nt(re.comparator),QM=new Vt(re.comparator);function Ee(...t){let e=QM;for(let n of t)e=e.add(n);return e}var XM=new Vt(Ae);function JM(){return XM}function RE(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ha(e)?"-0":e}}function DE(t){return{integerValue:""+t}}function ZM(t,e){return VM(e)?DE(e):RE(t,e)}var Gs=class{constructor(){this._=void 0}};function eN(t,e,n){return t instanceof Ws?function(r,s){let o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&l_(s)&&(s=u_(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof Vr?kE(t,e):t instanceof Lr?xE(t,e):function(r,s){let o=OE(r,s),c=WI(o)+WI(r.Pe);return Bm(o)&&Bm(r.Pe)?DE(c):RE(r.serializer,c)}(t,e)}function tN(t,e,n){return t instanceof Vr?kE(t,e):t instanceof Lr?xE(t,e):n}function OE(t,e){return t instanceof Hs?function(i){return Bm(i)||function(s){return!!s&&"doubleValue"in s}(i)}(e)?e:{integerValue:0}:null}var Ws=class extends Gs{},Vr=class extends Gs{constructor(e){super(),this.elements=e}};function kE(t,e){let n=ME(e);for(let i of t.elements)n.some(r=>Qn(r,i))||n.push(i);return{arrayValue:{values:n}}}var Lr=class extends Gs{constructor(e){super(),this.elements=e}};function xE(t,e){let n=ME(e);for(let i of t.elements)n=n.filter(r=>!Qn(r,i));return{arrayValue:{values:n}}}var Hs=class extends Gs{constructor(e,n){super(),this.serializer=e,this.Pe=n}};function WI(t){return tt(t.integerValue||t.doubleValue)}function ME(t){return d_(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function nN(t,e){return t.field.isEqual(e.field)&&function(i,r){return i instanceof Vr&&r instanceof Vr||i instanceof Lr&&r instanceof Lr?js(i.elements,r.elements,Qn):i instanceof Hs&&r instanceof Hs?Qn(i.Pe,r.Pe):i instanceof Ws&&r instanceof Ws}(t.transform,e.transform)}var eg=class{constructor(e,n){this.version=e,this.transformResults=n}},vi=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function xu(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var Ks=class{};function NE(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Qa(t.key,vi.none()):new Ur(t.key,t.data,vi.none());{let n=t.data,i=rn.empty(),r=new Vt(sn.comparator);for(let s of e.fields)if(!r.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?i.delete(s):i.set(s,o),r=r.add(s)}return new Xn(t.key,i,new gn(r.toArray()),vi.none())}}function iN(t,e,n){t instanceof Ur?function(r,s,o){let c=r.value.clone(),l=KI(r.fieldTransforms,s,o.transformResults);c.setAll(l),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):t instanceof Xn?function(r,s,o){if(!xu(r.precondition,s))return void s.convertToUnknownDocument(o.version);let c=KI(r.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(FE(r)),l.setAll(c),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(r,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Wa(t,e,n,i){return t instanceof Ur?function(s,o,c,l){if(!xu(s.precondition,o))return c;let u=s.value.clone(),h=YI(s.fieldTransforms,l,o);return u.setAll(h),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,n,i):t instanceof Xn?function(s,o,c,l){if(!xu(s.precondition,o))return c;let u=YI(s.fieldTransforms,l,o),h=o.data;return h.setAll(FE(s)),h.setAll(u),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),c===null?null:c.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(p=>p.field))}(t,e,n,i):function(s,o,c){return xu(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):c}(t,e,n)}function rN(t,e){let n=null;for(let i of t.fieldTransforms){let r=e.data.field(i.field),s=OE(i.transform,r||null);s!=null&&(n===null&&(n=rn.empty()),n.set(i.field,s))}return n||null}function HI(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&js(i,r,(s,o)=>nN(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var Ur=class extends Ks{constructor(e,n,i,r=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}},Xn=class extends Ks{constructor(e,n,i,r,s=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function FE(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let i=t.data.field(n);e.set(n,i)}}),e}function KI(t,e,n){let i=new Map;Be(t.length===n.length);for(let r=0;r<n.length;r++){let s=t[r],o=s.transform,c=e.data.field(s.field);i.set(s.field,tN(o,c,n[r]))}return i}function YI(t,e,n){let i=new Map;for(let r of t){let s=r.transform,o=n.data.field(r.field);i.set(r.field,eN(s,o,e))}return i}var Qa=class extends Ks{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},tg=class extends Ks{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var ng=class{constructor(e,n,i,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,n){let i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){let s=this.mutations[r];s.key.isEqual(e.key)&&iN(s,e,i[r])}}applyToLocalView(e,n){for(let i of this.baseMutations)i.key.isEqual(e.key)&&(n=Wa(i,e,n,this.localWriteTime));for(let i of this.mutations)i.key.isEqual(e.key)&&(n=Wa(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let i=PE();return this.mutations.forEach(r=>{let s=e.get(r.key),o=s.overlayedDocument,c=this.applyToLocalView(o,s.mutatedFields);c=n.has(r.key)?null:c;let l=NE(o,c);l!==null&&i.set(r.key,l),o.isValidDocument()||o.convertToNoDocument(fe.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ee())}isEqual(e){return this.batchId===e.batchId&&js(this.mutations,e.mutations,(n,i)=>HI(n,i))&&js(this.baseMutations,e.baseMutations,(n,i)=>HI(n,i))}},ig=class t{constructor(e,n,i,r){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=r}static from(e,n,i){Be(e.mutations.length===i.length);let r=function(){return YM}(),s=e.mutations;for(let o=0;o<s.length;o++)r=r.insert(s[o].key,i[o].version);return new t(e,n,i,r)}};var rg=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var sg=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var lt,Ce;function sN(t){switch(t){default:return ae();case V.CANCELLED:case V.UNKNOWN:case V.DEADLINE_EXCEEDED:case V.RESOURCE_EXHAUSTED:case V.INTERNAL:case V.UNAVAILABLE:case V.UNAUTHENTICATED:return!1;case V.INVALID_ARGUMENT:case V.NOT_FOUND:case V.ALREADY_EXISTS:case V.PERMISSION_DENIED:case V.FAILED_PRECONDITION:case V.ABORTED:case V.OUT_OF_RANGE:case V.UNIMPLEMENTED:case V.DATA_LOSS:return!0}}function VE(t){if(t===void 0)return yi("GRPC error has no .code"),V.UNKNOWN;switch(t){case lt.OK:return V.OK;case lt.CANCELLED:return V.CANCELLED;case lt.UNKNOWN:return V.UNKNOWN;case lt.DEADLINE_EXCEEDED:return V.DEADLINE_EXCEEDED;case lt.RESOURCE_EXHAUSTED:return V.RESOURCE_EXHAUSTED;case lt.INTERNAL:return V.INTERNAL;case lt.UNAVAILABLE:return V.UNAVAILABLE;case lt.UNAUTHENTICATED:return V.UNAUTHENTICATED;case lt.INVALID_ARGUMENT:return V.INVALID_ARGUMENT;case lt.NOT_FOUND:return V.NOT_FOUND;case lt.ALREADY_EXISTS:return V.ALREADY_EXISTS;case lt.PERMISSION_DENIED:return V.PERMISSION_DENIED;case lt.FAILED_PRECONDITION:return V.FAILED_PRECONDITION;case lt.ABORTED:return V.ABORTED;case lt.OUT_OF_RANGE:return V.OUT_OF_RANGE;case lt.UNIMPLEMENTED:return V.UNIMPLEMENTED;case lt.DATA_LOSS:return V.DATA_LOSS;default:return ae()}}(Ce=lt||(lt={}))[Ce.OK=0]="OK",Ce[Ce.CANCELLED=1]="CANCELLED",Ce[Ce.UNKNOWN=2]="UNKNOWN",Ce[Ce.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ce[Ce.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ce[Ce.NOT_FOUND=5]="NOT_FOUND",Ce[Ce.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ce[Ce.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ce[Ce.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ce[Ce.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ce[Ce.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ce[Ce.ABORTED=10]="ABORTED",Ce[Ce.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ce[Ce.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ce[Ce.INTERNAL=13]="INTERNAL",Ce[Ce.UNAVAILABLE=14]="UNAVAILABLE",Ce[Ce.DATA_LOSS=15]="DATA_LOSS";var QI=null;function oN(){return new TextEncoder}var aN=new Xi([4294967295,4294967295],0);function XI(t){let e=oN().encode(t),n=new ym;return n.update(e),new Uint8Array(n.digest())}function JI(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Xi([n,i],0),new Xi([r,s],0)]}var og=class t{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new Or(`Invalid padding: ${n}`);if(i<0)throw new Or(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Or(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new Or(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Xi.fromNumber(this.Ie)}Ee(e,n,i){let r=e.add(n.multiply(Xi.fromNumber(i)));return r.compare(aN)===1&&(r=new Xi([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let n=XI(e),[i,r]=JI(n);for(let s=0;s<this.hashCount;s++){let o=this.Ee(i,r,s);if(!this.de(o))return!1}return!0}static create(e,n,i){let r=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new t(s,r,n);return i.forEach(c=>o.insert(c)),o}insert(e){if(this.Ie===0)return;let n=XI(e),[i,r]=JI(n);for(let s=0;s<this.hashCount;s++){let o=this.Ee(i,r,s);this.Ae(o)}}Ae(e){let n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}},Or=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Bu=class t{constructor(e,n,i,r,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,i){let r=new Map;return r.set(e,Xa.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new t(fe.min(),r,new nt(Ae),wi(),Ee())}},Xa=class t{constructor(e,n,i,r,s){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new t(i,n,Ee(),Ee(),Ee())}};var Vs=class{constructor(e,n,i,r){this.Re=e,this.removedTargetIds=n,this.key=i,this.Ve=r}},zu=class{constructor(e,n){this.targetId=e,this.me=n}},$u=class{constructor(e,n,i=qt.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=r}},qu=class{constructor(){this.fe=0,this.ge=eE(),this.pe=qt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}Ce(){let e=Ee(),n=Ee(),i=Ee();return this.ge.forEach((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:ae()}}),new Xa(this.pe,this.ye,e,n,i)}ve(){this.we=!1,this.ge=eE()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Be(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},ag=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=wi(),this.qe=ZI(),this.Qe=new nt(Ae)}Ke(e){for(let n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(let n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{let i=this.Ge(n);switch(e.state){case 0:this.ze(n)&&i.De(e.resumeToken);break;case 1:i.Oe(),i.Se||i.ve(),i.De(e.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(i.Ne(),i.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),i.De(e.resumeToken));break;default:ae()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((i,r)=>{this.ze(r)&&n(r)})}He(e){let n=e.targetId,i=e.me.count,r=this.Je(n);if(r){let s=r.target;if(Xm(s))if(i===0){let o=new re(s.path);this.Ue(n,o,Pn.newNoDocument(o,fe.min()))}else Be(i===1);else{let o=this.Ye(n);if(o!==i){let c=this.Ze(e),l=c?this.Xe(c,e,o):1;if(l!==0){this.je(n);let u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,u)}QI?.et(function(h,p,_,C,O){var F,D,z,X,Y,Z;let Ne={localCacheCount:h,existenceFilterCount:p.count,databaseId:_.database,projectId:_.projectId},le=p.unchangedNames;return le&&(Ne.bloomFilter={applied:O===0,hashCount:(F=le?.hashCount)!==null&&F!==void 0?F:0,bitmapLength:(X=(z=(D=le?.bits)===null||D===void 0?void 0:D.bitmap)===null||z===void 0?void 0:z.length)!==null&&X!==void 0?X:0,padding:(Z=(Y=le?.bits)===null||Y===void 0?void 0:Y.padding)!==null&&Z!==void 0?Z:0,mightContain:T=>{var b;return(b=C?.mightContain(T))!==null&&b!==void 0&&b}}),Ne}(o,e.me,this.Le.tt(),c,l))}}}}Ze(e){let n=e.me.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:i="",padding:r=0},hashCount:s=0}=n,o,c;try{o=Zi(i).toUint8Array()}catch(l){if(l instanceof Lu)return Us("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{c=new og(o,r,s)}catch(l){return Us(l instanceof Or?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return c.Ie===0?null:c}Xe(e,n,i){return n.me.count===i-this.nt(e,n.targetId)?0:2}nt(e,n){let i=this.Le.getRemoteKeysForTarget(n),r=0;return i.forEach(s=>{let o=this.Le.tt(),c=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(c)||(this.Ue(n,s,null),r++)}),r}rt(e){let n=new Map;this.Be.forEach((s,o)=>{let c=this.Je(o);if(c){if(s.current&&Xm(c.target)){let l=new re(c.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,Pn.newNoDocument(l,e))}s.be&&(n.set(o,s.Ce()),s.ve())}});let i=Ee();this.qe.forEach((s,o)=>{let c=!0;o.forEachWhile(l=>{let u=this.Je(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(i=i.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));let r=new Bu(e,n,this.Qe,this.ke,i);return this.ke=wi(),this.qe=ZI(),this.Qe=new nt(Ae),r}$e(e,n){if(!this.ze(e))return;let i=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,i),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,i){if(!this.ze(e))return;let r=this.Ge(e);this.it(e,n)?r.Fe(n,1):r.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),i&&(this.ke=this.ke.insert(n,i))}removeTarget(e){this.Be.delete(e)}Ye(e){let n=this.Ge(e).Ce();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new qu,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Vt(Ae),this.qe=this.qe.insert(e,n)),n}ze(e){let n=this.Je(e)!==null;return n||J("WatchChangeAggregator","Detected inactive target",e),n}Je(e){let n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new qu),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}};function ZI(){return new nt(re.comparator)}function eE(){return new nt(re.comparator)}var cN={asc:"ASCENDING",desc:"DESCENDING"},lN={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},uN={and:"AND",or:"OR"},cg=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function lg(t,e){return t.useProto3Json||hd(e)?e:{value:e}}function Gu(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function LE(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function dN(t,e){return Gu(t,e.toTimestamp())}function Yn(t){return Be(!!t),fe.fromTimestamp(function(n){let i=bi(n);return new Pt(i.seconds,i.nanos)}(t))}function p_(t,e){return ug(t,e).canonicalString()}function ug(t,e){let n=function(r){return new Ye(["projects",r.projectId,"databases",r.database])}(t).child("documents");return e===void 0?n:n.child(e)}function UE(t){let e=Ye.fromString(t);return Be(qE(e)),e}function dg(t,e){return p_(t.databaseId,e.path)}function Sm(t,e){let n=UE(e);if(n.get(1)!==t.databaseId.projectId)throw new K(V.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new K(V.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new re(BE(n))}function jE(t,e){return p_(t.databaseId,e)}function hN(t){let e=UE(t);return e.length===4?Ye.emptyPath():BE(e)}function hg(t){return new Ye(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function BE(t){return Be(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function tE(t,e,n){return{name:dg(t,e),fields:n.value.mapValue.fields}}function fN(t,e){let n;if("targetChange"in e){e.targetChange;let i=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:ae()}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],s=function(u,h){return u.useProto3Json?(Be(h===void 0||typeof h=="string"),qt.fromBase64String(h||"")):(Be(h===void 0||h instanceof Buffer||h instanceof Uint8Array),qt.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,c=o&&function(u){let h=u.code===void 0?V.UNKNOWN:VE(u.code);return new K(h,u.message||"")}(o);n=new $u(i,r,s,c||null)}else if("documentChange"in e){e.documentChange;let i=e.documentChange;i.document,i.document.name,i.document.updateTime;let r=Sm(t,i.document.name),s=Yn(i.document.updateTime),o=i.document.createTime?Yn(i.document.createTime):fe.min(),c=new rn({mapValue:{fields:i.document.fields}}),l=Pn.newFoundDocument(r,s,o,c),u=i.targetIds||[],h=i.removedTargetIds||[];n=new Vs(u,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;let i=e.documentDelete;i.document;let r=Sm(t,i.document),s=i.readTime?Yn(i.readTime):fe.min(),o=Pn.newNoDocument(r,s),c=i.removedTargetIds||[];n=new Vs([],c,o.key,o)}else if("documentRemove"in e){e.documentRemove;let i=e.documentRemove;i.document;let r=Sm(t,i.document),s=i.removedTargetIds||[];n=new Vs([],s,r,null)}else{if(!("filter"in e))return ae();{e.filter;let i=e.filter;i.targetId;let{count:r=0,unchangedNames:s}=i,o=new sg(r,s),c=i.targetId;n=new zu(c,o)}}return n}function pN(t,e){let n;if(e instanceof Ur)n={update:tE(t,e.key,e.value)};else if(e instanceof Qa)n={delete:dg(t,e.key)};else if(e instanceof Xn)n={update:tE(t,e.key,e.data),updateMask:EN(e.fieldMask)};else{if(!(e instanceof tg))return ae();n={verify:dg(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(s,o){let c=o.transform;if(c instanceof Ws)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Vr)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Lr)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Hs)return{fieldPath:o.field.canonicalString(),increment:c.Pe};throw ae()}(0,i))),e.precondition.isNone||(n.currentDocument=function(r,s){return s.updateTime!==void 0?{updateTime:dN(r,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:ae()}(t,e.precondition)),n}function mN(t,e){return t&&t.length>0?(Be(e!==void 0),t.map(n=>function(r,s){let o=r.updateTime?Yn(r.updateTime):Yn(s);return o.isEqual(fe.min())&&(o=Yn(s)),new eg(o,r.transformResults||[])}(n,e))):[]}function gN(t,e){return{documents:[jE(t,e.path)]}}function _N(t,e){let n={structuredQuery:{}},i=e.path,r;e.collectionGroup!==null?(r=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=jE(t,r);let s=function(u){if(u.length!==0)return $E(Rn.create(u,"and"))}(e.filters);s&&(n.structuredQuery.where=s);let o=function(u){if(u.length!==0)return u.map(h=>function(_){return{field:Ms(_.field),direction:bN(_.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);let c=lg(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{_t:n,parent:r}}function vN(t){let e=hN(t.parent),n=t.structuredQuery,i=n.from?n.from.length:0,r=null;if(i>0){Be(i===1);let h=n.from[0];h.allDescendants?r=h.collectionId:e=e.child(h.collectionId)}let s=[];n.where&&(s=function(p){let _=zE(p);return _ instanceof Rn&&yE(_)?_.getFilters():[_]}(n.where));let o=[];n.orderBy&&(o=function(p){return p.map(_=>function(O){return new qs(Ns(O.field),function(D){switch(D){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(O.direction))}(_))}(n.orderBy));let c=null;n.limit&&(c=function(p){let _;return _=typeof p=="object"?p.value:p,hd(_)?null:_}(n.limit));let l=null;n.startAt&&(l=function(p){let _=!!p.before,C=p.values||[];return new $s(C,_)}(n.startAt));let u=null;return n.endAt&&(u=function(p){let _=!p.before,C=p.values||[];return new $s(C,_)}(n.endAt)),qM(e,r,o,s,c,"F",l,u)}function yN(t,e){let n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ae()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function zE(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":let i=Ns(n.unaryFilter.field);return dt.create(i,"==",{doubleValue:NaN});case"IS_NULL":let r=Ns(n.unaryFilter.field);return dt.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=Ns(n.unaryFilter.field);return dt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=Ns(n.unaryFilter.field);return dt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ae()}}(t):t.fieldFilter!==void 0?function(n){return dt.create(Ns(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ae()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Rn.create(n.compositeFilter.filters.map(i=>zE(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return ae()}}(n.compositeFilter.op))}(t):ae()}function bN(t){return cN[t]}function wN(t){return lN[t]}function IN(t){return uN[t]}function Ms(t){return{fieldPath:t.canonicalString()}}function Ns(t){return sn.fromServerFormat(t.fieldPath)}function $E(t){return t instanceof dt?function(n){if(n.op==="=="){if(BI(n.value))return{unaryFilter:{field:Ms(n.field),op:"IS_NAN"}};if(jI(n.value))return{unaryFilter:{field:Ms(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(BI(n.value))return{unaryFilter:{field:Ms(n.field),op:"IS_NOT_NAN"}};if(jI(n.value))return{unaryFilter:{field:Ms(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ms(n.field),op:wN(n.op),value:n.value}}}(t):t instanceof Rn?function(n){let i=n.getFilters().map(r=>$E(r));return i.length===1?i[0]:{compositeFilter:{op:IN(n.op),filters:i}}}(t):ae()}function EN(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function qE(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var Ja=class t{constructor(e,n,i,r,s=fe.min(),o=fe.min(),c=qt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=c,this.expectedCount=l}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var fg=class{constructor(e){this.ct=e}};function CN(t){let e=vN({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Zm(e,e.limit,"L"):e}var Wu=class{constructor(){}Pt(e,n){this.It(e,n),n.Tt()}It(e,n){if("nullValue"in e)this.Et(n,5);else if("booleanValue"in e)this.Et(n,10),n.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(n,15),n.dt(tt(e.integerValue));else if("doubleValue"in e){let i=tt(e.doubleValue);isNaN(i)?this.Et(n,13):(this.Et(n,15),Ha(i)?n.dt(0):n.dt(i))}else if("timestampValue"in e){let i=e.timestampValue;this.Et(n,20),typeof i=="string"&&(i=bi(i)),n.At(`${i.seconds||""}`),n.dt(i.nanos||0)}else if("stringValue"in e)this.Rt(e.stringValue,n),this.Vt(n);else if("bytesValue"in e)this.Et(n,30),n.ft(Zi(e.bytesValue)),this.Vt(n);else if("referenceValue"in e)this.gt(e.referenceValue,n);else if("geoPointValue"in e){let i=e.geoPointValue;this.Et(n,45),n.dt(i.latitude||0),n.dt(i.longitude||0)}else"mapValue"in e?gE(e)?this.Et(n,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,n),this.Vt(n)):"arrayValue"in e?(this.wt(e.arrayValue,n),this.Vt(n)):ae()}Rt(e,n){this.Et(n,25),this.St(e,n)}St(e,n){n.At(e)}yt(e,n){let i=e.fields||{};this.Et(n,55);for(let r of Object.keys(i))this.Rt(r,n),this.It(i[r],n)}wt(e,n){let i=e.values||[];this.Et(n,50);for(let r of i)this.It(r,n)}gt(e,n){this.Et(n,37),re.fromName(e).path.forEach(i=>{this.Et(n,60),this.St(i,n)})}Et(e,n){e.dt(n)}Vt(e){e.dt(2)}};Wu.bt=new Wu;var pg=class{constructor(){this._n=new mg}addToCollectionParentIndex(e,n){return this._n.add(n),B.resolve()}getCollectionParents(e,n){return B.resolve(this._n.getEntries(n))}addFieldIndex(e,n){return B.resolve()}deleteFieldIndex(e,n){return B.resolve()}deleteAllFieldIndexes(e){return B.resolve()}createTargetIndexes(e,n){return B.resolve()}getDocumentsMatchingTarget(e,n){return B.resolve(null)}getIndexType(e,n){return B.resolve(0)}getFieldIndexes(e,n){return B.resolve([])}getNextCollectionGroupToUpdate(e){return B.resolve(null)}getMinOffset(e,n){return B.resolve(Mr.min())}getMinOffsetFromCollectionGroup(e,n){return B.resolve(Mr.min())}updateCollectionGroup(e,n,i){return B.resolve()}updateIndexEntries(e,n){return B.resolve()}},mg=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),i=e.popLast(),r=this.index[n]||new Vt(Ye.comparator),s=!r.has(i);return this.index[n]=r.add(i),s}has(e){let n=e.lastSegment(),i=e.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(e){return(this.index[e]||new Vt(Ye.comparator)).toArray()}};var Gz=new Uint8Array(0);var Wn=class t{constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};Wn.DEFAULT_COLLECTION_PERCENTILE=10,Wn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Wn.DEFAULT=new Wn(41943040,Wn.DEFAULT_COLLECTION_PERCENTILE,Wn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Wn.DISABLED=new Wn(-1,0,0);var Za=class t{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new t(0)}static Ln(){return new t(-1)}};var gg=class{constructor(){this.changes=new er(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Pn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let i=this.changes.get(n);return i!==void 0?B.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var _g=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var vg=class{constructor(e,n,i,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(i!==null&&Wa(i.mutation,r,gn.empty(),Pt.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,Ee()).next(()=>i))}getLocalViewOfDocuments(e,n,i=Ee()){let r=Dr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,i).next(s=>{let o=za();return s.forEach((c,l)=>{o=o.insert(c,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){let i=Dr();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,Ee()))}populateOverlays(e,n,i){let r=[];return i.forEach(s=>{n.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(e,r).next(s=>{s.forEach((o,c)=>{n.set(o,c)})})}computeViews(e,n,i,r){let s=wi(),o=Ga(),c=function(){return Ga()}();return n.forEach((l,u)=>{let h=i.get(u.key);r.has(u.key)&&(h===void 0||h.mutation instanceof Xn)?s=s.insert(u.key,u):h!==void 0?(o.set(u.key,h.mutation.getFieldMask()),Wa(h.mutation,u,h.mutation.getFieldMask(),Pt.now())):o.set(u.key,gn.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((u,h)=>o.set(u,h)),n.forEach((u,h)=>{var p;return c.set(u,new _g(h,(p=o.get(u))!==null&&p!==void 0?p:null))}),c))}recalculateAndSaveOverlays(e,n){let i=Ga(),r=new nt((o,c)=>o-c),s=Ee();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(let c of o)c.keys().forEach(l=>{let u=n.get(l);if(u===null)return;let h=i.get(l)||gn.empty();h=c.applyToLocalView(u,h),i.set(l,h);let p=(r.get(c.batchId)||Ee()).add(l);r=r.insert(c.batchId,p)})}).next(()=>{let o=[],c=r.getReverseIterator();for(;c.hasNext();){let l=c.getNext(),u=l.key,h=l.value,p=PE();h.forEach(_=>{if(!s.has(_)){let C=NE(n.get(_),i.get(_));C!==null&&p.set(_,C),s=s.add(_)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,p))}return B.waitFor(o)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i,r){return function(o){return re.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):EE(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,r):this.getDocumentsMatchingCollectionQuery(e,n,i,r)}getNextDocuments(e,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,r).next(s=>{let o=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,r-s.size):B.resolve(Dr()),c=-1,l=s;return o.next(u=>B.forEach(u,(h,p)=>(c<p.largestBatchId&&(c=p.largestBatchId),s.get(h)?B.resolve():this.remoteDocumentCache.getEntry(e,h).next(_=>{l=l.insert(h,_)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,l,u,Ee())).next(h=>({batchId:c,changes:AE(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new re(n)).next(i=>{let r=za();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,i,r){let s=n.collectionGroup,o=za();return this.indexManager.getCollectionParents(e,s).next(c=>B.forEach(c,l=>{let u=function(p,_){return new Fr(_,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,u,i,r).next(h=>{h.forEach((p,_)=>{o=o.insert(p,_)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,i,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,s,r))).next(o=>{s.forEach((l,u)=>{let h=u.getKey();o.get(h)===null&&(o=o.insert(h,Pn.newInvalidDocument(h)))});let c=za();return o.forEach((l,u)=>{let h=s.get(l);h!==void 0&&Wa(h.mutation,u,gn.empty(),Pt.now()),md(n,u)&&(c=c.insert(l,u))}),c})}};var yg=class{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,n){return B.resolve(this.cr.get(n))}saveBundleMetadata(e,n){return this.cr.set(n.id,function(r){return{id:r.id,version:r.version,createTime:Yn(r.createTime)}}(n)),B.resolve()}getNamedQuery(e,n){return B.resolve(this.lr.get(n))}saveNamedQuery(e,n){return this.lr.set(n.name,function(r){return{name:r.name,query:CN(r.bundledQuery),readTime:Yn(r.readTime)}}(n)),B.resolve()}};var bg=class{constructor(){this.overlays=new nt(re.comparator),this.hr=new Map}getOverlay(e,n){return B.resolve(this.overlays.get(n))}getOverlays(e,n){let i=Dr();return B.forEach(n,r=>this.getOverlay(e,r).next(s=>{s!==null&&i.set(r,s)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((r,s)=>{this.ht(e,n,s)}),B.resolve()}removeOverlaysForBatchId(e,n,i){let r=this.hr.get(i);return r!==void 0&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.hr.delete(i)),B.resolve()}getOverlaysForCollection(e,n,i){let r=Dr(),s=n.length+1,o=new re(n.child("")),c=this.overlays.getIteratorFrom(o);for(;c.hasNext();){let l=c.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===s&&l.largestBatchId>i&&r.set(l.getKey(),l)}return B.resolve(r)}getOverlaysForCollectionGroup(e,n,i,r){let s=new nt((u,h)=>u-h),o=this.overlays.getIterator();for(;o.hasNext();){let u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>i){let h=s.get(u.largestBatchId);h===null&&(h=Dr(),s=s.insert(u.largestBatchId,h)),h.set(u.getKey(),u)}}let c=Dr(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,h)=>c.set(u,h)),!(c.size()>=r)););return B.resolve(c)}ht(e,n,i){let r=this.overlays.get(i.key);if(r!==null){let o=this.hr.get(r.largestBatchId).delete(i.key);this.hr.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(i.key,new rg(n,i));let s=this.hr.get(n);s===void 0&&(s=Ee(),this.hr.set(n,s)),this.hr.set(n,s.add(i.key))}};var ec=class{constructor(){this.Pr=new Vt(ut.Ir),this.Tr=new Vt(ut.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,n){let i=new ut(e,n);this.Pr=this.Pr.add(i),this.Tr=this.Tr.add(i)}dr(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.Ar(new ut(e,n))}Rr(e,n){e.forEach(i=>this.removeReference(i,n))}Vr(e){let n=new re(new Ye([])),i=new ut(n,e),r=new ut(n,e+1),s=[];return this.Tr.forEachInRange([i,r],o=>{this.Ar(o),s.push(o.key)}),s}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){let n=new re(new Ye([])),i=new ut(n,e),r=new ut(n,e+1),s=Ee();return this.Tr.forEachInRange([i,r],o=>{s=s.add(o.key)}),s}containsKey(e){let n=new ut(e,0),i=this.Pr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}},ut=class{constructor(e,n){this.key=e,this.pr=n}static Ir(e,n){return re.comparator(e.key,n.key)||Ae(e.pr,n.pr)}static Er(e,n){return Ae(e.pr,n.pr)||re.comparator(e.key,n.key)}};var wg=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new Vt(ut.Ir)}checkEmpty(e){return B.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,r){let s=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new ng(s,n,i,r);this.mutationQueue.push(o);for(let c of r)this.wr=this.wr.add(new ut(c.key,s)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return B.resolve(o)}lookupMutationBatch(e,n){return B.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(e,n){let i=n+1,r=this.br(i),s=r<0?0:r;return B.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return B.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(e){return B.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let i=new ut(n,0),r=new ut(n,Number.POSITIVE_INFINITY),s=[];return this.wr.forEachInRange([i,r],o=>{let c=this.Sr(o.pr);s.push(c)}),B.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new Vt(Ae);return n.forEach(r=>{let s=new ut(r,0),o=new ut(r,Number.POSITIVE_INFINITY);this.wr.forEachInRange([s,o],c=>{i=i.add(c.pr)})}),B.resolve(this.Dr(i))}getAllMutationBatchesAffectingQuery(e,n){let i=n.path,r=i.length+1,s=i;re.isDocumentKey(s)||(s=s.child(""));let o=new ut(new re(s),0),c=new Vt(Ae);return this.wr.forEachWhile(l=>{let u=l.key.path;return!!i.isPrefixOf(u)&&(u.length===r&&(c=c.add(l.pr)),!0)},o),B.resolve(this.Dr(c))}Dr(e){let n=[];return e.forEach(i=>{let r=this.Sr(i);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){Be(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let i=this.wr;return B.forEach(n.mutations,r=>{let s=new ut(r.key,n.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.wr=i})}Mn(e){}containsKey(e,n){let i=new ut(n,0),r=this.wr.firstAfterOrEqual(i);return B.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,B.resolve()}Cr(e,n){return this.br(e)}br(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Sr(e){let n=this.br(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var Ig=class{constructor(e){this.vr=e,this.docs=function(){return new nt(re.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let i=n.key,r=this.docs.get(i),s=r?r.size:0,o=this.vr(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let i=this.docs.get(n);return B.resolve(i?i.document.mutableCopy():Pn.newInvalidDocument(n))}getEntries(e,n){let i=wi();return n.forEach(r=>{let s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():Pn.newInvalidDocument(r))}),B.resolve(i)}getDocumentsMatchingQuery(e,n,i,r){let s=wi(),o=n.path,c=new re(o.child("")),l=this.docs.getIteratorFrom(c);for(;l.hasNext();){let{key:u,value:{document:h}}=l.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||MM(xM(h),i)<=0||(r.has(h.key)||md(n,h))&&(s=s.insert(h.key,h.mutableCopy()))}return B.resolve(s)}getAllFromCollectionGroup(e,n,i,r){ae()}Fr(e,n){return B.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new Eg(this)}getSize(e){return B.resolve(this.size)}},Eg=class extends gg{constructor(e){super(),this.ar=e}applyChanges(e){let n=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?n.push(this.ar.addEntry(e,r)):this.ar.removeEntry(i)}),B.waitFor(n)}getFromCache(e,n){return this.ar.getEntry(e,n)}getAllFromCache(e,n){return this.ar.getEntries(e,n)}};var Cg=class{constructor(e){this.persistence=e,this.Mr=new er(n=>h_(n),f_),this.lastRemoteSnapshotVersion=fe.min(),this.highestTargetId=0,this.Or=0,this.Nr=new ec,this.targetCount=0,this.Lr=Za.Nn()}forEachTarget(e,n){return this.Mr.forEach((i,r)=>n(r)),B.resolve()}getLastRemoteSnapshotVersion(e){return B.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return B.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),B.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.Or&&(this.Or=n),B.resolve()}qn(e){this.Mr.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.Lr=new Za(n),this.highestTargetId=n),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,n){return this.qn(n),this.targetCount+=1,B.resolve()}updateTargetData(e,n){return this.qn(n),B.resolve()}removeTargetData(e,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,B.resolve()}removeTargets(e,n,i){let r=0,s=[];return this.Mr.forEach((o,c)=>{c.sequenceNumber<=n&&i.get(c.targetId)===null&&(this.Mr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,c.targetId)),r++)}),B.waitFor(s).next(()=>r)}getTargetCount(e){return B.resolve(this.targetCount)}getTargetData(e,n){let i=this.Mr.get(n)||null;return B.resolve(i)}addMatchingKeys(e,n,i){return this.Nr.dr(n,i),B.resolve()}removeMatchingKeys(e,n,i){this.Nr.Rr(n,i);let r=this.persistence.referenceDelegate,s=[];return r&&n.forEach(o=>{s.push(r.markPotentiallyOrphaned(e,o))}),B.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Nr.Vr(n),B.resolve()}getMatchingKeysForTargetId(e,n){let i=this.Nr.gr(n);return B.resolve(i)}containsKey(e,n){return B.resolve(this.Nr.containsKey(n))}};var Tg=class{constructor(e,n){this.Br={},this.overlays={},this.kr=new pE(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new Cg(this),this.indexManager=new pg,this.remoteDocumentCache=function(r){return new Ig(r)}(i=>this.referenceDelegate.Kr(i)),this.serializer=new fg(n),this.$r=new yg(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new bg,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.Br[e.toKey()];return i||(i=new wg(n,this.referenceDelegate),this.Br[e.toKey()]=i),i}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,n,i){J("MemoryPersistence","Starting transaction:",e);let r=new Sg(this.kr.next());return this.referenceDelegate.Ur(),i(r).next(s=>this.referenceDelegate.Wr(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Gr(e,n){return B.or(Object.values(this.Br).map(i=>()=>i.containsKey(e,n)))}},Sg=class extends Lm{constructor(e){super(),this.currentSequenceNumber=e}},Ag=class t{constructor(e){this.persistence=e,this.zr=new ec,this.jr=null}static Hr(e){return new t(e)}get Jr(){if(this.jr)return this.jr;throw ae()}addReference(e,n,i){return this.zr.addReference(i,n),this.Jr.delete(i.toString()),B.resolve()}removeReference(e,n,i){return this.zr.removeReference(i,n),this.Jr.add(i.toString()),B.resolve()}markPotentiallyOrphaned(e,n){return this.Jr.add(n.toString()),B.resolve()}removeTarget(e,n){this.zr.Vr(n.targetId).forEach(r=>this.Jr.add(r.toString()));let i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(s=>this.Jr.add(s.toString()))}).next(()=>i.removeTargetData(e,n))}Ur(){this.jr=new Set}Wr(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return B.forEach(this.Jr,i=>{let r=re.fromPath(i);return this.Yr(e,r).next(s=>{s||n.removeEntry(r,fe.min())})}).next(()=>(this.jr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Yr(e,n).next(i=>{i?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(e){return 0}Yr(e,n){return B.or([()=>B.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gr(e,n)])}};var Pg=class t{constructor(e,n,i,r){this.targetId=e,this.fromCache=n,this.qi=i,this.Qi=r}static Ki(e,n){let i=Ee(),r=Ee();for(let s of n.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new t(e,n.fromCache,i,r)}};var Rg=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var Dg=class{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return Vb()?8:FM(mt())>0?6:4}()}initialize(e,n){this.zi=e,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(e,n,i,r){let s={result:null};return this.ji(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Hi(e,n,r,i).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new Rg;return this.Ji(e,n,o).next(c=>{if(s.result=c,this.Ui)return this.Yi(e,n,o,c.size)})}).next(()=>s.result)}Yi(e,n,i,r){return i.documentReadCount<this.Wi?(Ba()<=Ie.DEBUG&&J("QueryEngine","SDK will not create cache indexes for query:",xs(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),B.resolve()):(Ba()<=Ie.DEBUG&&J("QueryEngine","Query:",xs(n),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.Gi*r?(Ba()<=Ie.DEBUG&&J("QueryEngine","The SDK decides to create cache indexes for query:",xs(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Kn(n))):B.resolve())}ji(e,n){if(GI(n))return B.resolve(null);let i=Kn(n);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=Zm(n,null,"F"),i=Kn(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(s=>{let o=Ee(...s);return this.zi.getDocuments(e,o).next(c=>this.indexManager.getMinOffset(e,i).next(l=>{let u=this.Zi(n,c);return this.Xi(n,u,o,l.readTime)?this.ji(e,Zm(n,null,"F")):this.es(e,u,n,l)}))})))}Hi(e,n,i,r){return GI(n)||r.isEqual(fe.min())?B.resolve(null):this.zi.getDocuments(e,i).next(s=>{let o=this.Zi(n,s);return this.Xi(n,o,i,r)?B.resolve(null):(Ba()<=Ie.DEBUG&&J("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),xs(n)),this.es(e,o,n,kM(r,-1)).next(c=>c))})}Zi(e,n){let i=new Vt(TE(e));return n.forEach((r,s)=>{md(e,s)&&(i=i.add(s))}),i}Xi(e,n,i,r){if(e.limit===null)return!1;if(i.size!==n.size)return!0;let s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Ji(e,n,i){return Ba()<=Ie.DEBUG&&J("QueryEngine","Using full collection scan to execute query:",xs(n)),this.zi.getDocumentsMatchingQuery(e,n,Mr.min(),i)}es(e,n,i,r){return this.zi.getDocumentsMatchingQuery(e,i,r).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}};var Og=class{constructor(e,n,i,r){this.persistence=e,this.ts=n,this.serializer=r,this.ns=new nt(Ae),this.rs=new er(s=>h_(s),f_),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(i)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new vg(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ns))}};function TN(t,e,n,i){return new Og(t,e,n,i)}function GE(t,e){return g(this,null,function*(){let n=de(t);return yield n.persistence.runTransaction("Handle user change","readonly",i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,n._s(e),n.mutationQueue.getAllMutationBatches(i))).next(s=>{let o=[],c=[],l=Ee();for(let u of r){o.push(u.batchId);for(let h of u.mutations)l=l.add(h.key)}for(let u of s){c.push(u.batchId);for(let h of u.mutations)l=l.add(h.key)}return n.localDocuments.getDocuments(i,l).next(u=>({us:u,removedBatchIds:o,addedBatchIds:c}))})})})}function SN(t,e){let n=de(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{let r=e.batch.keys(),s=n.os.newChangeBuffer({trackRemovals:!0});return function(c,l,u,h){let p=u.batch,_=p.keys(),C=B.resolve();return _.forEach(O=>{C=C.next(()=>h.getEntry(l,O)).next(F=>{let D=u.docVersions.get(O);Be(D!==null),F.version.compareTo(D)<0&&(p.applyToRemoteDocument(F,u),F.isValidDocument()&&(F.setReadTime(u.commitVersion),h.addEntry(F)))})}),C.next(()=>c.mutationQueue.removeMutationBatch(l,p))}(n,i,e,s).next(()=>s.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(c){let l=Ee();for(let u=0;u<c.mutationResults.length;++u)c.mutationResults[u].transformResults.length>0&&(l=l.add(c.batch.mutations[u].key));return l}(e))).next(()=>n.localDocuments.getDocuments(i,r))})}function WE(t){let e=de(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Qr.getLastRemoteSnapshotVersion(n))}function AN(t,e){let n=de(t),i=e.snapshotVersion,r=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=n.os.newChangeBuffer({trackRemovals:!0});r=n.ns;let c=[];e.targetChanges.forEach((h,p)=>{let _=r.get(p);if(!_)return;c.push(n.Qr.removeMatchingKeys(s,h.removedDocuments,p).next(()=>n.Qr.addMatchingKeys(s,h.addedDocuments,p)));let C=_.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(p)!==null?C=C.withResumeToken(qt.EMPTY_BYTE_STRING,fe.min()).withLastLimboFreeSnapshotVersion(fe.min()):h.resumeToken.approximateByteSize()>0&&(C=C.withResumeToken(h.resumeToken,i)),r=r.insert(p,C),function(F,D,z){return F.resumeToken.approximateByteSize()===0||D.snapshotVersion.toMicroseconds()-F.snapshotVersion.toMicroseconds()>=3e8?!0:z.addedDocuments.size+z.modifiedDocuments.size+z.removedDocuments.size>0}(_,C,h)&&c.push(n.Qr.updateTargetData(s,C))});let l=wi(),u=Ee();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(s,h))}),c.push(PN(s,o,e.documentUpdates).next(h=>{l=h.cs,u=h.ls})),!i.isEqual(fe.min())){let h=n.Qr.getLastRemoteSnapshotVersion(s).next(p=>n.Qr.setTargetsMetadata(s,s.currentSequenceNumber,i));c.push(h)}return B.waitFor(c).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,u)).next(()=>l)}).then(s=>(n.ns=r,s))}function PN(t,e,n){let i=Ee(),r=Ee();return n.forEach(s=>i=i.add(s)),e.getEntries(t,i).next(s=>{let o=wi();return n.forEach((c,l)=>{let u=s.get(c);l.isFoundDocument()!==u.isFoundDocument()&&(r=r.add(c)),l.isNoDocument()&&l.version.isEqual(fe.min())?(e.removeEntry(c,l.readTime),o=o.insert(c,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),o=o.insert(c,l)):J("LocalStore","Ignoring outdated watch update for ",c,". Current version:",u.version," Watch version:",l.version)}),{cs:o,ls:r}})}function RN(t,e){let n=de(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function DN(t,e){let n=de(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return n.Qr.getTargetData(i,e).next(s=>s?(r=s,B.resolve(r)):n.Qr.allocateTargetId(i).next(o=>(r=new Ja(e,o,"TargetPurposeListen",i.currentSequenceNumber),n.Qr.addTargetData(i,r).next(()=>r))))}).then(i=>{let r=n.ns.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.ns=n.ns.insert(i.targetId,i),n.rs.set(e,i.targetId)),i})}function kg(t,e,n){return g(this,null,function*(){let i=de(t),r=i.ns.get(e),s=n?"readwrite":"readwrite-primary";try{n||(yield i.persistence.runTransaction("Release target",s,o=>i.persistence.referenceDelegate.removeTarget(o,r)))}catch(o){if(!lc(o))throw o;J("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}i.ns=i.ns.remove(e),i.rs.delete(r.target)})}function nE(t,e,n){let i=de(t),r=fe.min(),s=Ee();return i.persistence.runTransaction("Execute query","readwrite",o=>function(l,u,h){let p=de(l),_=p.rs.get(h);return _!==void 0?B.resolve(p.ns.get(_)):p.Qr.getTargetData(u,h)}(i,o,Kn(e)).next(c=>{if(c)return r=c.lastLimboFreeSnapshotVersion,i.Qr.getMatchingKeysForTargetId(o,c.targetId).next(l=>{s=l})}).next(()=>i.ts.getDocumentsMatchingQuery(o,e,n?r:fe.min(),n?s:Ee())).next(c=>(ON(i,WM(e),c),{documents:c,hs:s})))}function ON(t,e,n){let i=t.ss.get(e)||fe.min();n.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),t.ss.set(e,i)}var Hu=class{constructor(){this.activeTargetIds=JM()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var xg=class{constructor(){this.no=new Hu,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,n,i){this.ro[e]=n}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new Hu,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var Mg=class{io(e){}shutdown(){}};var Ku=class{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){J("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.uo)e(0)}ao(){J("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.uo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Ou=null;function Am(){return Ou===null?Ou=function(){return 268435456+Math.round(2147483648*Math.random())}():Ou++,"0x"+Ou.toString(16)}var kN={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var Ng=class{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}Ao(e){this.Ro=e}onMessage(e){this.Vo=e}close(){this.ho()}send(e){this.lo(e)}mo(){this.Io()}fo(){this.Eo()}po(e){this.Ro(e)}yo(e){this.Vo(e)}};var Ft="WebChannelConnection",Fg=class extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;let i=n.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.wo=i+"://"+n.host,this.So=`projects/${r}/databases/${s}`,this.bo=this.databaseId.database==="(default)"?`project_id=${r}`:`project_id=${r}&database_id=${s}`}get Do(){return!1}Co(n,i,r,s,o){let c=Am(),l=this.vo(n,i.toUriEncodedString());J("RestConnection",`Sending RPC '${n}' ${c}:`,l,r);let u={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(u,s,o),this.Mo(n,l,u,r).then(h=>(J("RestConnection",`Received RPC '${n}' ${c}: `,h),h),h=>{throw Us("RestConnection",`RPC '${n}' ${c} failed with error: `,h,"url: ",l,"request:",r),h})}xo(n,i,r,s,o,c){return this.Co(n,i,r,s,o)}Fo(n,i,r){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Js}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((s,o)=>n[o]=s),r&&r.headers.forEach((s,o)=>n[o]=s)}vo(n,i){let r=kN[n];return`${this.wo}/v1/${i}:${r}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Mo(e,n,i,r){let s=Am();return new Promise((o,c)=>{let l=new bm;l.setWithCredentials(!0),l.listenOnce(Im.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case ja.NO_ERROR:let h=l.getResponseJson();J(Ft,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),o(h);break;case ja.TIMEOUT:J(Ft,`RPC '${e}' ${s} timed out`),c(new K(V.DEADLINE_EXCEEDED,"Request time out"));break;case ja.HTTP_ERROR:let p=l.getStatus();if(J(Ft,`RPC '${e}' ${s} failed with status:`,p,"response text:",l.getResponseText()),p>0){let _=l.getResponseJson();Array.isArray(_)&&(_=_[0]);let C=_?.error;if(C&&C.status&&C.message){let O=function(D){let z=D.toLowerCase().replace(/_/g,"-");return Object.values(V).indexOf(z)>=0?z:V.UNKNOWN}(C.status);c(new K(O,C.message))}else c(new K(V.UNKNOWN,"Server responded with status "+l.getStatus()))}else c(new K(V.UNAVAILABLE,"Connection failed."));break;default:ae()}}finally{J(Ft,`RPC '${e}' ${s} completed.`)}});let u=JSON.stringify(r);J(Ft,`RPC '${e}' ${s} sending request:`,r),l.send(n,"POST",u,i,15)})}Oo(e,n,i){let r=Am(),s=[this.wo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Tm(),c=Cm(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.xmlHttpFactory=new wm({})),this.Fo(l.initMessageHeaders,n,i),l.encodeInitMessageHeaders=!0;let h=s.join("");J(Ft,`Creating RPC '${e}' stream ${r}: ${h}`,l);let p=o.createWebChannel(h,l),_=!1,C=!1,O=new Ng({lo:D=>{C?J(Ft,`Not sending because RPC '${e}' stream ${r} is closed:`,D):(_||(J(Ft,`Opening RPC '${e}' stream ${r} transport.`),p.open(),_=!0),J(Ft,`RPC '${e}' stream ${r} sending:`,D),p.send(D))},ho:()=>p.close()}),F=(D,z,X)=>{D.listen(z,Y=>{try{X(Y)}catch(Z){setTimeout(()=>{throw Z},0)}})};return F(p,ks.EventType.OPEN,()=>{C||(J(Ft,`RPC '${e}' stream ${r} transport opened.`),O.mo())}),F(p,ks.EventType.CLOSE,()=>{C||(C=!0,J(Ft,`RPC '${e}' stream ${r} transport closed`),O.po())}),F(p,ks.EventType.ERROR,D=>{C||(C=!0,Us(Ft,`RPC '${e}' stream ${r} transport errored:`,D),O.po(new K(V.UNAVAILABLE,"The operation could not be completed")))}),F(p,ks.EventType.MESSAGE,D=>{var z;if(!C){let X=D.data[0];Be(!!X);let Y=X,Z=Y.error||((z=Y[0])===null||z===void 0?void 0:z.error);if(Z){J(Ft,`RPC '${e}' stream ${r} received error:`,Z);let Ne=Z.status,le=function(w){let S=lt[w];if(S!==void 0)return VE(S)}(Ne),T=Z.message;le===void 0&&(le=V.INTERNAL,T="Unknown error status: "+Ne+" with message "+Z.message),C=!0,O.po(new K(le,T)),p.close()}else J(Ft,`RPC '${e}' stream ${r} received:`,X),O.yo(X)}}),F(c,Em.STAT_EVENT,D=>{D.stat===Ru.PROXY?J(Ft,`RPC '${e}' stream ${r} detected buffering proxy`):D.stat===Ru.NOPROXY&&J(Ft,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{O.fo()},0),O}};function Pm(){return typeof document<"u"?document:null}function gd(t){return new cg(t,!0)}var Yu=class{constructor(e,n,i=1e3,r=1.5,s=6e4){this.oi=e,this.timerId=n,this.No=i,this.Lo=r,this.Bo=s,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(e){this.cancel();let n=Math.floor(this.ko+this.Uo()),i=Math.max(0,Date.now()-this.Qo),r=Math.max(0,n-i);r>0&&J("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.ko} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.qo=this.oi.enqueueAfterDelay(this.timerId,r,()=>(this.Qo=Date.now(),e())),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){this.qo!==null&&(this.qo.skipDelay(),this.qo=null)}cancel(){this.qo!==null&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}};var Qu=class{constructor(e,n,i,r,s,o,c,l){this.oi=e,this.Go=i,this.zo=r,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=c,this.listener=l,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new Yu(e,n)}Zo(){return this.state===1||this.state===5||this.Xo()}Xo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.e_()}stop(){return g(this,null,function*(){this.Zo()&&(yield this.close(0))})}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&this.Ho===null&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,()=>this.r_()))}i_(e){this.s_(),this.stream.send(e)}r_(){return g(this,null,function*(){if(this.Xo())return this.close(0)})}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}close(e,n){return g(this,null,function*(){this.s_(),this.o_(),this.Yo.cancel(),this.jo++,e!==4?this.Yo.reset():n&&n.code===V.RESOURCE_EXHAUSTED?(yi(n.toString()),yi("Using maximum backoff delay to prevent overloading the backend."),this.Yo.Ko()):n&&n.code===V.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.__(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.Ao(n)})}__(){}auth(){this.state=1;let e=this.a_(this.jo),n=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.jo===n&&this.u_(i,r)},i=>{e(()=>{let r=new K(V.UNKNOWN,"Fetching auth token failed: "+i.message);return this.c_(r)})})}u_(e,n){let i=this.a_(this.jo);this.stream=this.l_(e,n),this.stream.Po(()=>{i(()=>this.listener.Po())}),this.stream.To(()=>{i(()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,()=>(this.Xo()&&(this.state=3),Promise.resolve())),this.listener.To()))}),this.stream.Ao(r=>{i(()=>this.c_(r))}),this.stream.onMessage(r=>{i(()=>this.onMessage(r))})}e_(){this.state=5,this.Yo.$o(()=>g(this,null,function*(){this.state=0,this.start()}))}c_(e){return J("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}a_(e){return n=>{this.oi.enqueueAndForget(()=>this.jo===e?n():(J("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},Vg=class extends Qu{constructor(e,n,i,r,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,r,o),this.serializer=s}l_(e,n){return this.connection.Oo("Listen",e,n)}onMessage(e){this.Yo.reset();let n=fN(this.serializer,e),i=function(s){if(!("targetChange"in s))return fe.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?fe.min():o.readTime?Yn(o.readTime):fe.min()}(e);return this.listener.h_(n,i)}P_(e){let n={};n.database=hg(this.serializer),n.addTarget=function(s,o){let c,l=o.target;if(c=Xm(l)?{documents:gN(s,l)}:{query:_N(s,l)._t},c.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){c.resumeToken=LE(s,o.resumeToken);let u=lg(s,o.expectedCount);u!==null&&(c.expectedCount=u)}else if(o.snapshotVersion.compareTo(fe.min())>0){c.readTime=Gu(s,o.snapshotVersion.toTimestamp());let u=lg(s,o.expectedCount);u!==null&&(c.expectedCount=u)}return c}(this.serializer,e);let i=yN(this.serializer,e);i&&(n.labels=i),this.i_(n)}I_(e){let n={};n.database=hg(this.serializer),n.removeTarget=e,this.i_(n)}},Lg=class extends Qu{constructor(e,n,i,r,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,r,o),this.serializer=s,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(e,n){return this.connection.Oo("Write",e,n)}onMessage(e){if(Be(!!e.streamToken),this.lastStreamToken=e.streamToken,this.T_){this.Yo.reset();let n=mN(e.writeResults,e.commitTime),i=Yn(e.commitTime);return this.listener.A_(i,n)}return Be(!e.writeResults||e.writeResults.length===0),this.T_=!0,this.listener.R_()}V_(){let e={};e.database=hg(this.serializer),this.i_(e)}d_(e){let n={streamToken:this.lastStreamToken,writes:e.map(i=>pN(this.serializer,i))};this.i_(n)}};var Ug=class extends class{}{constructor(e,n,i,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.m_=!1}f_(){if(this.m_)throw new K(V.FAILED_PRECONDITION,"The client has already been terminated.")}Co(e,n,i,r){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Co(e,ug(n,i),r,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===V.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new K(V.UNKNOWN,s.toString())})}xo(e,n,i,r,s){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,c])=>this.connection.xo(e,ug(n,i),r,o,c,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===V.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new K(V.UNKNOWN,o.toString())})}terminate(){this.m_=!0,this.connection.terminate()}},jg=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){this.g_===0&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(e){this.state==="Online"?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.S_("Offline")))}set(e){this.C_(),this.g_=0,e==="Online"&&(this.y_=!1),this.S_(e)}S_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}b_(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(yi(n),this.y_=!1):J("OnlineStateTracker",n)}C_(){this.p_!==null&&(this.p_.cancel(),this.p_=null)}};var Bg=class{constructor(e,n,i,r,s){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=s,this.O_.io(o=>{i.enqueueAndForget(()=>g(this,null,function*(){zr(this)&&(J("RemoteStore","Restarting streams for network reachability change."),yield function(l){return g(this,null,function*(){let u=de(l);u.M_.add(4),yield uc(u),u.N_.set("Unknown"),u.M_.delete(4),yield _d(u)})}(this))}))}),this.N_=new jg(i,r)}};function _d(t){return g(this,null,function*(){if(zr(t))for(let e of t.x_)yield e(!0)})}function uc(t){return g(this,null,function*(){for(let e of t.x_)yield e(!1)})}function HE(t,e){let n=de(t);n.F_.has(e.targetId)||(n.F_.set(e.targetId,e),v_(n)?__(n):Zs(n).Xo()&&g_(n,e))}function m_(t,e){let n=de(t),i=Zs(n);n.F_.delete(e),i.Xo()&&KE(n,e),n.F_.size===0&&(i.Xo()?i.n_():zr(n)&&n.N_.set("Unknown"))}function g_(t,e){if(t.L_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(fe.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Zs(t).P_(e)}function KE(t,e){t.L_.xe(e),Zs(t).I_(e)}function __(t){t.L_=new ag({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.F_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Zs(t).start(),t.N_.w_()}function v_(t){return zr(t)&&!Zs(t).Zo()&&t.F_.size>0}function zr(t){return de(t).M_.size===0}function YE(t){t.L_=void 0}function xN(t){return g(this,null,function*(){t.N_.set("Online")})}function MN(t){return g(this,null,function*(){t.F_.forEach((e,n)=>{g_(t,e)})})}function NN(t,e){return g(this,null,function*(){YE(t),v_(t)?(t.N_.D_(e),__(t)):t.N_.set("Unknown")})}function FN(t,e,n){return g(this,null,function*(){if(t.N_.set("Online"),e instanceof $u&&e.state===2&&e.cause)try{yield function(r,s){return g(this,null,function*(){let o=s.cause;for(let c of s.targetIds)r.F_.has(c)&&(yield r.remoteSyncer.rejectListen(c,o),r.F_.delete(c),r.L_.removeTarget(c))})}(t,e)}catch(i){J("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),yield Xu(t,i)}else if(e instanceof Vs?t.L_.Ke(e):e instanceof zu?t.L_.He(e):t.L_.We(e),!n.isEqual(fe.min()))try{let i=yield WE(t.localStore);n.compareTo(i)>=0&&(yield function(s,o){let c=s.L_.rt(o);return c.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){let h=s.F_.get(u);h&&s.F_.set(u,h.withResumeToken(l.resumeToken,o))}}),c.targetMismatches.forEach((l,u)=>{let h=s.F_.get(l);if(!h)return;s.F_.set(l,h.withResumeToken(qt.EMPTY_BYTE_STRING,h.snapshotVersion)),KE(s,l);let p=new Ja(h.target,l,u,h.sequenceNumber);g_(s,p)}),s.remoteSyncer.applyRemoteEvent(c)}(t,n))}catch(i){J("RemoteStore","Failed to raise snapshot:",i),yield Xu(t,i)}})}function Xu(t,e,n){return g(this,null,function*(){if(!lc(e))throw e;t.M_.add(1),yield uc(t),t.N_.set("Offline"),n||(n=()=>WE(t.localStore)),t.asyncQueue.enqueueRetryable(()=>g(this,null,function*(){J("RemoteStore","Retrying IndexedDB access"),yield n(),t.M_.delete(1),yield _d(t)}))})}function QE(t,e){return e().catch(n=>Xu(t,n,e))}function vd(t){return g(this,null,function*(){let e=de(t),n=tr(e),i=e.v_.length>0?e.v_[e.v_.length-1].batchId:-1;for(;VN(e);)try{let r=yield RN(e.localStore,i);if(r===null){e.v_.length===0&&n.n_();break}i=r.batchId,LN(e,r)}catch(r){yield Xu(e,r)}XE(e)&&JE(e)})}function VN(t){return zr(t)&&t.v_.length<10}function LN(t,e){t.v_.push(e);let n=tr(t);n.Xo()&&n.E_&&n.d_(e.mutations)}function XE(t){return zr(t)&&!tr(t).Zo()&&t.v_.length>0}function JE(t){tr(t).start()}function UN(t){return g(this,null,function*(){tr(t).V_()})}function jN(t){return g(this,null,function*(){let e=tr(t);for(let n of t.v_)e.d_(n.mutations)})}function BN(t,e,n){return g(this,null,function*(){let i=t.v_.shift(),r=ig.from(i,e,n);yield QE(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),yield vd(t)})}function zN(t,e){return g(this,null,function*(){e&&tr(t).E_&&(yield function(i,r){return g(this,null,function*(){if(function(o){return sN(o)&&o!==V.ABORTED}(r.code)){let s=i.v_.shift();tr(i).t_(),yield QE(i,()=>i.remoteSyncer.rejectFailedWrite(s.batchId,r)),yield vd(i)}})}(t,e)),XE(t)&&JE(t)})}function iE(t,e){return g(this,null,function*(){let n=de(t);n.asyncQueue.verifyOperationInProgress(),J("RemoteStore","RemoteStore received new credentials");let i=zr(n);n.M_.add(3),yield uc(n),i&&n.N_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.M_.delete(3),yield _d(n)})}function $N(t,e){return g(this,null,function*(){let n=de(t);e?(n.M_.delete(2),yield _d(n)):e||(n.M_.add(2),yield uc(n),n.N_.set("Unknown"))})}function Zs(t){return t.B_||(t.B_=function(n,i,r){let s=de(n);return s.f_(),new Vg(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(t.datastore,t.asyncQueue,{Po:xN.bind(null,t),To:MN.bind(null,t),Ao:NN.bind(null,t),h_:FN.bind(null,t)}),t.x_.push(e=>g(this,null,function*(){e?(t.B_.t_(),v_(t)?__(t):t.N_.set("Unknown")):(yield t.B_.stop(),YE(t))}))),t.B_}function tr(t){return t.k_||(t.k_=function(n,i,r){let s=de(n);return s.f_(),new Lg(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(t.datastore,t.asyncQueue,{Po:()=>Promise.resolve(),To:UN.bind(null,t),Ao:zN.bind(null,t),R_:jN.bind(null,t),A_:BN.bind(null,t)}),t.x_.push(e=>g(this,null,function*(){e?(t.k_.t_(),yield vd(t)):(yield t.k_.stop(),t.v_.length>0&&(J("RemoteStore",`Stopping write stream with ${t.v_.length} pending writes`),t.v_=[]))}))),t.k_}var zg=class t{constructor(e,n,i,r,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new An,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,r,s){let o=Date.now()+i,c=new t(e,n,o,r,s);return c.start(i),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new K(V.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function y_(t,e){if(yi("AsyncQueue",`${e}: ${t}`),lc(t))return new K(V.UNAVAILABLE,`${e}: ${t}`);throw t}var Ju=class t{constructor(e){this.comparator=e?(n,i)=>e(n,i)||re.comparator(n.key,i.key):(n,i)=>re.comparator(n.key,i.key),this.keyedMap=za(),this.sortedSet=new nt(this.comparator)}static emptySet(e){return new t(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){let r=n.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let i=new t;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}};var Zu=class{constructor(){this.q_=new nt(re.comparator)}track(e){let n=e.doc.key,i=this.q_.get(n);i?e.type!==0&&i.type===3?this.q_=this.q_.insert(n,e):e.type===3&&i.type!==1?this.q_=this.q_.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.q_=this.q_.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.q_=this.q_.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.q_=this.q_.remove(n):e.type===1&&i.type===2?this.q_=this.q_.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.q_=this.q_.insert(n,{type:2,doc:e.doc}):ae():this.q_=this.q_.insert(n,e)}Q_(){let e=[];return this.q_.inorderTraversal((n,i)=>{e.push(i)}),e}},Ys=class t{constructor(e,n,i,r,s,o,c,l,u){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=c,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,n,i,r,s){let o=[];return n.forEach(c=>{o.push({type:0,doc:c})}),new t(e,n,Ju.emptySet(n),o,i,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&pd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}};var $g=class{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(e=>e.G_())}},qg=class{constructor(){this.queries=new er(e=>CE(e),pd),this.onlineState="Unknown",this.z_=new Set}};function b_(t,e){return g(this,null,function*(){let n=de(t),i=3,r=e.query,s=n.queries.get(r);s?!s.W_()&&e.G_()&&(i=2):(s=new $g,i=e.G_()?0:1);try{switch(i){case 0:s.K_=yield n.onListen(r,!0);break;case 1:s.K_=yield n.onListen(r,!1);break;case 2:yield n.onFirstRemoteStoreListen(r)}}catch(o){let c=y_(o,`Initialization of query '${xs(e.query)}' failed`);return void e.onError(c)}n.queries.set(r,s),s.U_.push(e),e.j_(n.onlineState),s.K_&&e.H_(s.K_)&&I_(n)})}function w_(t,e){return g(this,null,function*(){let n=de(t),i=e.query,r=3,s=n.queries.get(i);if(s){let o=s.U_.indexOf(e);o>=0&&(s.U_.splice(o,1),s.U_.length===0?r=e.G_()?0:1:!s.W_()&&e.G_()&&(r=2))}switch(r){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}})}function qN(t,e){let n=de(t),i=!1;for(let r of e){let s=r.query,o=n.queries.get(s);if(o){for(let c of o.U_)c.H_(r)&&(i=!0);o.K_=r}}i&&I_(n)}function GN(t,e,n){let i=de(t),r=i.queries.get(e);if(r)for(let s of r.U_)s.onError(n);i.queries.delete(e)}function I_(t){t.z_.forEach(e=>{e.next()})}var Gg,rE;(rE=Gg||(Gg={})).J_="default",rE.Cache="cache";var tc=class{constructor(e,n,i){this.query=e,this.Y_=n,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=i||{}}H_(e){if(!this.options.includeMetadataChanges){let i=[];for(let r of e.docChanges)r.type!==3&&i.push(r);e=new Ys(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Z_?this.ea(e)&&(this.Y_.next(e),n=!0):this.ta(e,this.onlineState)&&(this.na(e),n=!0),this.X_=e,n}onError(e){this.Y_.error(e)}j_(e){this.onlineState=e;let n=!1;return this.X_&&!this.Z_&&this.ta(this.X_,e)&&(this.na(this.X_),n=!0),n}ta(e,n){if(!e.fromCache||!this.G_())return!0;let i=n!=="Offline";return(!this.options.ra||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ea(e){if(e.docChanges.length>0)return!0;let n=this.X_&&this.X_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}na(e){e=Ys.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Z_=!0,this.Y_.next(e)}G_(){return this.options.source!==Gg.Cache}};var ed=class{constructor(e){this.key=e}},td=class{constructor(e){this.key=e}},Wg=class{constructor(e,n){this.query=e,this.la=n,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=Ee(),this.mutatedKeys=Ee(),this.Ia=TE(e),this.Ta=new Ju(this.Ia)}get Ea(){return this.la}da(e,n){let i=n?n.Aa:new Zu,r=n?n.Ta:this.Ta,s=n?n.mutatedKeys:this.mutatedKeys,o=r,c=!1,l=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,u=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((h,p)=>{let _=r.get(h),C=md(this.query,p)?p:null,O=!!_&&this.mutatedKeys.has(_.key),F=!!C&&(C.hasLocalMutations||this.mutatedKeys.has(C.key)&&C.hasCommittedMutations),D=!1;_&&C?_.data.isEqual(C.data)?O!==F&&(i.track({type:3,doc:C}),D=!0):this.Ra(_,C)||(i.track({type:2,doc:C}),D=!0,(l&&this.Ia(C,l)>0||u&&this.Ia(C,u)<0)&&(c=!0)):!_&&C?(i.track({type:0,doc:C}),D=!0):_&&!C&&(i.track({type:1,doc:_}),D=!0,(l||u)&&(c=!0)),D&&(C?(o=o.add(C),s=F?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),i.track({type:1,doc:h})}return{Ta:o,Aa:i,Xi:c,mutatedKeys:s}}Ra(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,r){let s=this.Ta;this.Ta=e.Ta,this.mutatedKeys=e.mutatedKeys;let o=e.Aa.Q_();o.sort((h,p)=>function(C,O){let F=D=>{switch(D){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ae()}};return F(C)-F(O)}(h.type,p.type)||this.Ia(h.doc,p.doc)),this.Va(i),r=r!=null&&r;let c=n&&!r?this.ma():[],l=this.Pa.size===0&&this.current&&!r?1:0,u=l!==this.ha;return this.ha=l,o.length!==0||u?{snapshot:new Ys(this.query,e.Ta,s,o,e.mutatedKeys,l===0,u,!1,!!i&&i.resumeToken.approximateByteSize()>0),fa:c}:{fa:c}}j_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new Zu,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(e){return!this.la.has(e)&&!!this.Ta.has(e)&&!this.Ta.get(e).hasLocalMutations}Va(e){e&&(e.addedDocuments.forEach(n=>this.la=this.la.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.la=this.la.delete(n)),this.current=e.current)}ma(){if(!this.current)return[];let e=this.Pa;this.Pa=Ee(),this.Ta.forEach(i=>{this.ga(i.key)&&(this.Pa=this.Pa.add(i.key))});let n=[];return e.forEach(i=>{this.Pa.has(i)||n.push(new td(i))}),this.Pa.forEach(i=>{e.has(i)||n.push(new ed(i))}),n}pa(e){this.la=e.hs,this.Pa=Ee();let n=this.da(e.documents);return this.applyChanges(n,!0)}ya(){return Ys.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,this.ha===0,this.hasCachedResults)}},Hg=class{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}},Kg=class{constructor(e){this.key=e,this.wa=!1}},Yg=class{constructor(e,n,i,r,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Sa={},this.ba=new er(c=>CE(c),pd),this.Da=new Map,this.Ca=new Set,this.va=new nt(re.comparator),this.Fa=new Map,this.Ma=new ec,this.xa={},this.Oa=new Map,this.Na=Za.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return this.La===!0}};function WN(t,e,n=!0){return g(this,null,function*(){let i=rC(t),r,s=i.ba.get(e);return s?(i.sharedClientState.addLocalQueryTarget(s.targetId),r=s.view.ya()):r=yield ZE(i,e,n,!0),r})}function HN(t,e){return g(this,null,function*(){let n=rC(t);yield ZE(n,e,!0,!1)})}function ZE(t,e,n,i){return g(this,null,function*(){let r=yield DN(t.localStore,Kn(e)),s=r.targetId,o=n?t.sharedClientState.addLocalQueryTarget(s):"not-current",c;return i&&(c=yield KN(t,e,s,o==="current",r.resumeToken)),t.isPrimaryClient&&n&&HE(t.remoteStore,r),c})}function KN(t,e,n,i,r){return g(this,null,function*(){t.Ba=(p,_,C)=>function(F,D,z,X){return g(this,null,function*(){let Y=D.view.da(z);Y.Xi&&(Y=yield nE(F.localStore,D.query,!1).then(({documents:T})=>D.view.da(T,Y)));let Z=X&&X.targetChanges.get(D.targetId),Ne=X&&X.targetMismatches.get(D.targetId)!=null,le=D.view.applyChanges(Y,F.isPrimaryClient,Z,Ne);return oE(F,D.targetId,le.fa),le.snapshot})}(t,p,_,C);let s=yield nE(t.localStore,e,!0),o=new Wg(e,s.hs),c=o.da(s.documents),l=Xa.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",r),u=o.applyChanges(c,t.isPrimaryClient,l);oE(t,n,u.fa);let h=new Hg(e,n,o);return t.ba.set(e,h),t.Da.has(n)?t.Da.get(n).push(e):t.Da.set(n,[e]),u.snapshot})}function YN(t,e,n){return g(this,null,function*(){let i=de(t),r=i.ba.get(e),s=i.Da.get(r.targetId);if(s.length>1)return i.Da.set(r.targetId,s.filter(o=>!pd(o,e))),void i.ba.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||(yield kg(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),n&&m_(i.remoteStore,r.targetId),Qg(i,r.targetId)}).catch(cc))):(Qg(i,r.targetId),yield kg(i.localStore,r.targetId,!0))})}function QN(t,e){return g(this,null,function*(){let n=de(t),i=n.ba.get(e),r=n.Da.get(i.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),m_(n.remoteStore,i.targetId))})}function XN(t,e,n){return g(this,null,function*(){let i=rF(t);try{let r=yield function(o,c){let l=de(o),u=Pt.now(),h=c.reduce((C,O)=>C.add(O.key),Ee()),p,_;return l.persistence.runTransaction("Locally write mutations","readwrite",C=>{let O=wi(),F=Ee();return l.os.getEntries(C,h).next(D=>{O=D,O.forEach((z,X)=>{X.isValidDocument()||(F=F.add(z))})}).next(()=>l.localDocuments.getOverlayedDocuments(C,O)).next(D=>{p=D;let z=[];for(let X of c){let Y=rN(X,p.get(X.key).overlayedDocument);Y!=null&&z.push(new Xn(X.key,Y,_E(Y.value.mapValue),vi.exists(!0)))}return l.mutationQueue.addMutationBatch(C,u,z,c)}).next(D=>{_=D;let z=D.applyToLocalDocumentSet(p,F);return l.documentOverlayCache.saveOverlays(C,D.batchId,z)})}).then(()=>({batchId:_.batchId,changes:AE(p)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(o,c,l){let u=o.xa[o.currentUser.toKey()];u||(u=new nt(Ae)),u=u.insert(c,l),o.xa[o.currentUser.toKey()]=u}(i,r.batchId,n),yield dc(i,r.changes),yield vd(i.remoteStore)}catch(r){let s=y_(r,"Failed to persist write");n.reject(s)}})}function eC(t,e){return g(this,null,function*(){let n=de(t);try{let i=yield AN(n.localStore,e);e.targetChanges.forEach((r,s)=>{let o=n.Fa.get(s);o&&(Be(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?o.wa=!0:r.modifiedDocuments.size>0?Be(o.wa):r.removedDocuments.size>0&&(Be(o.wa),o.wa=!1))}),yield dc(n,i,e)}catch(i){yield cc(i)}})}function sE(t,e,n){let i=de(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){let r=[];i.ba.forEach((s,o)=>{let c=o.view.j_(e);c.snapshot&&r.push(c.snapshot)}),function(o,c){let l=de(o);l.onlineState=c;let u=!1;l.queries.forEach((h,p)=>{for(let _ of p.U_)_.j_(c)&&(u=!0)}),u&&I_(l)}(i.eventManager,e),r.length&&i.Sa.h_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}function JN(t,e,n){return g(this,null,function*(){let i=de(t);i.sharedClientState.updateQueryState(e,"rejected",n);let r=i.Fa.get(e),s=r&&r.key;if(s){let o=new nt(re.comparator);o=o.insert(s,Pn.newNoDocument(s,fe.min()));let c=Ee().add(s),l=new Bu(fe.min(),new Map,new nt(Ae),o,c);yield eC(i,l),i.va=i.va.remove(s),i.Fa.delete(e),E_(i)}else yield kg(i.localStore,e,!1).then(()=>Qg(i,e,n)).catch(cc)})}function ZN(t,e){return g(this,null,function*(){let n=de(t),i=e.batch.batchId;try{let r=yield SN(n.localStore,e);nC(n,i,null),tC(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),yield dc(n,r)}catch(r){yield cc(r)}})}function eF(t,e,n){return g(this,null,function*(){let i=de(t);try{let r=yield function(o,c){let l=de(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let h;return l.mutationQueue.lookupMutationBatch(u,c).next(p=>(Be(p!==null),h=p.keys(),l.mutationQueue.removeMutationBatch(u,p))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,h,c)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,h)).next(()=>l.localDocuments.getDocuments(u,h))})}(i.localStore,e);nC(i,e,n),tC(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),yield dc(i,r)}catch(r){yield cc(r)}})}function tC(t,e){(t.Oa.get(e)||[]).forEach(n=>{n.resolve()}),t.Oa.delete(e)}function nC(t,e,n){let i=de(t),r=i.xa[i.currentUser.toKey()];if(r){let s=r.get(e);s&&(n?s.reject(n):s.resolve(),r=r.remove(e)),i.xa[i.currentUser.toKey()]=r}}function Qg(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let i of t.Da.get(e))t.ba.delete(i),n&&t.Sa.ka(i,n);t.Da.delete(e),t.isPrimaryClient&&t.Ma.Vr(e).forEach(i=>{t.Ma.containsKey(i)||iC(t,i)})}function iC(t,e){t.Ca.delete(e.path.canonicalString());let n=t.va.get(e);n!==null&&(m_(t.remoteStore,n),t.va=t.va.remove(e),t.Fa.delete(n),E_(t))}function oE(t,e,n){for(let i of n)i instanceof ed?(t.Ma.addReference(i.key,e),tF(t,i)):i instanceof td?(J("SyncEngine","Document no longer in limbo: "+i.key),t.Ma.removeReference(i.key,e),t.Ma.containsKey(i.key)||iC(t,i.key)):ae()}function tF(t,e){let n=e.key,i=n.path.canonicalString();t.va.get(n)||t.Ca.has(i)||(J("SyncEngine","New document in limbo: "+n),t.Ca.add(i),E_(t))}function E_(t){for(;t.Ca.size>0&&t.va.size<t.maxConcurrentLimboResolutions;){let e=t.Ca.values().next().value;t.Ca.delete(e);let n=new re(Ye.fromString(e)),i=t.Na.next();t.Fa.set(i,new Kg(n)),t.va=t.va.insert(n,i),HE(t.remoteStore,new Ja(Kn(fd(n.path)),i,"TargetPurposeLimboResolution",pE.oe))}}function dc(t,e,n){return g(this,null,function*(){let i=de(t),r=[],s=[],o=[];i.ba.isEmpty()||(i.ba.forEach((c,l)=>{o.push(i.Ba(l,e,n).then(u=>{var h;if((u||n)&&i.isPrimaryClient){let p=u?!u.fromCache:(h=n?.targetChanges.get(l.targetId))===null||h===void 0?void 0:h.current;i.sharedClientState.updateQueryState(l.targetId,p?"current":"not-current")}if(u){r.push(u);let p=Pg.Ki(l.targetId,u);s.push(p)}}))}),yield Promise.all(o),i.Sa.h_(r),yield function(l,u){return g(this,null,function*(){let h=de(l);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>B.forEach(u,_=>B.forEach(_.qi,C=>h.persistence.referenceDelegate.addReference(p,_.targetId,C)).next(()=>B.forEach(_.Qi,C=>h.persistence.referenceDelegate.removeReference(p,_.targetId,C)))))}catch(p){if(!lc(p))throw p;J("LocalStore","Failed to update sequence numbers: "+p)}for(let p of u){let _=p.targetId;if(!p.fromCache){let C=h.ns.get(_),O=C.snapshotVersion,F=C.withLastLimboFreeSnapshotVersion(O);h.ns=h.ns.insert(_,F)}}})}(i.localStore,s))})}function nF(t,e){return g(this,null,function*(){let n=de(t);if(!n.currentUser.isEqual(e)){J("SyncEngine","User change. New user:",e.toKey());let i=yield GE(n.localStore,e);n.currentUser=e,function(s,o){s.Oa.forEach(c=>{c.forEach(l=>{l.reject(new K(V.CANCELLED,o))})}),s.Oa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),yield dc(n,i.us)}})}function iF(t,e){let n=de(t),i=n.Fa.get(e);if(i&&i.wa)return Ee().add(i.key);{let r=Ee(),s=n.Da.get(e);if(!s)return r;for(let o of s){let c=n.ba.get(o);r=r.unionWith(c.view.Ea)}return r}}function rC(t){let e=de(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=eC.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=iF.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=JN.bind(null,e),e.Sa.h_=qN.bind(null,e.eventManager),e.Sa.ka=GN.bind(null,e.eventManager),e}function rF(t){let e=de(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=ZN.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=eF.bind(null,e),e}var nd=class{constructor(){this.synchronizeTabs=!1}initialize(e){return g(this,null,function*(){this.serializer=gd(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),yield this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)})}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return TN(this.persistence,new Dg,e.initialUser,this.serializer)}createPersistence(e){return new Tg(Ag.Hr,this.serializer)}createSharedClientState(e){return new xg}terminate(){return g(this,null,function*(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var Xg=class{initialize(e,n){return g(this,null,function*(){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>sE(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=nF.bind(null,this.syncEngine),yield $N(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(e){return function(){return new qg}()}createDatastore(e){let n=gd(e.databaseInfo.databaseId),i=function(s){return new Fg(s)}(e.databaseInfo);return function(s,o,c,l){return new Ug(s,o,c,l)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return function(i,r,s,o,c){return new Bg(i,r,s,o,c)}(this.localStore,this.datastore,e.asyncQueue,n=>sE(this.syncEngine,n,0),function(){return Ku.D()?new Ku:new Mg}())}createSyncEngine(e,n){return function(r,s,o,c,l,u,h){let p=new Yg(r,s,o,c,l,u);return h&&(p.La=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return g(this,null,function*(){var e;yield function(i){return g(this,null,function*(){let r=de(i);J("RemoteStore","RemoteStore shutting down."),r.M_.add(5),yield uc(r),r.O_.shutdown(),r.N_.set("Unknown")})}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate()})}};var nc=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ka(this.observer.next,e)}error(e){this.observer.error?this.Ka(this.observer.error,e):yi("Uncaught Error in snapshot listener:",e.toString())}$a(){this.muted=!0}Ka(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}};var Jg=class{constructor(e,n,i,r){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=bt.UNAUTHENTICATED,this.clientId=Nu.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,s=>g(this,null,function*(){J("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(i,s=>(J("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new K(V.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new An;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>g(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let i=y_(n,"Failed to shutdown persistence");e.reject(i)}})),e.promise}};function Rm(t,e){return g(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),J("FirestoreClient","Initializing OfflineComponentProvider");let n=t.configuration;yield e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(r=>g(this,null,function*(){i.isEqual(r)||(yield GE(e.localStore,r),i=r)})),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e})}function aE(t,e){return g(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield oF(t);J("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(i=>iE(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,r)=>iE(e.remoteStore,r)),t._onlineComponents=e})}function sF(t){return t.name==="FirebaseError"?t.code===V.FAILED_PRECONDITION||t.code===V.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}function oF(t){return g(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){J("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Rm(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!sF(n))throw n;Us("Error using user provided cache. Falling back to memory cache: "+n),yield Rm(t,new nd)}}else J("FirestoreClient","Using default OfflineComponentProvider"),yield Rm(t,new nd);return t._offlineComponents})}function sC(t){return g(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(J("FirestoreClient","Using user provided OnlineComponentProvider"),yield aE(t,t._uninitializedComponentsProvider._online)):(J("FirestoreClient","Using default OnlineComponentProvider"),yield aE(t,new Xg))),t._onlineComponents})}function aF(t){return sC(t).then(e=>e.syncEngine)}function id(t){return g(this,null,function*(){let e=yield sC(t),n=e.eventManager;return n.onListen=WN.bind(null,e.syncEngine),n.onUnlisten=YN.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=HN.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=QN.bind(null,e.syncEngine),n})}function cF(t,e,n={}){let i=new An;return t.asyncQueue.enqueueAndForget(()=>g(this,null,function*(){return function(s,o,c,l,u){let h=new nc({next:_=>{o.enqueueAndForget(()=>w_(s,p));let C=_.docs.has(c);!C&&_.fromCache?u.reject(new K(V.UNAVAILABLE,"Failed to get document because the client is offline.")):C&&_.fromCache&&l&&l.source==="server"?u.reject(new K(V.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(_)},error:_=>u.reject(_)}),p=new tc(fd(c.path),h,{includeMetadataChanges:!0,ra:!0});return b_(s,p)}(yield id(t),t.asyncQueue,e,n,i)})),i.promise}function lF(t,e,n={}){let i=new An;return t.asyncQueue.enqueueAndForget(()=>g(this,null,function*(){return function(s,o,c,l,u){let h=new nc({next:_=>{o.enqueueAndForget(()=>w_(s,p)),_.fromCache&&l.source==="server"?u.reject(new K(V.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(_)},error:_=>u.reject(_)}),p=new tc(c,h,{includeMetadataChanges:!0,ra:!0});return b_(s,p)}(yield id(t),t.asyncQueue,e,n,i)})),i.promise}function oC(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var cE=new Map;function aC(t,e,n){if(!n)throw new K(V.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function uF(t,e,n,i){if(e===!0&&i===!0)throw new K(V.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function lE(t){if(!re.isDocumentKey(t))throw new K(V.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function uE(t){if(re.isDocumentKey(t))throw new K(V.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function yd(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ae()}function on(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new K(V.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=yd(t);throw new K(V.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}var rd=class{constructor(e){var n,i;if(e.host===void 0){if(e.ssl!==void 0)throw new K(V.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new K(V.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}uF("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=oC((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new K(V.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new K(V.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new K(V.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Qs=class{constructor(e,n,i,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new rd({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new K(V.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new K(V.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new rd(e),e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new Dm;switch(i.type){case"firstParty":return new Mm(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new K(V.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let i=cE.get(n);i&&(J("ComponentProvider","Removing Datastore"),cE.delete(n),i.terminate())}(this),Promise.resolve()}};function cC(t,e,n,i={}){var r;let s=(t=on(t,Qs))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Us("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),i.mockUserToken){let c,l;if(typeof i.mockUserToken=="string")c=i.mockUserToken,l=bt.MOCK_USER;else{c=Ll(i.mockUserToken,(r=t._app)===null||r===void 0?void 0:r.options.projectId);let u=i.mockUserToken.sub||i.mockUserToken.user_id;if(!u)throw new K(V.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new bt(u)}t._authCredentials=new Om(new Mu(c,l))}}var jr=class t{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},Lt=class t{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ji(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}},Ji=class t extends jr{constructor(e,n,i){super(e,n,fd(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Lt(this.firestore,null,new re(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function lC(t,e,...n){if(t=Re(t),aC("collection","path",e),t instanceof Qs){let i=Ye.fromString(e,...n);return uE(i),new Ji(t,null,i)}{if(!(t instanceof Lt||t instanceof Ji))throw new K(V.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let i=t._path.child(Ye.fromString(e,...n));return uE(i),new Ji(t.firestore,null,i)}}function uC(t,e,...n){if(t=Re(t),arguments.length===1&&(e=Nu.newId()),aC("doc","path",e),t instanceof Qs){let i=Ye.fromString(e,...n);return lE(i),new Lt(t,null,new re(i))}{if(!(t instanceof Lt||t instanceof Ji))throw new K(V.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let i=t._path.child(Ye.fromString(e,...n));return lE(i),new Lt(t.firestore,t instanceof Ji?t.converter:null,new re(i))}}var Zg=class{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new Yu(this,"async_queue_retry"),this.hu=()=>{let n=Pm();n&&J("AsyncQueue","Visibility state changed to "+n.visibilityState),this.Yo.Wo()};let e=Pm();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Pu(),this.Iu(e)}enterRestrictedMode(e){if(!this.ou){this.ou=!0,this.cu=e||!1;let n=Pm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.hu)}}enqueue(e){if(this.Pu(),this.ou)return new Promise(()=>{});let n=new An;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.su.push(e),this.Tu()))}Tu(){return g(this,null,function*(){if(this.su.length!==0){try{yield this.su[0](),this.su.shift(),this.Yo.reset()}catch(e){if(!lc(e))throw e;J("AsyncQueue","Operation failed with retryable error: "+e)}this.su.length>0&&this.Yo.$o(()=>this.Tu())}})}Iu(e){let n=this.iu.then(()=>(this.uu=!0,e().catch(i=>{this.au=i,this.uu=!1;let r=function(o){let c=o.message||"";return o.stack&&(c=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),c}(i);throw yi("INTERNAL UNHANDLED ERROR: ",r),i}).then(i=>(this.uu=!1,i))));return this.iu=n,n}enqueueAfterDelay(e,n,i){this.Pu(),this.lu.indexOf(e)>-1&&(n=0);let r=zg.createAndSchedule(this,e,n,i,s=>this.Eu(s));return this._u.push(r),r}Pu(){this.au&&ae()}verifyOperationInProgress(){}du(){return g(this,null,function*(){let e;do e=this.iu,yield e;while(e!==this.iu)})}Au(e){for(let n of this._u)if(n.timerId===e)return!0;return!1}Ru(e){return this.du().then(()=>{this._u.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(let n of this._u)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.du()})}Vu(e){this.lu.push(e)}Eu(e){let n=this._u.indexOf(e);this._u.splice(n,1)}};function dE(t){return function(n,i){if(typeof n!="object"||n===null)return!1;let r=n;for(let s of i)if(s in r&&typeof r[s]=="function")return!0;return!1}(t,["next","error","complete"])}var Jn=class extends Qs{constructor(e,n,i,r){super(e,n,i,r),this.type="firestore",this._queue=function(){return new Zg}(),this._persistenceKey=r?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||hC(this),this._firestoreClient.terminate()}};function dC(t,e){let n=typeof t=="object"?t:en(),i=typeof t=="string"?t:e||"(default)",r=Ht(n,"firestore").getImmediate({identifier:i});if(!r._initialized){let s=bs("firestore");s&&cC(r,...s)}return r}function bd(t){return t._firestoreClient||hC(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function hC(t){var e,n,i;let r=t._freezeSettings(),s=function(c,l,u,h){return new Um(c,l,u,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,oC(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,r);t._firestoreClient=new Jg(t._authCredentials,t._appCheckCredentials,t._queue,s),!((n=r.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:r.localCache.kind,_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider})}var ic=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(qt.fromBase64String(e))}catch(n){throw new K(V.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(qt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var Xs=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new K(V.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new sn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var rc=class{constructor(e){this._methodName=e}};var sc=class{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new K(V.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new K(V.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ae(this._lat,e._lat)||Ae(this._long,e._long)}};var dF=/^__.*__$/,e_=class{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new Xn(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ur(e,this.data,n,this.fieldTransforms)}},sd=class{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new Xn(e,this.data,this.fieldMask,n,this.fieldTransforms)}};function fC(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ae()}}var t_=class t{constructor(e,n,i,r,s,o){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,s===void 0&&this.mu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(e){var n;let i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.gu({path:i,yu:!1});return r.wu(e),r}Su(e){var n;let i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.gu({path:i,yu:!1});return r.mu(),r}bu(e){return this.gu({path:void 0,yu:!0})}Du(e){return ad(e,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}mu(){if(this.path)for(let e=0;e<this.path.length;e++)this.wu(this.path.get(e))}wu(e){if(e.length===0)throw this.Du("Document fields must not be empty");if(fC(this.fu)&&dF.test(e))throw this.Du('Document fields cannot begin and end with "__"')}},n_=class{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||gd(e)}Fu(e,n,i,r=!1){return new t_({fu:e,methodName:n,vu:i,path:sn.emptyPath(),yu:!1,Cu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function C_(t){let e=t._freezeSettings(),n=gd(t._databaseId);return new n_(t._databaseId,!!e.ignoreUndefinedProperties,n)}function hF(t,e,n,i,r,s={}){let o=t.Fu(s.merge||s.mergeFields?2:0,e,n,r);T_("Data must be an object, but it was:",o,i);let c=pC(i,o),l,u;if(s.merge)l=new gn(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){let h=[];for(let p of s.mergeFields){let _=i_(e,p,n);if(!o.contains(_))throw new K(V.INVALID_ARGUMENT,`Field '${_}' is specified in your field mask but missing from your input data.`);gC(h,_)||h.push(_)}l=new gn(h),u=o.fieldTransforms.filter(p=>l.covers(p.field))}else l=null,u=o.fieldTransforms;return new e_(new rn(c),l,u)}var od=class t extends rc{_toFieldTransform(e){if(e.fu!==2)throw e.fu===1?e.Du(`${this._methodName}() can only appear at the top level of your update data`):e.Du(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof t}};function fF(t,e,n,i){let r=t.Fu(1,e,n);T_("Data must be an object, but it was:",r,i);let s=[],o=rn.empty();Br(i,(l,u)=>{let h=S_(e,l,n);u=Re(u);let p=r.Su(h);if(u instanceof od)s.push(h);else{let _=hc(u,p);_!=null&&(s.push(h),o.set(h,_))}});let c=new gn(s);return new sd(o,c,r.fieldTransforms)}function pF(t,e,n,i,r,s){let o=t.Fu(1,e,n),c=[i_(e,i,n)],l=[r];if(s.length%2!=0)throw new K(V.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let _=0;_<s.length;_+=2)c.push(i_(e,s[_])),l.push(s[_+1]);let u=[],h=rn.empty();for(let _=c.length-1;_>=0;--_)if(!gC(u,c[_])){let C=c[_],O=l[_];O=Re(O);let F=o.Su(C);if(O instanceof od)u.push(C);else{let D=hc(O,F);D!=null&&(u.push(C),h.set(C,D))}}let p=new gn(u);return new sd(h,p,o.fieldTransforms)}function mF(t,e,n,i=!1){return hc(n,t.Fu(i?4:3,e))}function hc(t,e){if(mC(t=Re(t)))return T_("Unsupported field value:",e,t),pC(t,e);if(t instanceof rc)return function(i,r){if(!fC(r.fu))throw r.Du(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Du(`${i._methodName}() is not currently supported inside arrays`);let s=i._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.yu&&e.fu!==4)throw e.Du("Nested arrays are not supported");return function(i,r){let s=[],o=0;for(let c of i){let l=hc(c,r.bu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(i,r){if((i=Re(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return ZM(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){let s=Pt.fromDate(i);return{timestampValue:Gu(r.serializer,s)}}if(i instanceof Pt){let s=new Pt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Gu(r.serializer,s)}}if(i instanceof sc)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof ic)return{bytesValue:LE(r.serializer,i._byteString)};if(i instanceof Lt){let s=r.databaseId,o=i.firestore._databaseId;if(!o.isEqual(s))throw r.Du(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:p_(i.firestore._databaseId||r.databaseId,i._key.path)}}throw r.Du(`Unsupported field value: ${yd(i)}`)}(t,e)}function pC(t,e){let n={};return mE(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Br(t,(i,r)=>{let s=hc(r,e.pu(i));s!=null&&(n[i]=s)}),{mapValue:{fields:n}}}function mC(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Pt||t instanceof sc||t instanceof ic||t instanceof Lt||t instanceof rc)}function T_(t,e,n){if(!mC(n)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(n)){let i=yd(n);throw i==="an object"?e.Du(t+" a custom object"):e.Du(t+" "+i)}}function i_(t,e,n){if((e=Re(e))instanceof Xs)return e._internalPath;if(typeof e=="string")return S_(t,e);throw ad("Field path arguments must be of type string or ",t,!1,void 0,n)}var gF=new RegExp("[~\\*/\\[\\]]");function S_(t,e,n){if(e.search(gF)>=0)throw ad(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Xs(...e.split("."))._internalPath}catch{throw ad(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function ad(t,e,n,i,r){let s=i&&!i.isEmpty(),o=r!==void 0,c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${i}`),o&&(l+=` in document ${r}`),l+=")"),new K(V.INVALID_ARGUMENT,c+t+l)}function gC(t,e){return t.some(n=>n.isEqual(e))}var cd=class{constructor(e,n,i,r,s){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Lt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new r_(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(A_("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},r_=class extends cd{data(){return super.data()}};function A_(t,e){return typeof e=="string"?S_(t,e):e instanceof Xs?e._internalPath:e._delegate._internalPath}function _C(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new K(V.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var oc=class{},s_=class extends oc{};function vC(t,e,...n){let i=[];e instanceof oc&&i.push(e),i=i.concat(n),function(s){let o=s.filter(l=>l instanceof o_).length,c=s.filter(l=>l instanceof ld).length;if(o>1||o>0&&c>0)throw new K(V.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(let r of i)t=r._apply(t);return t}var ld=class t extends s_{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new t(e,n,i)}_apply(e){let n=this._parse(e);return bC(e._query,n),new jr(e.firestore,e.converter,Jm(e._query,n))}_parse(e){let n=C_(e.firestore);return function(s,o,c,l,u,h,p){let _;if(u.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new K(V.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){fE(p,h);let C=[];for(let O of p)C.push(hE(l,s,O));_={arrayValue:{values:C}}}else _=hE(l,s,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||fE(p,h),_=mF(c,o,p,h==="in"||h==="not-in");return dt.create(u,h,_)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}};function yC(t,e,n){let i=e,r=A_("where",t);return ld._create(r,i,n)}var o_=class t extends oc{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new t(e,n)}_parse(e){let n=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return n.length===1?n[0]:Rn.create(n,this._getOperator())}_apply(e){let n=this._parse(e);return n.getFilters().length===0?e:(function(r,s){let o=r,c=s.getFlattenedFilters();for(let l of c)bC(o,l),o=Jm(o,l)}(e._query,n),new jr(e.firestore,e.converter,Jm(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};function hE(t,e,n){if(typeof(n=Re(n))=="string"){if(n==="")throw new K(V.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!EE(e)&&n.indexOf("/")!==-1)throw new K(V.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);let i=e.path.child(Ye.fromString(n));if(!re.isDocumentKey(i))throw new K(V.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return UI(t,new re(i))}if(n instanceof Lt)return UI(t,n._key);throw new K(V.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${yd(n)}.`)}function fE(t,e){if(!Array.isArray(t)||t.length===0)throw new K(V.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function bC(t,e){let n=function(r,s){for(let o of r)for(let c of o.getFlattenedFilters())if(s.indexOf(c.op)>=0)return c.op;return null}(t.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new K(V.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new K(V.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}var a_=class{convertValue(e,n="none"){switch(Nr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return tt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Zi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw ae()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let i={};return Br(e,(r,s)=>{i[r]=this.convertValue(s,n)}),i}convertGeoPoint(e){return new sc(tt(e.latitude),tt(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":let i=u_(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(Ka(e));default:return null}}convertTimestamp(e){let n=bi(e);return new Pt(n.seconds,n.nanos)}convertDocumentKey(e,n){let i=Ye.fromString(e);Be(qE(i));let r=new Uu(i.get(1),i.get(3)),s=new re(i.popFirst(5));return r.isEqual(n)||yi(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}};function _F(t,e,n){let i;return i=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,i}var kr=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},ud=class extends cd{constructor(e,n,i,r,s,o){super(e,n,i,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new Ls(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let i=this._document.data.field(A_("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}},Ls=class extends ud{data(e={}){return super.data(e)}},dd=class{constructor(e,n,i,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new kr(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new Ls(this._firestore,this._userDataWriter,i.key,i,new kr(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new K(V.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map(c=>{let l=new Ls(r._firestore,r._userDataWriter,c.doc.key,c.doc,new kr(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);return c.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(c=>s||c.type!==3).map(c=>{let l=new Ls(r._firestore,r._userDataWriter,c.doc.key,c.doc,new kr(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter),u=-1,h=-1;return c.type!==0&&(u=o.indexOf(c.doc.key),o=o.delete(c.doc.key)),c.type!==1&&(o=o.add(c.doc),h=o.indexOf(c.doc.key)),{type:vF(c.type),doc:l,oldIndex:u,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function vF(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ae()}}function wC(t){t=on(t,Lt);let e=on(t.firestore,Jn);return cF(bd(e),t._key).then(n=>SC(e,t,n))}var ac=class extends a_{constructor(e){super(),this.firestore=e}convertBytes(e){return new ic(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new Lt(this.firestore,null,n)}};function IC(t){t=on(t,jr);let e=on(t.firestore,Jn),n=bd(e),i=new ac(e);return _C(t._query),lF(n,t._query).then(r=>new dd(e,i,t,r))}function EC(t,e,n){t=on(t,Lt);let i=on(t.firestore,Jn),r=_F(t.converter,e,n);return P_(i,[hF(C_(i),"setDoc",t._key,r,t.converter!==null,n).toMutation(t._key,vi.none())])}function CC(t,e,n,...i){t=on(t,Lt);let r=on(t.firestore,Jn),s=C_(r),o;return o=typeof(e=Re(e))=="string"||e instanceof Xs?pF(s,"updateDoc",t._key,e,n,i):fF(s,"updateDoc",t._key,e),P_(r,[o.toMutation(t._key,vi.exists(!0))])}function TC(t){return P_(on(t.firestore,Jn),[new Qa(t._key,vi.none())])}function wd(t,...e){var n,i,r;t=Re(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||dE(e[o])||(s=e[o],o++);let c={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(dE(e[o])){let p=e[o];e[o]=(n=p.next)===null||n===void 0?void 0:n.bind(p),e[o+1]=(i=p.error)===null||i===void 0?void 0:i.bind(p),e[o+2]=(r=p.complete)===null||r===void 0?void 0:r.bind(p)}let l,u,h;if(t instanceof Lt)u=on(t.firestore,Jn),h=fd(t._key.path),l={next:p=>{e[o]&&e[o](SC(u,t,p))},error:e[o+1],complete:e[o+2]};else{let p=on(t,jr);u=on(p.firestore,Jn),h=p._query;let _=new ac(u);l={next:C=>{e[o]&&e[o](new dd(u,_,p,C))},error:e[o+1],complete:e[o+2]},_C(t._query)}return function(_,C,O,F){let D=new nc(F),z=new tc(C,D,O);return _.asyncQueue.enqueueAndForget(()=>g(this,null,function*(){return b_(yield id(_),z)})),()=>{D.$a(),_.asyncQueue.enqueueAndForget(()=>g(this,null,function*(){return w_(yield id(_),z)}))}}(bd(u),h,c,l)}function P_(t,e){return function(i,r){let s=new An;return i.asyncQueue.enqueueAndForget(()=>g(this,null,function*(){return XN(yield aF(i),r,s)})),s.promise}(bd(t),e)}function SC(t,e,n){let i=n.docs.get(e._key),r=new ac(t);return new ud(t,r,e._key,i,new kr(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(r){Js=r})(Ln),yt(new et("firestore",(i,{instanceIdentifier:r,options:s})=>{let o=i.getProvider("app").getImmediate(),c=new Jn(new km(i.getProvider("auth-internal")),new Fm(i.getProvider("app-check-internal")),function(u,h){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new K(V.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Uu(u.options.projectId,h)}(o,r),o);return s=Object.assign({useFetchStreams:n},s),c._setSettings(s),c},"PUBLIC").setMultipleInstances(!0)),we(FI,"4.6.4",e),we(FI,"4.6.4","esm2017")})();var Id=function(){return Id=Object.assign||function(e){for(var n,i=1,r=arguments.length;i<r;i++){n=arguments[i];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Id.apply(this,arguments)};var IF={includeMetadataChanges:!1};function AC(t,e){return e===void 0&&(e=IF),new Et(function(n){var i=wd(t,e,{next:n.next.bind(n),error:n.error.bind(n),complete:n.complete.bind(n)});return{unsubscribe:i}})}function PC(t){return AC(t,{includeMetadataChanges:!0})}function RC(t,e){return e===void 0&&(e={}),PC(t).pipe(ye(function(n){return DC(n,e)}))}function DC(t,e){var n;e===void 0&&(e={});var i=t.data(e);return!t.exists()||typeof i!="object"||i===null||!e.idField?i:Id(Id({},i),(n={},n[e.idField]=t.id,n))}var Ue=class{constructor(e){return e}},OC="firestore",R_=class{constructor(){return Tn(OC)}};var D_=new te("angularfire2.firestore-instances");function EF(t,e){let n=jn(OC,t,e);return n&&new Ue(n)}function CF(t){return(e,n)=>{let i=e.runOutsideAngular(()=>t(n));return new Ue(i)}}var TF={provide:R_,deps:[[new Ve,D_]]},SF={provide:Ue,useFactory:EF,deps:[[new Ve,D_],$t]};function kC(t,...e){return we("angularfire",tn.full,"fst"),pt([SF,TF,{provide:D_,useFactory:CF(t),multi:!0,deps:[ce,ke,pn,nn,[new Ve,mi],[new Ve,Un],...e]}])}var xC=Me(RC,!0);var Ut=Me(lC,!0);var Ed=Me(TC,!0);var gt=Me(uC,!0);var Cd=Me(wC,!0);var Dn=Me(IC,!0);var MC=Me(dC,!0);var O_=Me(wd,!0);var NC=Me(vC,!0);var Zn=Me(EC,!0);var Td=Me(CC,!0);var FC=Me(yC,!0);var ht=(()=>{let e=class e{constructor(){this.isFirstTime=new st(!0),this.mainCategoriesLoaded=!1,this.loggedIn=!1,this.selectedCatalog="",this.userMobile="",this.checkingAuth=!0,this.currentUser$=new st(""),this.isPageLoaded$=new st("")}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=$({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var it=(()=>{let e=class e{constructor(i){this.firestore=i,this.cityDoc=Wt([]),this.eventList=Wt([]),this.itineraryList=Wt({}),this.slabList=Wt({}),this.variantList=Wt({}),this.bookingDetails=Wt({}),this.addressList=Wt([]),this.activeAddress=Wt("")}fetchDoc(i){return console.log("collectionAddress",i),new Et(r=>{let s=gt(this.firestore,i);O_(s,o=>{let c=o.data();console.log("doc",c),r.next(c)},o=>{r.error(o)})})}fetchDocs(i){return new Et(r=>{let s=Ut(this.firestore,i);O_(s,o=>{let c=o.docs.map(l=>l.data());r.next(c)},o=>{r.error(o)})})}};e.\u0275fac=function(r){return new(r||e)(M(Ue))},e.\u0275prov=$({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var ti=(()=>{let e=class e{constructor(i,r,s,o,c){this.auth=i,this.Firestore=r,this.dataProvider=s,this.router=o,this.eventService=c,this._auth=W(Sn),this.isProfileUpdated=!1,this.user$=Zw(this._auth),this.dataProvider.checkingAuth=!0,this.auth.onAuthStateChanged(l=>{l?(this.dataProvider.loggedIn=!0,this.getUserData(l.uid).subscribe(u=>g(this,null,function*(){this.dataProvider.currentUser={user:l,userData:u},!u||!u.name?this.router.navigate(["profile"]):this.getAddresses(this.dataProvider.currentUser.user.uid).then(h=>{let p=h.docs.map(_=>me(U({},_.data()),{id:_.id}));this.router.navigate(["home"])}),this.dataProvider.checkingAuth=!1}))):(this.dataProvider.loggedIn=!1,this.dataProvider.checkingAuth=!1)})}loginWithPhoneNumber(i,r){return g(this,null,function*(){return i.length!=10?Promise.reject(new Error("Invalid Phone Number")):eI(this.auth,"+91"+i,r)})}setUserData(i){return g(this,null,function*(){let r=yield Cd(gt(this.Firestore,"users",i.uid));if(r.exists()){this.dataProvider.currentUser={user:me(U({},i),{name:r.data().name}),userData:r.data()};return}let s={name:i.name||"",phoneNumber:i.phoneNumber||"",photoURL:i.photoURL||"",uid:i.uid||"",dob:i.dob||"",gender:i.gender||"",age:i.age||""};yield Zn(gt(this.Firestore,"users",i.uid),s),this.dataProvider.currentUser={user:i,userData:s}})}getUserData(i){return xC(gt(this.Firestore,"users",i))}getAddresses(i){return g(this,null,function*(){return yield Dn(Ut(this.Firestore,"users",i,"addresses"))})}};e.\u0275fac=function(r){return new(r||e)(M(Sn),M(Ue),M(ht),M(he),M(it))},e.\u0275prov=$({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var x_;try{x_=typeof Intl<"u"&&Intl.v8BreakIterator}catch{x_=!1}var wt=(()=>{let e=class e{constructor(i){this._platformId=i,this.isBrowser=this._platformId?C0(this._platformId):typeof document=="object"&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!!(window.chrome||x_)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}};e.\u0275fac=function(r){return new(r||e)(M(wn))},e.\u0275prov=$({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var pc;function AF(){if(pc==null&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>pc=!0}))}finally{pc=pc||!1}return pc}function eo(t){return AF()?t:!!t.capture}var $r;function VC(){if($r==null){if(typeof document!="object"||!document||typeof Element!="function"||!Element)return $r=!1,$r;if("scrollBehavior"in document.documentElement.style)$r=!0;else{let t=Element.prototype.scrollTo;t?$r=!/\{\s*\[native code\]\s*\}/.test(t.toString()):$r=!1}}return $r}var k_;function PF(){if(k_==null){let t=typeof document<"u"?document.head:null;k_=!!(t&&(t.createShadowRoot||t.attachShadow))}return k_}function LC(t){if(PF()){let e=t.getRootNode?t.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}function mc(){let t=typeof document<"u"&&document?document.activeElement:null;for(;t&&t.shadowRoot;){let e=t.shadowRoot.activeElement;if(e===t)break;t=e}return t}function xn(t){return t.composedPath?t.composedPath()[0]:t.target}function gc(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}function Ad(t,...e){return e.length?e.some(n=>t[n]):t.altKey||t.shiftKey||t.ctrlKey||t.metaKey}function to(t){return Array.isArray(t)?t:[t]}function rt(t){return t==null?"":typeof t=="string"?t:`${t}px`}function Ii(t){return t instanceof Je?t.nativeElement:t}var UC=new Set,qr,RF=(()=>{let e=class e{constructor(i,r){this._platform=i,this._nonce=r,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):OF}matchMedia(i){return(this._platform.WEBKIT||this._platform.BLINK)&&DF(i,this._nonce),this._matchMedia(i)}};e.\u0275fac=function(r){return new(r||e)(M(wt),M(Uo,8))},e.\u0275prov=$({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function DF(t,e){if(!UC.has(t))try{qr||(qr=document.createElement("style"),e&&qr.setAttribute("nonce",e),qr.setAttribute("type","text/css"),document.head.appendChild(qr)),qr.sheet&&(qr.sheet.insertRule(`@media ${t} {body{ }}`,0),UC.add(t))}catch(n){console.error(n)}}function OF(t){return{matches:t==="all"||t==="",media:t,addListener:()=>{},removeListener:()=>{}}}var Pd=(()=>{let e=class e{constructor(i,r){this._mediaMatcher=i,this._zone=r,this._queries=new Map,this._destroySubject=new Se}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(i){return jC(to(i)).some(s=>this._registerQuery(s).mql.matches)}observe(i){let s=jC(to(i)).map(c=>this._registerQuery(c).observable),o=Mo(s);return o=Qc(o.pipe(cn(1)),o.pipe(Zc(1),Dh(0))),o.pipe(ye(c=>{let l={matches:!1,breakpoints:{}};return c.forEach(({matches:u,query:h})=>{l.matches=l.matches||u,l.breakpoints[h]=u}),l}))}_registerQuery(i){if(this._queries.has(i))return this._queries.get(i);let r=this._mediaMatcher.matchMedia(i),o={observable:new Et(c=>{let l=u=>this._zone.run(()=>c.next(u));return r.addListener(l),()=>{r.removeListener(l)}}).pipe(xi(r),ye(({matches:c})=>({query:i,matches:c})),ai(this._destroySubject)),mql:r};return this._queries.set(i,o),o}};e.\u0275fac=function(r){return new(r||e)(M(RF),M(ce))},e.\u0275prov=$({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function jC(t){return t.map(e=>e.split(",")).reduce((e,n)=>e.concat(n)).map(e=>e.trim())}var Gr={XSmall:"(max-width: 599.98px)",Small:"(min-width: 600px) and (max-width: 959.98px)",Medium:"(min-width: 960px) and (max-width: 1279.98px)",Large:"(min-width: 1280px) and (max-width: 1919.98px)",XLarge:"(min-width: 1920px)",Handset:"(max-width: 599.98px) and (orientation: portrait), (max-width: 959.98px) and (orientation: landscape)",Tablet:"(min-width: 600px) and (max-width: 839.98px) and (orientation: portrait), (min-width: 960px) and (max-width: 1279.98px) and (orientation: landscape)",Web:"(min-width: 840px) and (orientation: portrait), (min-width: 1280px) and (orientation: landscape)",HandsetPortrait:"(max-width: 599.98px) and (orientation: portrait)",TabletPortrait:"(min-width: 600px) and (max-width: 839.98px) and (orientation: portrait)",WebPortrait:"(min-width: 840px) and (orientation: portrait)",HandsetLandscape:"(max-width: 959.98px) and (orientation: landscape)",TabletLandscape:"(min-width: 960px) and (max-width: 1279.98px) and (orientation: landscape)",WebLandscape:"(min-width: 1280px) and (orientation: landscape)"};var _c=(()=>{let e=class e{constructor(i){this._platform=i}isDisabled(i){return i.hasAttribute("disabled")}isVisible(i){return MF(i)&&getComputedStyle(i).visibility==="visible"}isTabbable(i){if(!this._platform.isBrowser)return!1;let r=xF(zF(i));if(r&&(BC(r)===-1||!this.isVisible(r)))return!1;let s=i.nodeName.toLowerCase(),o=BC(i);return i.hasAttribute("contenteditable")?o!==-1:s==="iframe"||s==="object"||this._platform.WEBKIT&&this._platform.IOS&&!jF(i)?!1:s==="audio"?i.hasAttribute("controls")?o!==-1:!1:s==="video"?o===-1?!1:o!==null?!0:this._platform.FIREFOX||i.hasAttribute("controls"):i.tabIndex>=0}isFocusable(i,r){return BF(i)&&!this.isDisabled(i)&&(r?.ignoreVisibility||this.isVisible(i))}};e.\u0275fac=function(r){return new(r||e)(M(wt))},e.\u0275prov=$({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function xF(t){try{return t.frameElement}catch{return null}}function MF(t){return!!(t.offsetWidth||t.offsetHeight||typeof t.getClientRects=="function"&&t.getClientRects().length)}function NF(t){let e=t.nodeName.toLowerCase();return e==="input"||e==="select"||e==="button"||e==="textarea"}function FF(t){return LF(t)&&t.type=="hidden"}function VF(t){return UF(t)&&t.hasAttribute("href")}function LF(t){return t.nodeName.toLowerCase()=="input"}function UF(t){return t.nodeName.toLowerCase()=="a"}function qC(t){if(!t.hasAttribute("tabindex")||t.tabIndex===void 0)return!1;let e=t.getAttribute("tabindex");return!!(e&&!isNaN(parseInt(e,10)))}function BC(t){if(!qC(t))return null;let e=parseInt(t.getAttribute("tabindex")||"",10);return isNaN(e)?-1:e}function jF(t){let e=t.nodeName.toLowerCase(),n=e==="input"&&t.type;return n==="text"||n==="password"||e==="select"||e==="textarea"}function BF(t){return FF(t)?!1:NF(t)||VF(t)||t.hasAttribute("contenteditable")||qC(t)}function zF(t){return t.ownerDocument&&t.ownerDocument.defaultView||window}var N_=class{get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}constructor(e,n,i,r,s=!1,o){this._element=e,this._checker=n,this._ngZone=i,this._document=r,this._injector=o,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,s||this.attachAnchors()}destroy(){let e=this._startAnchor,n=this._endAnchor;e&&(e.removeEventListener("focus",this.startAnchorListener),e.remove()),n&&(n.removeEventListener("focus",this.endAnchorListener),n.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return this._hasAttached?!0:(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(e){return new Promise(n=>{this._executeOnStable(()=>n(this.focusInitialElement(e)))})}focusFirstTabbableElementWhenReady(e){return new Promise(n=>{this._executeOnStable(()=>n(this.focusFirstTabbableElement(e)))})}focusLastTabbableElementWhenReady(e){return new Promise(n=>{this._executeOnStable(()=>n(this.focusLastTabbableElement(e)))})}_getRegionBoundary(e){let n=this._element.querySelectorAll(`[cdk-focus-region-${e}], [cdkFocusRegion${e}], [cdk-focus-${e}]`);return e=="start"?n.length?n[0]:this._getFirstTabbableElement(this._element):n.length?n[n.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(e){let n=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(n){if(!this._checker.isFocusable(n)){let i=this._getFirstTabbableElement(n);return i?.focus(e),!!i}return n.focus(e),!0}return this.focusFirstTabbableElement(e)}focusFirstTabbableElement(e){let n=this._getRegionBoundary("start");return n&&n.focus(e),!!n}focusLastTabbableElement(e){let n=this._getRegionBoundary("end");return n&&n.focus(e),!!n}hasAttached(){return this._hasAttached}_getFirstTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;let n=e.children;for(let i=0;i<n.length;i++){let r=n[i].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(n[i]):null;if(r)return r}return null}_getLastTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;let n=e.children;for(let i=n.length-1;i>=0;i--){let r=n[i].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(n[i]):null;if(r)return r}return null}_createAnchor(){let e=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,e),e.classList.add("cdk-visually-hidden"),e.classList.add("cdk-focus-trap-anchor"),e.setAttribute("aria-hidden","true"),e}_toggleAnchorTabIndex(e,n){e?n.setAttribute("tabindex","0"):n.removeAttribute("tabindex")}toggleAnchors(e){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}_executeOnStable(e){this._injector?dr(e,{injector:this._injector}):setTimeout(e)}},Od=(()=>{let e=class e{constructor(i,r,s){this._checker=i,this._ngZone=r,this._injector=W(ke),this._document=s}create(i,r=!1){return new N_(i,this._checker,this._ngZone,this._document,r,this._injector)}};e.\u0275fac=function(r){return new(r||e)(M(_c),M(ce),M(ue))},e.\u0275prov=$({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function F_(t){return t.buttons===0||t.detail===0}function V_(t){let e=t.touches&&t.touches[0]||t.changedTouches&&t.changedTouches[0];return!!e&&e.identifier===-1&&(e.radiusX==null||e.radiusX===1)&&(e.radiusY==null||e.radiusY===1)}var $F=new te("cdk-input-modality-detector-options"),qF={ignoreKeys:[18,17,224,91,16]},GC=650,no=eo({passive:!0,capture:!0}),GF=(()=>{let e=class e{get mostRecentModality(){return this._modality.value}constructor(i,r,s,o){this._platform=i,this._mostRecentTarget=null,this._modality=new st(null),this._lastTouchMs=0,this._onKeydown=c=>{this._options?.ignoreKeys?.some(l=>l===c.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=xn(c))},this._onMousedown=c=>{Date.now()-this._lastTouchMs<GC||(this._modality.next(F_(c)?"keyboard":"mouse"),this._mostRecentTarget=xn(c))},this._onTouchstart=c=>{if(V_(c)){this._modality.next("keyboard");return}this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=xn(c)},this._options=U(U({},qF),o),this.modalityDetected=this._modality.pipe(Zc(1)),this.modalityChanged=this.modalityDetected.pipe(Jc()),i.isBrowser&&r.runOutsideAngular(()=>{s.addEventListener("keydown",this._onKeydown,no),s.addEventListener("mousedown",this._onMousedown,no),s.addEventListener("touchstart",this._onTouchstart,no)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,no),document.removeEventListener("mousedown",this._onMousedown,no),document.removeEventListener("touchstart",this._onTouchstart,no))}};e.\u0275fac=function(r){return new(r||e)(M(wt),M(ce),M(ue),M($F,8))},e.\u0275prov=$({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Dd=function(t){return t[t.IMMEDIATE=0]="IMMEDIATE",t[t.EVENTUAL=1]="EVENTUAL",t}(Dd||{}),WF=new te("cdk-focus-monitor-default-options"),Rd=eo({passive:!0,capture:!0}),kd=(()=>{let e=class e{constructor(i,r,s,o,c){this._ngZone=i,this._platform=r,this._inputModalityDetector=s,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new Se,this._rootNodeFocusAndBlurListener=l=>{let u=xn(l);for(let h=u;h;h=h.parentElement)l.type==="focus"?this._onFocus(l,h):this._onBlur(l,h)},this._document=o,this._detectionMode=c?.detectionMode||Dd.IMMEDIATE}monitor(i,r=!1){let s=Ii(i);if(!this._platform.isBrowser||s.nodeType!==1)return se();let o=LC(s)||this._getDocument(),c=this._elementInfo.get(s);if(c)return r&&(c.checkChildren=!0),c.subject;let l={checkChildren:r,subject:new Se,rootNode:o};return this._elementInfo.set(s,l),this._registerGlobalListeners(l),l.subject}stopMonitoring(i){let r=Ii(i),s=this._elementInfo.get(r);s&&(s.subject.complete(),this._setClasses(r),this._elementInfo.delete(r),this._removeGlobalListeners(s))}focusVia(i,r,s){let o=Ii(i),c=this._getDocument().activeElement;o===c?this._getClosestElementsInfo(o).forEach(([l,u])=>this._originChanged(l,r,u)):(this._setOrigin(r),typeof o.focus=="function"&&o.focus(s))}ngOnDestroy(){this._elementInfo.forEach((i,r)=>this.stopMonitoring(r))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(i){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(i)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:i&&this._isLastInteractionFromInputLabel(i)?"mouse":"program"}_shouldBeAttributedToTouch(i){return this._detectionMode===Dd.EVENTUAL||!!i?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(i,r){i.classList.toggle("cdk-focused",!!r),i.classList.toggle("cdk-touch-focused",r==="touch"),i.classList.toggle("cdk-keyboard-focused",r==="keyboard"),i.classList.toggle("cdk-mouse-focused",r==="mouse"),i.classList.toggle("cdk-program-focused",r==="program")}_setOrigin(i,r=!1){this._ngZone.runOutsideAngular(()=>{if(this._origin=i,this._originFromTouchInteraction=i==="touch"&&r,this._detectionMode===Dd.IMMEDIATE){clearTimeout(this._originTimeoutId);let s=this._originFromTouchInteraction?GC:1;this._originTimeoutId=setTimeout(()=>this._origin=null,s)}})}_onFocus(i,r){let s=this._elementInfo.get(r),o=xn(i);!s||!s.checkChildren&&r!==o||this._originChanged(r,this._getFocusOrigin(o),s)}_onBlur(i,r){let s=this._elementInfo.get(r);!s||s.checkChildren&&i.relatedTarget instanceof Node&&r.contains(i.relatedTarget)||(this._setClasses(r),this._emitOrigin(s,null))}_emitOrigin(i,r){i.subject.observers.length&&this._ngZone.run(()=>i.subject.next(r))}_registerGlobalListeners(i){if(!this._platform.isBrowser)return;let r=i.rootNode,s=this._rootNodeFocusListenerCount.get(r)||0;s||this._ngZone.runOutsideAngular(()=>{r.addEventListener("focus",this._rootNodeFocusAndBlurListener,Rd),r.addEventListener("blur",this._rootNodeFocusAndBlurListener,Rd)}),this._rootNodeFocusListenerCount.set(r,s+1),++this._monitoredElementCount===1&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(ai(this._stopInputModalityDetector)).subscribe(o=>{this._setOrigin(o,!0)}))}_removeGlobalListeners(i){let r=i.rootNode;if(this._rootNodeFocusListenerCount.has(r)){let s=this._rootNodeFocusListenerCount.get(r);s>1?this._rootNodeFocusListenerCount.set(r,s-1):(r.removeEventListener("focus",this._rootNodeFocusAndBlurListener,Rd),r.removeEventListener("blur",this._rootNodeFocusAndBlurListener,Rd),this._rootNodeFocusListenerCount.delete(r))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(i,r,s){this._setClasses(i,r),this._emitOrigin(s,r),this._lastFocusOrigin=r}_getClosestElementsInfo(i){let r=[];return this._elementInfo.forEach((s,o)=>{(o===i||s.checkChildren&&o.contains(i))&&r.push([o,s])}),r}_isLastInteractionFromInputLabel(i){let{_mostRecentTarget:r,mostRecentModality:s}=this._inputModalityDetector;if(s!=="mouse"||!r||r===i||i.nodeName!=="INPUT"&&i.nodeName!=="TEXTAREA"||i.disabled)return!1;let o=i.labels;if(o){for(let c=0;c<o.length;c++)if(o[c].contains(r))return!0}return!1}};e.\u0275fac=function(r){return new(r||e)(M(ce),M(wt),M(GF),M(ue,8),M(WF,8))},e.\u0275prov=$({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Wr=function(t){return t[t.NONE=0]="NONE",t[t.BLACK_ON_WHITE=1]="BLACK_ON_WHITE",t[t.WHITE_ON_BLACK=2]="WHITE_ON_BLACK",t}(Wr||{}),zC="cdk-high-contrast-black-on-white",$C="cdk-high-contrast-white-on-black",M_="cdk-high-contrast-active",WC=(()=>{let e=class e{constructor(i,r){this._platform=i,this._document=r,this._breakpointSubscription=W(Pd).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return Wr.NONE;let i=this._document.createElement("div");i.style.backgroundColor="rgb(1,2,3)",i.style.position="absolute",this._document.body.appendChild(i);let r=this._document.defaultView||window,s=r&&r.getComputedStyle?r.getComputedStyle(i):null,o=(s&&s.backgroundColor||"").replace(/ /g,"");switch(i.remove(),o){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return Wr.WHITE_ON_BLACK;case"rgb(255,255,255)":case"rgb(255,250,239)":return Wr.BLACK_ON_WHITE}return Wr.NONE}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){let i=this._document.body.classList;i.remove(M_,zC,$C),this._hasCheckedHighContrastMode=!0;let r=this.getHighContrastMode();r===Wr.BLACK_ON_WHITE?i.add(M_,zC):r===Wr.WHITE_ON_BLACK&&i.add(M_,$C)}}};e.\u0275fac=function(r){return new(r||e)(M(wt),M(ue))},e.\u0275prov=$({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var HF=new te("cdk-dir-doc",{providedIn:"root",factory:KF});function KF(){return W(ue)}var YF=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;function QF(t){let e=t?.toLowerCase()||"";return e==="auto"&&typeof navigator<"u"&&navigator?.language?YF.test(navigator.language)?"rtl":"ltr":e==="rtl"?"rtl":"ltr"}var vc=(()=>{let e=class e{constructor(i){if(this.value="ltr",this.change=new Ke,i){let r=i.body?i.body.dir:null,s=i.documentElement?i.documentElement.dir:null;this.value=QF(r||s||"ltr")}}ngOnDestroy(){this.change.complete()}};e.\u0275fac=function(r){return new(r||e)(M(HF,8))},e.\u0275prov=$({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var U_=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=He({type:e}),e.\u0275inj=We({});let t=e;return t})();var nV=20,HC=(()=>{let e=class e{constructor(i,r,s){this._ngZone=i,this._platform=r,this._scrolled=new Se,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=s}register(i){this.scrollContainers.has(i)||this.scrollContainers.set(i,i.elementScrolled().subscribe(()=>this._scrolled.next(i)))}deregister(i){let r=this.scrollContainers.get(i);r&&(r.unsubscribe(),this.scrollContainers.delete(i))}scrolled(i=nV){return this._platform.isBrowser?new Et(r=>{this._globalSubscription||this._addGlobalListener();let s=i>0?this._scrolled.pipe(Rh(i)).subscribe(r):this._scrolled.subscribe(r);return this._scrolledCount++,()=>{s.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):se()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((i,r)=>this.deregister(r)),this._scrolled.complete()}ancestorScrolled(i,r){let s=this.getAncestorScrollContainers(i);return this.scrolled(r).pipe(ft(o=>!o||s.indexOf(o)>-1))}getAncestorScrollContainers(i){let r=[];return this.scrollContainers.forEach((s,o)=>{this._scrollableContainsElement(o,i)&&r.push(o)}),r}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(i,r){let s=Ii(r),o=i.getElementRef().nativeElement;do if(s==o)return!0;while(s=s.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>{let i=this._getWindow();return Jy(i.document,"scroll").subscribe(()=>this._scrolled.next())})}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}};e.\u0275fac=function(r){return new(r||e)(M(ce),M(wt),M(ue,8))},e.\u0275prov=$({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var iV=20,j_=(()=>{let e=class e{constructor(i,r,s){this._platform=i,this._change=new Se,this._changeListener=o=>{this._change.next(o)},this._document=s,r.runOutsideAngular(()=>{if(i.isBrowser){let o=this._getWindow();o.addEventListener("resize",this._changeListener),o.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){let i=this._getWindow();i.removeEventListener("resize",this._changeListener),i.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();let i={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),i}getViewportRect(){let i=this.getViewportScrollPosition(),{width:r,height:s}=this.getViewportSize();return{top:i.top,left:i.left,bottom:i.top+s,right:i.left+r,height:s,width:r}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};let i=this._document,r=this._getWindow(),s=i.documentElement,o=s.getBoundingClientRect(),c=-o.top||i.body.scrollTop||r.scrollY||s.scrollTop||0,l=-o.left||i.body.scrollLeft||r.scrollX||s.scrollLeft||0;return{top:c,left:l}}change(i=iV){return i>0?this._change.pipe(Rh(i)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){let i=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:i.innerWidth,height:i.innerHeight}:{width:0,height:0}}};e.\u0275fac=function(r){return new(r||e)(M(wt),M(ce),M(ue,8))},e.\u0275prov=$({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var yc=class{attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;e!=null&&(this._attachedHost=null,e.detach())}get isAttached(){return this._attachedHost!=null}setAttachedHost(e){this._attachedHost=e}},io=class extends yc{constructor(e,n,i,r,s){super(),this.component=e,this.viewContainerRef=n,this.injector=i,this.componentFactoryResolver=r,this.projectableNodes=s}},ro=class extends yc{constructor(e,n,i,r){super(),this.templateRef=e,this.viewContainerRef=n,this.context=i,this.injector=r}get origin(){return this.templateRef.elementRef}attach(e,n=this.context){return this.context=n,super.attach(e)}detach(){return this.context=void 0,super.detach()}},B_=class extends yc{constructor(e){super(),this.element=e instanceof Je?e.nativeElement:e}},so=class{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(e){if(e instanceof io)return this._attachedPortal=e,this.attachComponentPortal(e);if(e instanceof ro)return this._attachedPortal=e,this.attachTemplatePortal(e);if(this.attachDomPortal&&e instanceof B_)return this._attachedPortal=e,this.attachDomPortal(e)}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}};var xd=class extends so{constructor(e,n,i,r,s){super(),this.outletElement=e,this._componentFactoryResolver=n,this._appRef=i,this._defaultInjector=r,this.attachDomPortal=o=>{this._document;let c=o.element;c.parentNode;let l=this._document.createComment("dom-portal");c.parentNode.insertBefore(l,c),this.outletElement.appendChild(c),this._attachedPortal=o,super.setDisposeFn(()=>{l.parentNode&&l.parentNode.replaceChild(c,l)})},this._document=s}attachComponentPortal(e){let i=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component),r;return e.viewContainerRef?(r=e.viewContainerRef.createComponent(i,e.viewContainerRef.length,e.injector||e.viewContainerRef.injector,e.projectableNodes||void 0),this.setDisposeFn(()=>r.destroy())):(r=i.create(e.injector||this._defaultInjector||ke.NULL),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(r.hostView),r.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(r)),this._attachedPortal=e,r}attachTemplatePortal(e){let n=e.viewContainerRef,i=n.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return i.rootNodes.forEach(r=>this.outletElement.appendChild(r)),i.detectChanges(),this.setDisposeFn(()=>{let r=n.indexOf(i);r!==-1&&n.remove(r)}),this._attachedPortal=e,i}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(e){return e.hostView.rootNodes[0]}};var bc=(()=>{let e=class e extends so{constructor(i,r,s){super(),this._componentFactoryResolver=i,this._viewContainerRef=r,this._isInitialized=!1,this.attached=new Ke,this.attachDomPortal=o=>{this._document;let c=o.element;c.parentNode;let l=this._document.createComment("dom-portal");o.setAttachedHost(this),c.parentNode.insertBefore(l,c),this._getRootNode().appendChild(c),this._attachedPortal=o,super.setDisposeFn(()=>{l.parentNode&&l.parentNode.replaceChild(c,l)})},this._document=s}get portal(){return this._attachedPortal}set portal(i){this.hasAttached()&&!i&&!this._isInitialized||(this.hasAttached()&&super.detach(),i&&super.attach(i),this._attachedPortal=i||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(i){i.setAttachedHost(this);let r=i.viewContainerRef!=null?i.viewContainerRef:this._viewContainerRef,o=(i.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(i.component),c=r.createComponent(o,r.length,i.injector||r.injector,i.projectableNodes||void 0);return r!==this._viewContainerRef&&this._getRootNode().appendChild(c.hostView.rootNodes[0]),super.setDisposeFn(()=>c.destroy()),this._attachedPortal=i,this._attachedRef=c,this.attached.emit(c),c}attachTemplatePortal(i){i.setAttachedHost(this);let r=this._viewContainerRef.createEmbeddedView(i.templateRef,i.context,{injector:i.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=i,this._attachedRef=r,this.attached.emit(r),r}_getRootNode(){let i=this._viewContainerRef.element.nativeElement;return i.nodeType===i.ELEMENT_NODE?i:i.parentNode}};e.\u0275fac=function(r){return new(r||e)(k(tl),k(ss),k(ue))},e.\u0275dir=Oe({type:e,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:[0,"cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],standalone:!0,features:[Ze]});let t=e;return t})();var KC=VC(),z_=class{constructor(e,n){this._viewportRuler=e,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=n}attach(){}enable(){if(this._canBeEnabled()){let e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=rt(-this._previousScrollPosition.left),e.style.top=rt(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){let e=this._document.documentElement,n=this._document.body,i=e.style,r=n.style,s=i.scrollBehavior||"",o=r.scrollBehavior||"";this._isEnabled=!1,i.left=this._previousHTMLStyles.left,i.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),KC&&(i.scrollBehavior=r.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),KC&&(i.scrollBehavior=s,r.scrollBehavior=o)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;let n=this._document.body,i=this._viewportRuler.getViewportSize();return n.scrollHeight>i.height||n.scrollWidth>i.width}};var $_=class{constructor(e,n,i,r){this._scrollDispatcher=e,this._ngZone=n,this._viewportRuler=i,this._config=r,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(e){this._overlayRef,this._overlayRef=e}enable(){if(this._scrollSubscription)return;let e=this._scrollDispatcher.scrolled(0).pipe(ft(n=>!n||!this._overlayRef.overlayElement.contains(n.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{let n=this._viewportRuler.getViewportScrollPosition().top;Math.abs(n-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}},Md=class{enable(){}disable(){}attach(){}};function q_(t,e){return e.some(n=>{let i=t.bottom<n.top,r=t.top>n.bottom,s=t.right<n.left,o=t.left>n.right;return i||r||s||o})}function YC(t,e){return e.some(n=>{let i=t.top<n.top,r=t.bottom>n.bottom,s=t.left<n.left,o=t.right>n.right;return i||r||s||o})}var G_=class{constructor(e,n,i,r){this._scrollDispatcher=e,this._viewportRuler=n,this._ngZone=i,this._config=r,this._scrollSubscription=null}attach(e){this._overlayRef,this._overlayRef=e}enable(){if(!this._scrollSubscription){let e=this._config?this._config.scrollThrottle:0;this._scrollSubscription=this._scrollDispatcher.scrolled(e).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){let n=this._overlayRef.overlayElement.getBoundingClientRect(),{width:i,height:r}=this._viewportRuler.getViewportSize();q_(n,[{width:i,height:r,bottom:r,right:i,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}})}}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}},sV=(()=>{let e=class e{constructor(i,r,s,o){this._scrollDispatcher=i,this._viewportRuler=r,this._ngZone=s,this.noop=()=>new Md,this.close=c=>new $_(this._scrollDispatcher,this._ngZone,this._viewportRuler,c),this.block=()=>new z_(this._viewportRuler,this._document),this.reposition=c=>new G_(this._scrollDispatcher,this._viewportRuler,this._ngZone,c),this._document=o}};e.\u0275fac=function(r){return new(r||e)(M(HC),M(j_),M(ce),M(ue))},e.\u0275prov=$({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),wc=class{constructor(e){if(this.scrollStrategy=new Md,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,e){let n=Object.keys(e);for(let i of n)e[i]!==void 0&&(this[i]=e[i])}}};var W_=class{constructor(e,n){this.connectionPair=e,this.scrollableViewProperties=n}};var nT=(()=>{let e=class e{constructor(i){this._attachedOverlays=[],this._document=i}ngOnDestroy(){this.detach()}add(i){this.remove(i),this._attachedOverlays.push(i)}remove(i){let r=this._attachedOverlays.indexOf(i);r>-1&&this._attachedOverlays.splice(r,1),this._attachedOverlays.length===0&&this.detach()}};e.\u0275fac=function(r){return new(r||e)(M(ue))},e.\u0275prov=$({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),oV=(()=>{let e=class e extends nT{constructor(i,r){super(i),this._ngZone=r,this._keydownListener=s=>{let o=this._attachedOverlays;for(let c=o.length-1;c>-1;c--)if(o[c]._keydownEvents.observers.length>0){let l=o[c]._keydownEvents;this._ngZone?this._ngZone.run(()=>l.next(s)):l.next(s);break}}}add(i){super.add(i),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}};e.\u0275fac=function(r){return new(r||e)(M(ue),M(ce,8))},e.\u0275prov=$({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),aV=(()=>{let e=class e extends nT{constructor(i,r,s){super(i),this._platform=r,this._ngZone=s,this._cursorStyleIsSet=!1,this._pointerDownListener=o=>{this._pointerDownEventTarget=xn(o)},this._clickListener=o=>{let c=xn(o),l=o.type==="click"&&this._pointerDownEventTarget?this._pointerDownEventTarget:c;this._pointerDownEventTarget=null;let u=this._attachedOverlays.slice();for(let h=u.length-1;h>-1;h--){let p=u[h];if(p._outsidePointerEvents.observers.length<1||!p.hasAttached())continue;if(QC(p.overlayElement,c)||QC(p.overlayElement,l))break;let _=p._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>_.next(o)):_.next(o)}}}add(i){if(super.add(i),!this._isAttached){let r=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(r)):this._addEventListeners(r),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=r.style.cursor,r.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){let i=this._document.body;i.removeEventListener("pointerdown",this._pointerDownListener,!0),i.removeEventListener("click",this._clickListener,!0),i.removeEventListener("auxclick",this._clickListener,!0),i.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(i.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(i){i.addEventListener("pointerdown",this._pointerDownListener,!0),i.addEventListener("click",this._clickListener,!0),i.addEventListener("auxclick",this._clickListener,!0),i.addEventListener("contextmenu",this._clickListener,!0)}};e.\u0275fac=function(r){return new(r||e)(M(ue),M(wt),M(ce,8))},e.\u0275prov=$({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function QC(t,e){let n=typeof ShadowRoot<"u"&&ShadowRoot,i=e;for(;i;){if(i===t)return!0;i=n&&i instanceof ShadowRoot?i.host:i.parentNode}return!1}var Nd=(()=>{let e=class e{constructor(i,r){this._platform=r,this._document=i}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){let i="cdk-overlay-container";if(this._platform.isBrowser||gc()){let s=this._document.querySelectorAll(`.${i}[platform="server"], .${i}[platform="test"]`);for(let o=0;o<s.length;o++)s[o].remove()}let r=this._document.createElement("div");r.classList.add(i),gc()?r.setAttribute("platform","test"):this._platform.isBrowser||r.setAttribute("platform","server"),this._document.body.appendChild(r),this._containerElement=r}};e.\u0275fac=function(r){return new(r||e)(M(ue),M(wt))},e.\u0275prov=$({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Ei=class{constructor(e,n,i,r,s,o,c,l,u,h=!1,p){this._portalOutlet=e,this._host=n,this._pane=i,this._config=r,this._ngZone=s,this._keyboardDispatcher=o,this._document=c,this._location=l,this._outsideClickDispatcher=u,this._animationsDisabled=h,this._injector=p,this._backdropElement=null,this._backdropClick=new Se,this._attachments=new Se,this._detachments=new Se,this._locationChanges=cr.EMPTY,this._backdropClickHandler=_=>this._backdropClick.next(_),this._backdropTransitionendHandler=_=>{this._disposeBackdrop(_.target)},this._keydownEvents=new Se,this._outsidePointerEvents=new Se,this._renders=new Se,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy,this._afterRenderRef=Nn(()=>a0(()=>{this._renders.next()},{injector:this._injector}))}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(e){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);let n=this._portalOutlet.attach(e);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),dr(()=>{this.hasAttached()&&this.updatePosition()},{injector:this._injector}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),typeof n?.onDestroy=="function"&&n.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),n}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();let e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenEmpty(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){let e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,e&&this._detachments.next(),this._detachments.complete(),this._afterRenderRef.destroy(),this._renders.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config=U(U({},this._config),e),this._updateElementSize()}setDirection(e){this._config=me(U({},this._config),{direction:e}),this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){let e=this._config.direction;return e?typeof e=="string"?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;let e=this._pane.style;e.width=rt(this._config.width),e.height=rt(this._config.height),e.minWidth=rt(this._config.minWidth),e.minHeight=rt(this._config.minHeight),e.maxWidth=rt(this._config.maxWidth),e.maxHeight=rt(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){let e="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(e)})}):this._backdropElement.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){let e=this._backdropElement;if(e){if(this._animationsDisabled){this._disposeBackdrop(e);return}e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{e.addEventListener("transitionend",this._backdropTransitionendHandler)}),e.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(e)},500))}}_toggleClasses(e,n,i){let r=to(n||[]).filter(s=>!!s);r.length&&(i?e.classList.add(...r):e.classList.remove(...r))}_detachContentWhenEmpty(){this._ngZone.runOutsideAngular(()=>{let e=this._renders.pipe(ai(Xc(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||this._pane.children.length===0)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),e.unsubscribe())})})}_disposeScrollStrategy(){let e=this._scrollStrategy;e&&(e.disable(),e.detach&&e.detach())}_disposeBackdrop(e){e&&(e.removeEventListener("click",this._backdropClickHandler),e.removeEventListener("transitionend",this._backdropTransitionendHandler),e.remove(),this._backdropElement===e&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}},XC="cdk-overlay-connected-position-bounding-box",cV=/([A-Za-z%]+)$/,H_=class{get positions(){return this._preferredPositions}constructor(e,n,i,r,s){this._viewportRuler=n,this._document=i,this._platform=r,this._overlayContainer=s,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new Se,this._resizeSubscription=cr.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(e)}attach(e){this._overlayRef&&this._overlayRef,this._validatePositions(),e.hostElement.classList.add(XC),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition){this.reapplyLastPosition();return}this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let e=this._originRect,n=this._overlayRect,i=this._viewportRect,r=this._containerRect,s=[],o;for(let c of this._preferredPositions){let l=this._getOriginPoint(e,r,c),u=this._getOverlayPoint(l,n,c),h=this._getOverlayFit(u,n,i,c);if(h.isCompletelyWithinViewport){this._isPushed=!1,this._applyPosition(c,l);return}if(this._canFitWithFlexibleDimensions(h,u,i)){s.push({position:c,origin:l,overlayRect:n,boundingBoxRect:this._calculateBoundingBoxRect(l,c)});continue}(!o||o.overlayFit.visibleArea<h.visibleArea)&&(o={overlayFit:h,overlayPoint:u,originPoint:l,position:c,overlayRect:n})}if(s.length){let c=null,l=-1;for(let u of s){let h=u.boundingBoxRect.width*u.boundingBoxRect.height*(u.position.weight||1);h>l&&(l=h,c=u)}this._isPushed=!1,this._applyPosition(c.position,c.origin);return}if(this._canPush){this._isPushed=!0,this._applyPosition(o.position,o.originPoint);return}this._applyPosition(o.position,o.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&Hr(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(XC),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;let e=this._lastPosition;if(e){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let n=this._getOriginPoint(this._originRect,this._containerRect,e);this._applyPosition(e,n)}else this.apply()}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,e.indexOf(this._lastPosition)===-1&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,n,i){let r;if(i.originX=="center")r=e.left+e.width/2;else{let o=this._isRtl()?e.right:e.left,c=this._isRtl()?e.left:e.right;r=i.originX=="start"?o:c}n.left<0&&(r-=n.left);let s;return i.originY=="center"?s=e.top+e.height/2:s=i.originY=="top"?e.top:e.bottom,n.top<0&&(s-=n.top),{x:r,y:s}}_getOverlayPoint(e,n,i){let r;i.overlayX=="center"?r=-n.width/2:i.overlayX==="start"?r=this._isRtl()?-n.width:0:r=this._isRtl()?0:-n.width;let s;return i.overlayY=="center"?s=-n.height/2:s=i.overlayY=="top"?0:-n.height,{x:e.x+r,y:e.y+s}}_getOverlayFit(e,n,i,r){let s=ZC(n),{x:o,y:c}=e,l=this._getOffset(r,"x"),u=this._getOffset(r,"y");l&&(o+=l),u&&(c+=u);let h=0-o,p=o+s.width-i.width,_=0-c,C=c+s.height-i.height,O=this._subtractOverflows(s.width,h,p),F=this._subtractOverflows(s.height,_,C),D=O*F;return{visibleArea:D,isCompletelyWithinViewport:s.width*s.height===D,fitsInViewportVertically:F===s.height,fitsInViewportHorizontally:O==s.width}}_canFitWithFlexibleDimensions(e,n,i){if(this._hasFlexibleDimensions){let r=i.bottom-n.y,s=i.right-n.x,o=JC(this._overlayRef.getConfig().minHeight),c=JC(this._overlayRef.getConfig().minWidth),l=e.fitsInViewportVertically||o!=null&&o<=r,u=e.fitsInViewportHorizontally||c!=null&&c<=s;return l&&u}return!1}_pushOverlayOnScreen(e,n,i){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};let r=ZC(n),s=this._viewportRect,o=Math.max(e.x+r.width-s.width,0),c=Math.max(e.y+r.height-s.height,0),l=Math.max(s.top-i.top-e.y,0),u=Math.max(s.left-i.left-e.x,0),h=0,p=0;return r.width<=s.width?h=u||-o:h=e.x<this._viewportMargin?s.left-i.left-e.x:0,r.height<=s.height?p=l||-c:p=e.y<this._viewportMargin?s.top-i.top-e.y:0,this._previousPushAmount={x:h,y:p},{x:e.x+h,y:e.y+p}}_applyPosition(e,n){if(this._setTransformOrigin(e),this._setOverlayElementStyles(n,e),this._setBoundingBoxStyles(n,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._positionChanges.observers.length){let i=this._getScrollVisibility();if(e!==this._lastPosition||!this._lastScrollVisibility||!lV(this._lastScrollVisibility,i)){let r=new W_(e,i);this._positionChanges.next(r)}this._lastScrollVisibility=i}this._lastPosition=e,this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;let n=this._boundingBox.querySelectorAll(this._transformOriginSelector),i,r=e.overlayY;e.overlayX==="center"?i="center":this._isRtl()?i=e.overlayX==="start"?"right":"left":i=e.overlayX==="start"?"left":"right";for(let s=0;s<n.length;s++)n[s].style.transformOrigin=`${i} ${r}`}_calculateBoundingBoxRect(e,n){let i=this._viewportRect,r=this._isRtl(),s,o,c;if(n.overlayY==="top")o=e.y,s=i.height-o+this._viewportMargin;else if(n.overlayY==="bottom")c=i.height-e.y+this._viewportMargin*2,s=i.height-c+this._viewportMargin;else{let C=Math.min(i.bottom-e.y+i.top,e.y),O=this._lastBoundingBoxSize.height;s=C*2,o=e.y-C,s>O&&!this._isInitialRender&&!this._growAfterOpen&&(o=e.y-O/2)}let l=n.overlayX==="start"&&!r||n.overlayX==="end"&&r,u=n.overlayX==="end"&&!r||n.overlayX==="start"&&r,h,p,_;if(u)_=i.width-e.x+this._viewportMargin*2,h=e.x-this._viewportMargin;else if(l)p=e.x,h=i.right-e.x;else{let C=Math.min(i.right-e.x+i.left,e.x),O=this._lastBoundingBoxSize.width;h=C*2,p=e.x-C,h>O&&!this._isInitialRender&&!this._growAfterOpen&&(p=e.x-O/2)}return{top:o,left:p,bottom:c,right:_,width:h,height:s}}_setBoundingBoxStyles(e,n){let i=this._calculateBoundingBoxRect(e,n);!this._isInitialRender&&!this._growAfterOpen&&(i.height=Math.min(i.height,this._lastBoundingBoxSize.height),i.width=Math.min(i.width,this._lastBoundingBoxSize.width));let r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{let s=this._overlayRef.getConfig().maxHeight,o=this._overlayRef.getConfig().maxWidth;r.height=rt(i.height),r.top=rt(i.top),r.bottom=rt(i.bottom),r.width=rt(i.width),r.left=rt(i.left),r.right=rt(i.right),n.overlayX==="center"?r.alignItems="center":r.alignItems=n.overlayX==="end"?"flex-end":"flex-start",n.overlayY==="center"?r.justifyContent="center":r.justifyContent=n.overlayY==="bottom"?"flex-end":"flex-start",s&&(r.maxHeight=rt(s)),o&&(r.maxWidth=rt(o))}this._lastBoundingBoxSize=i,Hr(this._boundingBox.style,r)}_resetBoundingBoxStyles(){Hr(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){Hr(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,n){let i={},r=this._hasExactPosition(),s=this._hasFlexibleDimensions,o=this._overlayRef.getConfig();if(r){let h=this._viewportRuler.getViewportScrollPosition();Hr(i,this._getExactOverlayY(n,e,h)),Hr(i,this._getExactOverlayX(n,e,h))}else i.position="static";let c="",l=this._getOffset(n,"x"),u=this._getOffset(n,"y");l&&(c+=`translateX(${l}px) `),u&&(c+=`translateY(${u}px)`),i.transform=c.trim(),o.maxHeight&&(r?i.maxHeight=rt(o.maxHeight):s&&(i.maxHeight="")),o.maxWidth&&(r?i.maxWidth=rt(o.maxWidth):s&&(i.maxWidth="")),Hr(this._pane.style,i)}_getExactOverlayY(e,n,i){let r={top:"",bottom:""},s=this._getOverlayPoint(n,this._overlayRect,e);if(this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,i)),e.overlayY==="bottom"){let o=this._document.documentElement.clientHeight;r.bottom=`${o-(s.y+this._overlayRect.height)}px`}else r.top=rt(s.y);return r}_getExactOverlayX(e,n,i){let r={left:"",right:""},s=this._getOverlayPoint(n,this._overlayRect,e);this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,i));let o;if(this._isRtl()?o=e.overlayX==="end"?"left":"right":o=e.overlayX==="end"?"right":"left",o==="right"){let c=this._document.documentElement.clientWidth;r.right=`${c-(s.x+this._overlayRect.width)}px`}else r.left=rt(s.x);return r}_getScrollVisibility(){let e=this._getOriginRect(),n=this._pane.getBoundingClientRect(),i=this._scrollables.map(r=>r.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:YC(e,i),isOriginOutsideView:q_(e,i),isOverlayClipped:YC(n,i),isOverlayOutsideView:q_(n,i)}}_subtractOverflows(e,...n){return n.reduce((i,r)=>i-Math.max(r,0),e)}_getNarrowedViewportRect(){let e=this._document.documentElement.clientWidth,n=this._document.documentElement.clientHeight,i=this._viewportRuler.getViewportScrollPosition();return{top:i.top+this._viewportMargin,left:i.left+this._viewportMargin,right:i.left+e-this._viewportMargin,bottom:i.top+n-this._viewportMargin,width:e-2*this._viewportMargin,height:n-2*this._viewportMargin}}_isRtl(){return this._overlayRef.getDirection()==="rtl"}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,n){return n==="x"?e.offsetX==null?this._offsetX:e.offsetX:e.offsetY==null?this._offsetY:e.offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&to(e).forEach(n=>{n!==""&&this._appliedPanelClasses.indexOf(n)===-1&&(this._appliedPanelClasses.push(n),this._pane.classList.add(n))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){let e=this._origin;if(e instanceof Je)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();let n=e.width||0,i=e.height||0;return{top:e.y,bottom:e.y+i,left:e.x,right:e.x+n,height:i,width:n}}};function Hr(t,e){for(let n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function JC(t){if(typeof t!="number"&&t!=null){let[e,n]=t.split(cV);return!n||n==="px"?parseFloat(e):null}return t||null}function ZC(t){return{top:Math.floor(t.top),right:Math.floor(t.right),bottom:Math.floor(t.bottom),left:Math.floor(t.left),width:Math.floor(t.width),height:Math.floor(t.height)}}function lV(t,e){return t===e?!0:t.isOriginClipped===e.isOriginClipped&&t.isOriginOutsideView===e.isOriginOutsideView&&t.isOverlayClipped===e.isOverlayClipped&&t.isOverlayOutsideView===e.isOverlayOutsideView}var eT="cdk-global-overlay-wrapper",K_=class{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(e){let n=e.getConfig();this._overlayRef=e,this._width&&!n.width&&e.updateSize({width:this._width}),this._height&&!n.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(eT),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._xOffset=e,this._xPosition="left",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._xOffset=e,this._xPosition="right",this}start(e=""){return this._xOffset=e,this._xPosition="start",this}end(e=""){return this._xOffset=e,this._xPosition="end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._xPosition="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;let e=this._overlayRef.overlayElement.style,n=this._overlayRef.hostElement.style,i=this._overlayRef.getConfig(),{width:r,height:s,maxWidth:o,maxHeight:c}=i,l=(r==="100%"||r==="100vw")&&(!o||o==="100%"||o==="100vw"),u=(s==="100%"||s==="100vh")&&(!c||c==="100%"||c==="100vh"),h=this._xPosition,p=this._xOffset,_=this._overlayRef.getConfig().direction==="rtl",C="",O="",F="";l?F="flex-start":h==="center"?(F="center",_?O=p:C=p):_?h==="left"||h==="end"?(F="flex-end",C=p):(h==="right"||h==="start")&&(F="flex-start",O=p):h==="left"||h==="start"?(F="flex-start",C=p):(h==="right"||h==="end")&&(F="flex-end",O=p),e.position=this._cssPosition,e.marginLeft=l?"0":C,e.marginTop=u?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=l?"0":O,n.justifyContent=F,n.alignItems=u?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;let e=this._overlayRef.overlayElement.style,n=this._overlayRef.hostElement,i=n.style;n.classList.remove(eT),i.justifyContent=i.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}},uV=(()=>{let e=class e{constructor(i,r,s,o){this._viewportRuler=i,this._document=r,this._platform=s,this._overlayContainer=o}global(){return new K_}flexibleConnectedTo(i){return new H_(i,this._viewportRuler,this._document,this._platform,this._overlayContainer)}};e.\u0275fac=function(r){return new(r||e)(M(j_),M(ue),M(wt),M(Nd))},e.\u0275prov=$({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),dV=0,oo=(()=>{let e=class e{constructor(i,r,s,o,c,l,u,h,p,_,C,O){this.scrollStrategies=i,this._overlayContainer=r,this._componentFactoryResolver=s,this._positionBuilder=o,this._keyboardDispatcher=c,this._injector=l,this._ngZone=u,this._document=h,this._directionality=p,this._location=_,this._outsideClickDispatcher=C,this._animationsModuleType=O}create(i){let r=this._createHostElement(),s=this._createPaneElement(r),o=this._createPortalOutlet(s),c=new wc(i);return c.direction=c.direction||this._directionality.value,new Ei(o,r,s,c,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,this._animationsModuleType==="NoopAnimations",this._injector.get(Mi))}position(){return this._positionBuilder}_createPaneElement(i){let r=this._document.createElement("div");return r.id=`cdk-overlay-${dV++}`,r.classList.add("cdk-overlay-pane"),i.appendChild(r),r}_createHostElement(){let i=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(i),i}_createPortalOutlet(i){return this._appRef||(this._appRef=this._injector.get(cs)),new xd(i,this._componentFactoryResolver,this._appRef,this._injector,this._document)}};e.\u0275fac=function(r){return new(r||e)(M(sV),M(Nd),M(tl),M(uV),M(oV),M(ke),M(ce),M(ue),M(vc),M(Vi),M(aV),M(Lo,8))},e.\u0275prov=$({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function hV(t,e){}var Kr=class{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.closeOnNavigation=!0,this.closeOnDestroy=!0,this.closeOnOverlayDetachments=!0}};var X_=(()=>{let e=class e extends so{constructor(i,r,s,o,c,l,u,h){super(),this._elementRef=i,this._focusTrapFactory=r,this._config=o,this._interactivityChecker=c,this._ngZone=l,this._overlayRef=u,this._focusMonitor=h,this._platform=W(wt),this._focusTrap=null,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this._ariaLabelledByQueue=[],this._changeDetectorRef=W(ci),this._injector=W(ke),this._isDestroyed=!1,this.attachDomPortal=p=>{this._portalOutlet.hasAttached();let _=this._portalOutlet.attachDomPortal(p);return this._contentAttached(),_},this._document=s,this._config.ariaLabelledBy&&this._ariaLabelledByQueue.push(this._config.ariaLabelledBy)}_addAriaLabelledBy(i){this._ariaLabelledByQueue.push(i),this._changeDetectorRef.markForCheck()}_removeAriaLabelledBy(i){let r=this._ariaLabelledByQueue.indexOf(i);r>-1&&(this._ariaLabelledByQueue.splice(r,1),this._changeDetectorRef.markForCheck())}_contentAttached(){this._initializeFocusTrap(),this._handleBackdropClicks(),this._captureInitialFocus()}_captureInitialFocus(){this._trapFocus()}ngOnDestroy(){this._isDestroyed=!0,this._restoreFocus()}attachComponentPortal(i){this._portalOutlet.hasAttached();let r=this._portalOutlet.attachComponentPortal(i);return this._contentAttached(),r}attachTemplatePortal(i){this._portalOutlet.hasAttached();let r=this._portalOutlet.attachTemplatePortal(i);return this._contentAttached(),r}_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(i,r){this._interactivityChecker.isFocusable(i)||(i.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{let s=()=>{i.removeEventListener("blur",s),i.removeEventListener("mousedown",s),i.removeAttribute("tabindex")};i.addEventListener("blur",s),i.addEventListener("mousedown",s)})),i.focus(r)}_focusByCssSelector(i,r){let s=this._elementRef.nativeElement.querySelector(i);s&&this._forceFocus(s,r)}_trapFocus(){this._isDestroyed||dr(()=>{let i=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||i.focus();break;case!0:case"first-tabbable":this._focusTrap?.focusInitialElement()||this._focusDialogContainer();break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus);break}},{injector:this._injector})}_restoreFocus(){let i=this._config.restoreFocus,r=null;if(typeof i=="string"?r=this._document.querySelector(i):typeof i=="boolean"?r=i?this._elementFocusedBeforeDialogWasOpened:null:i&&(r=i),this._config.restoreFocus&&r&&typeof r.focus=="function"){let s=mc(),o=this._elementRef.nativeElement;(!s||s===this._document.body||s===o||o.contains(s))&&(this._focusMonitor?(this._focusMonitor.focusVia(r,this._closeInteractionType),this._closeInteractionType=null):r.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){let i=this._elementRef.nativeElement,r=mc();return i===r||i.contains(r)}_initializeFocusTrap(){this._platform.isBrowser&&(this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=mc()))}_handleBackdropClicks(){this._overlayRef.backdropClick().subscribe(()=>{this._config.disableClose&&this._recaptureFocus()})}};e.\u0275fac=function(r){return new(r||e)(k(Je),k(Od),k(ue,8),k(Kr),k(_c),k(ce),k(Ei),k(kd))},e.\u0275cmp=H({type:e,selectors:[["cdk-dialog-container"]],viewQuery:function(r,s){if(r&1&&hr(bc,7),r&2){let o;Ni(o=Fi())&&(s._portalOutlet=o.first)}},hostAttrs:["tabindex","-1",1,"cdk-dialog-container"],hostVars:6,hostBindings:function(r,s){r&2&&dn("id",s._config.id||null)("role",s._config.role)("aria-modal",s._config.ariaModal)("aria-labelledby",s._config.ariaLabel?null:s._ariaLabelledByQueue[0])("aria-label",s._config.ariaLabel)("aria-describedby",s._config.ariaDescribedBy||null)},standalone:!0,features:[Ze,Q],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(r,s){r&1&&oe(0,hV,0,0,"ng-template",0)},dependencies:[bc],styles:[".cdk-dialog-container{display:block;width:100%;height:100%;min-height:inherit;max-height:inherit}"],encapsulation:2});let t=e;return t})(),Ic=class{constructor(e,n){this.overlayRef=e,this.config=n,this.closed=new Se,this.disableClose=n.disableClose,this.backdropClick=e.backdropClick(),this.keydownEvents=e.keydownEvents(),this.outsidePointerEvents=e.outsidePointerEvents(),this.id=n.id,this.keydownEvents.subscribe(i=>{i.keyCode===27&&!this.disableClose&&!Ad(i)&&(i.preventDefault(),this.close(void 0,{focusOrigin:"keyboard"}))}),this.backdropClick.subscribe(()=>{this.disableClose||this.close(void 0,{focusOrigin:"mouse"})}),this._detachSubscription=e.detachments().subscribe(()=>{n.closeOnOverlayDetachments!==!1&&this.close()})}close(e,n){if(this.containerInstance){let i=this.closed;this.containerInstance._closeInteractionType=n?.focusOrigin||"program",this._detachSubscription.unsubscribe(),this.overlayRef.dispose(),i.next(e),i.complete(),this.componentInstance=this.containerInstance=null}}updatePosition(){return this.overlayRef.updatePosition(),this}updateSize(e="",n=""){return this.overlayRef.updateSize({width:e,height:n}),this}addPanelClass(e){return this.overlayRef.addPanelClass(e),this}removePanelClass(e){return this.overlayRef.removePanelClass(e),this}},fV=new te("DialogScrollStrategy",{providedIn:"root",factory:()=>{let t=W(oo);return()=>t.scrollStrategies.block()}}),pV=new te("DialogData"),mV=new te("DefaultDialogConfig");var gV=0,rT=(()=>{let e=class e{get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}constructor(i,r,s,o,c,l){this._overlay=i,this._injector=r,this._defaultOptions=s,this._parentDialog=o,this._overlayContainer=c,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new Se,this._afterOpenedAtThisLevel=new Se,this._ariaHiddenElements=new Map,this.afterAllClosed=No(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(xi(void 0))),this._scrollStrategy=l}open(i,r){let s=this._defaultOptions||new Kr;r=U(U({},s),r),r.id=r.id||`cdk-dialog-${gV++}`,r.id&&this.getDialogById(r.id);let o=this._getOverlayConfig(r),c=this._overlay.create(o),l=new Ic(c,r),u=this._attachContainer(c,l,r);return l.containerInstance=u,this._attachDialogContent(i,l,u,r),this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(l),l.closed.subscribe(()=>this._removeOpenDialog(l,!0)),this.afterOpened.next(l),l}closeAll(){Y_(this.openDialogs,i=>i.close())}getDialogById(i){return this.openDialogs.find(r=>r.id===i)}ngOnDestroy(){Y_(this._openDialogsAtThisLevel,i=>{i.config.closeOnDestroy===!1&&this._removeOpenDialog(i,!1)}),Y_(this._openDialogsAtThisLevel,i=>i.close()),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._openDialogsAtThisLevel=[]}_getOverlayConfig(i){let r=new wc({positionStrategy:i.positionStrategy||this._overlay.position().global().centerHorizontally().centerVertically(),scrollStrategy:i.scrollStrategy||this._scrollStrategy(),panelClass:i.panelClass,hasBackdrop:i.hasBackdrop,direction:i.direction,minWidth:i.minWidth,minHeight:i.minHeight,maxWidth:i.maxWidth,maxHeight:i.maxHeight,width:i.width,height:i.height,disposeOnNavigation:i.closeOnNavigation});return i.backdropClass&&(r.backdropClass=i.backdropClass),r}_attachContainer(i,r,s){let o=s.injector||s.viewContainerRef?.injector,c=[{provide:Kr,useValue:s},{provide:Ic,useValue:r},{provide:Ei,useValue:i}],l;s.container?typeof s.container=="function"?l=s.container:(l=s.container.type,c.push(...s.container.providers(s))):l=X_;let u=new io(l,s.viewContainerRef,ke.create({parent:o||this._injector,providers:c}),s.componentFactoryResolver);return i.attach(u).instance}_attachDialogContent(i,r,s,o){if(i instanceof Bo){let c=this._createInjector(o,r,s,void 0),l={$implicit:o.data,dialogRef:r};o.templateContext&&(l=U(U({},l),typeof o.templateContext=="function"?o.templateContext():o.templateContext)),s.attachTemplatePortal(new ro(i,null,l,c))}else{let c=this._createInjector(o,r,s,this._injector),l=s.attachComponentPortal(new io(i,o.viewContainerRef,c,o.componentFactoryResolver));r.componentRef=l,r.componentInstance=l.instance}}_createInjector(i,r,s,o){let c=i.injector||i.viewContainerRef?.injector,l=[{provide:pV,useValue:i.data},{provide:Ic,useValue:r}];return i.providers&&(typeof i.providers=="function"?l.push(...i.providers(r,i,s)):l.push(...i.providers)),i.direction&&(!c||!c.get(vc,null,{optional:!0}))&&l.push({provide:vc,useValue:{value:i.direction,change:se()}}),ke.create({parent:c||o,providers:l})}_removeOpenDialog(i,r){let s=this.openDialogs.indexOf(i);s>-1&&(this.openDialogs.splice(s,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((o,c)=>{o?c.setAttribute("aria-hidden",o):c.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),r&&this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){let i=this._overlayContainer.getContainerElement();if(i.parentElement){let r=i.parentElement.children;for(let s=r.length-1;s>-1;s--){let o=r[s];o!==i&&o.nodeName!=="SCRIPT"&&o.nodeName!=="STYLE"&&!o.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(o,o.getAttribute("aria-hidden")),o.setAttribute("aria-hidden","true"))}}}_getAfterAllClosed(){let i=this._parentDialog;return i?i._getAfterAllClosed():this._afterAllClosedAtThisLevel}};e.\u0275fac=function(r){return new(r||e)(M(oo),M(ke),M(mV,8),M(e,12),M(Nd),M(fV))},e.\u0275prov=$({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Y_(t,e){let n=t.length;for(;n--;)e(t[n])}var ev=(()=>{let e=class e{};e.STANDARD_CURVE="cubic-bezier(0.4,0.0,0.2,1)",e.DECELERATION_CURVE="cubic-bezier(0.0,0.0,0.2,1)",e.ACCELERATION_CURVE="cubic-bezier(0.4,0.0,1,1)",e.SHARP_CURVE="cubic-bezier(0.4,0.0,0.6,1)";let t=e;return t})(),tv=(()=>{let e=class e{};e.COMPLEX="375ms",e.ENTERING="225ms",e.EXITING="195ms";let t=e;return t})();function vV(){return!0}var yV=new te("mat-sanity-checks",{providedIn:"root",factory:vV}),nv=(()=>{let e=class e{constructor(i,r,s){this._sanityChecks=r,this._document=s,this._hasDoneGlobalChecks=!1,i._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(i){return gc()?!1:typeof this._sanityChecks=="boolean"?this._sanityChecks:!!this._sanityChecks[i]}};e.\u0275fac=function(r){return new(r||e)(M(WC),M(yV,8),M(ue))},e.\u0275mod=He({type:e}),e.\u0275inj=We({imports:[U_,U_]});let t=e;return t})();var _n=function(t){return t[t.FADING_IN=0]="FADING_IN",t[t.VISIBLE=1]="VISIBLE",t[t.FADING_OUT=2]="FADING_OUT",t[t.HIDDEN=3]="HIDDEN",t}(_n||{}),J_=class{constructor(e,n,i,r=!1){this._renderer=e,this.element=n,this.config=i,this._animationForciblyDisabledThroughCss=r,this.state=_n.HIDDEN}fadeOut(){this._renderer.fadeOutRipple(this)}},sT=eo({passive:!0,capture:!0}),Z_=class{constructor(){this._events=new Map,this._delegateEventHandler=e=>{let n=xn(e);n&&this._events.get(e.type)?.forEach((i,r)=>{(r===n||r.contains(n))&&i.forEach(s=>s.handleEvent(e))})}}addHandler(e,n,i,r){let s=this._events.get(n);if(s){let o=s.get(i);o?o.add(r):s.set(i,new Set([r]))}else this._events.set(n,new Map([[i,new Set([r])]])),e.runOutsideAngular(()=>{document.addEventListener(n,this._delegateEventHandler,sT)})}removeHandler(e,n,i){let r=this._events.get(e);if(!r)return;let s=r.get(n);s&&(s.delete(i),s.size===0&&r.delete(n),r.size===0&&(this._events.delete(e),document.removeEventListener(e,this._delegateEventHandler,sT)))}},oT={enterDuration:225,exitDuration:150},bV=800,aT=eo({passive:!0,capture:!0}),cT=["mousedown","touchstart"],lT=["mouseup","mouseleave","touchend","touchcancel"],Ec=class Ec{constructor(e,n,i,r){this._target=e,this._ngZone=n,this._platform=r,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=Ii(i))}fadeInRipple(e,n,i={}){let r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s=U(U({},oT),i.animation);i.centered&&(e=r.left+r.width/2,n=r.top+r.height/2);let o=i.radius||wV(e,n,r),c=e-r.left,l=n-r.top,u=s.enterDuration,h=document.createElement("div");h.classList.add("mat-ripple-element"),h.style.left=`${c-o}px`,h.style.top=`${l-o}px`,h.style.height=`${o*2}px`,h.style.width=`${o*2}px`,i.color!=null&&(h.style.backgroundColor=i.color),h.style.transitionDuration=`${u}ms`,this._containerElement.appendChild(h);let p=window.getComputedStyle(h),_=p.transitionProperty,C=p.transitionDuration,O=_==="none"||C==="0s"||C==="0s, 0s"||r.width===0&&r.height===0,F=new J_(this,h,i,O);h.style.transform="scale3d(1, 1, 1)",F.state=_n.FADING_IN,i.persistent||(this._mostRecentTransientRipple=F);let D=null;return!O&&(u||s.exitDuration)&&this._ngZone.runOutsideAngular(()=>{let z=()=>{D&&(D.fallbackTimer=null),clearTimeout(Y),this._finishRippleTransition(F)},X=()=>this._destroyRipple(F),Y=setTimeout(X,u+100);h.addEventListener("transitionend",z),h.addEventListener("transitioncancel",X),D={onTransitionEnd:z,onTransitionCancel:X,fallbackTimer:Y}}),this._activeRipples.set(F,D),(O||!u)&&this._finishRippleTransition(F),F}fadeOutRipple(e){if(e.state===_n.FADING_OUT||e.state===_n.HIDDEN)return;let n=e.element,i=U(U({},oT),e.config.animation);n.style.transitionDuration=`${i.exitDuration}ms`,n.style.opacity="0",e.state=_n.FADING_OUT,(e._animationForciblyDisabledThroughCss||!i.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){let n=Ii(e);!this._platform.isBrowser||!n||n===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=n,cT.forEach(i=>{Ec._eventManager.addHandler(this._ngZone,i,n,this)}))}handleEvent(e){e.type==="mousedown"?this._onMousedown(e):e.type==="touchstart"?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{lT.forEach(n=>{this._triggerElement.addEventListener(n,this,aT)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){e.state===_n.FADING_IN?this._startFadeOutTransition(e):e.state===_n.FADING_OUT&&this._destroyRipple(e)}_startFadeOutTransition(e){let n=e===this._mostRecentTransientRipple,{persistent:i}=e.config;e.state=_n.VISIBLE,!i&&(!n||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){let n=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=_n.HIDDEN,n!==null&&(e.element.removeEventListener("transitionend",n.onTransitionEnd),e.element.removeEventListener("transitioncancel",n.onTransitionCancel),n.fallbackTimer!==null&&clearTimeout(n.fallbackTimer)),e.element.remove()}_onMousedown(e){let n=F_(e),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+bV;!this._target.rippleDisabled&&!n&&!i&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!V_(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;let n=e.changedTouches;if(n)for(let i=0;i<n.length;i++)this.fadeInRipple(n[i].clientX,n[i].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{let n=e.state===_n.VISIBLE||e.config.terminateOnPointerUp&&e.state===_n.FADING_IN;!e.config.persistent&&n&&e.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){let e=this._triggerElement;e&&(cT.forEach(n=>Ec._eventManager.removeHandler(n,e,this)),this._pointerUpEventsRegistered&&(lT.forEach(n=>e.removeEventListener(n,this,aT)),this._pointerUpEventsRegistered=!1))}};Ec._eventManager=new Z_;var uT=Ec;function wV(t,e,n){let i=Math.max(Math.abs(t-n.left),Math.abs(t-n.right)),r=Math.max(Math.abs(e-n.top),Math.abs(e-n.bottom));return Math.sqrt(i*i+r*r)}function IV(t,e){}var EV={bottomSheetState:T0("state",[Gh("void, hidden",qh({transform:"translateY(100%)"})),Gh("visible",qh({transform:"translateY(0%)"})),Wh("visible => void, visible => hidden",$h([zh(`${tv.COMPLEX} ${ev.ACCELERATION_CURVE}`),Kh("@*",Hh(),{optional:!0})])),Wh("void => visible",$h([zh(`${tv.EXITING} ${ev.DECELERATION_CURVE}`),Kh("@*",Hh(),{optional:!0})]))])},CV=(()=>{let e=class e extends X_{constructor(i,r,s,o,c,l,u,h,p){super(i,r,s,o,c,l,u,p),this._animationState="void",this._animationStateChanged=new Ke,this._breakpointSubscription=h.observe([Gr.Medium,Gr.Large,Gr.XLarge]).subscribe(()=>{let _=this._elementRef.nativeElement.classList;_.toggle("mat-bottom-sheet-container-medium",h.isMatched(Gr.Medium)),_.toggle("mat-bottom-sheet-container-large",h.isMatched(Gr.Large)),_.toggle("mat-bottom-sheet-container-xlarge",h.isMatched(Gr.XLarge))})}enter(){this._destroyed||(this._animationState="visible",this._changeDetectorRef.markForCheck(),this._changeDetectorRef.detectChanges())}exit(){this._destroyed||(this._animationState="hidden",this._changeDetectorRef.markForCheck())}ngOnDestroy(){super.ngOnDestroy(),this._breakpointSubscription.unsubscribe(),this._destroyed=!0}_onAnimationDone(i){i.toState==="visible"&&this._trapFocus(),this._animationStateChanged.emit(i)}_onAnimationStart(i){this._animationStateChanged.emit(i)}_captureInitialFocus(){}};e.\u0275fac=function(r){return new(r||e)(k(Je),k(Od),k(ue,8),k(Kr),k(_c),k(ce),k(Ei),k(Pd),k(kd))},e.\u0275cmp=H({type:e,selectors:[["mat-bottom-sheet-container"]],hostAttrs:["tabindex","-1",1,"mat-bottom-sheet-container"],hostVars:4,hostBindings:function(r,s){r&1&&d0("@state.start",function(c){return s._onAnimationStart(c)})("@state.done",function(c){return s._onAnimationDone(c)}),r&2&&(u0("@state",s._animationState),dn("role",s._config.role)("aria-modal",s._config.ariaModal)("aria-label",s._config.ariaLabel))},standalone:!0,features:[Ze,Q],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(r,s){r&1&&oe(0,IV,0,0,"ng-template",0)},dependencies:[bc],styles:[".mat-bottom-sheet-container{box-shadow:0px 8px 10px -5px rgba(0, 0, 0, 0.2), 0px 16px 24px 2px rgba(0, 0, 0, 0.14), 0px 6px 30px 5px rgba(0, 0, 0, 0.12);padding:8px 16px;min-width:100vw;box-sizing:border-box;display:block;outline:0;max-height:80vh;overflow:auto;background:var(--mat-bottom-sheet-container-background-color);color:var(--mat-bottom-sheet-container-text-color);font-family:var(--mat-bottom-sheet-container-text-font);font-size:var(--mat-bottom-sheet-container-text-size);line-height:var(--mat-bottom-sheet-container-text-line-height);font-weight:var(--mat-bottom-sheet-container-text-weight);letter-spacing:var(--mat-bottom-sheet-container-text-tracking)}.cdk-high-contrast-active .mat-bottom-sheet-container{outline:1px solid}.mat-bottom-sheet-container-xlarge,.mat-bottom-sheet-container-large,.mat-bottom-sheet-container-medium{border-top-left-radius:var(--mat-bottom-sheet-container-shape);border-top-right-radius:var(--mat-bottom-sheet-container-shape)}.mat-bottom-sheet-container-medium{min-width:384px;max-width:calc(100vw - 128px)}.mat-bottom-sheet-container-large{min-width:512px;max-width:calc(100vw - 256px)}.mat-bottom-sheet-container-xlarge{min-width:576px;max-width:calc(100vw - 384px)}"],encapsulation:2,data:{animation:[EV.bottomSheetState]}});let t=e;return t})(),TV=new te("MatBottomSheetData"),iv=class{constructor(){this.data=null,this.hasBackdrop=!0,this.disableClose=!1,this.ariaLabel=null,this.ariaModal=!0,this.closeOnNavigation=!0,this.autoFocus="dialog",this.restoreFocus=!0}},Fd=class{get instance(){return this._ref.componentInstance}get componentRef(){return this._ref.componentRef}constructor(e,n,i){this._ref=e,this._afterOpened=new Se,this.containerInstance=i,this.disableClose=n.disableClose,i._animationStateChanged.pipe(ft(r=>r.phaseName==="done"&&r.toState==="visible"),cn(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),i._animationStateChanged.pipe(ft(r=>r.phaseName==="done"&&r.toState==="hidden"),cn(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._ref.close(this._result)}),e.overlayRef.detachments().subscribe(()=>{this._ref.close(this._result)}),Xc(this.backdropClick(),this.keydownEvents().pipe(ft(r=>r.keyCode===27))).subscribe(r=>{!this.disableClose&&(r.type!=="keydown"||!Ad(r))&&(r.preventDefault(),this.dismiss())})}dismiss(e){this.containerInstance&&(this.containerInstance._animationStateChanged.pipe(ft(n=>n.phaseName==="start"),cn(1)).subscribe(n=>{this._closeFallbackTimeout=setTimeout(()=>{this._ref.close(this._result)},n.totalTime+100),this._ref.overlayRef.detachBackdrop()}),this._result=e,this.containerInstance.exit(),this.containerInstance=null)}afterDismissed(){return this._ref.closed}afterOpened(){return this._afterOpened}backdropClick(){return this._ref.backdropClick}keydownEvents(){return this._ref.keydownEvents}},SV=new te("mat-bottom-sheet-default-options"),Vd=(()=>{let e=class e{get _openedBottomSheetRef(){let i=this._parentBottomSheet;return i?i._openedBottomSheetRef:this._bottomSheetRefAtThisLevel}set _openedBottomSheetRef(i){this._parentBottomSheet?this._parentBottomSheet._openedBottomSheetRef=i:this._bottomSheetRefAtThisLevel=i}constructor(i,r,s,o){this._overlay=i,this._parentBottomSheet=s,this._defaultOptions=o,this._bottomSheetRefAtThisLevel=null,this._dialog=r.get(rT)}open(i,r){let s=U(U({},this._defaultOptions||new iv),r),o;return this._dialog.open(i,me(U({},s),{disableClose:!0,closeOnOverlayDetachments:!1,maxWidth:"100%",container:CV,scrollStrategy:s.scrollStrategy||this._overlay.scrollStrategies.block(),positionStrategy:this._overlay.position().global().centerHorizontally().bottom("0"),templateContext:()=>({bottomSheetRef:o}),providers:(c,l,u)=>(o=new Fd(c,s,u),[{provide:Fd,useValue:o},{provide:TV,useValue:s.data}])})),o.afterDismissed().subscribe(()=>{this._openedBottomSheetRef===o&&(this._openedBottomSheetRef=null)}),this._openedBottomSheetRef?(this._openedBottomSheetRef.afterDismissed().subscribe(()=>o.containerInstance?.enter()),this._openedBottomSheetRef.dismiss()):o.containerInstance.enter(),this._openedBottomSheetRef=o,o}dismiss(i){this._openedBottomSheetRef&&this._openedBottomSheetRef.dismiss(i)}ngOnDestroy(){this._bottomSheetRefAtThisLevel&&this._bottomSheetRefAtThisLevel.dismiss()}};e.\u0275fac=function(r){return new(r||e)(M(oo),M(ke),M(e,12),M(SV,8))},e.\u0275prov=$({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var hT=(()=>{let e=class e{constructor(i){this.Firestore=i}getCurrentLocation(){return g(this,null,function*(){if(navigator.geolocation)return new Promise((i,r)=>{navigator.geolocation.getCurrentPosition(s=>{i({lat:s.coords.latitude,lng:s.coords.longitude})},s=>{r(s)})});throw new Error("Geolocation is not supported by this browser.")})}getStateFromCoordinates(i,r){return g(this,null,function*(){let s=new google.maps.Geocoder,o={lat:i,lng:r};return new Promise((c,l)=>{s.geocode({location:o},(u,h)=>{if(h==="OK")if(u&&u[0]){let p=this.getStateFromGeocodeResults(u);p?c(p):l(new Error("State not found in the address components."))}else l(new Error("No results found."));else l(new Error("Geocoder failed due to: "+h))})})})}getStateFromGeocodeResults(i){for(let r of i)for(let s of r.address_components)if(s.types.includes("administrative_area_level_1"))return s.long_name;return null}getCity(i){return g(this,null,function*(){let r=Ut(this.Firestore,"city-catalogue"),s=NC(r,FC("state","==",i)),c=(yield Dn(s)).docs[0];return c?(localStorage.setItem("stateDocId",c.id),Dn(Ut(this.Firestore,"city-catalogue",c.id,"city"))):null})}};e.\u0275fac=function(r){return new(r||e)(M(Ue))},e.\u0275prov=$({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var fT=(()=>{let e=class e{constructor(i,r,s,o,c){this.AuthService=i,this._bottomSheet=r,this.geolocationService=s,this.Router=o,this.DataProviderService=c,this.state=null,this.error=null,this.phoneNumber="",this.terms=!1}ngOnInit(){this.geolocationService.getCurrentLocation().then(i=>this.geolocationService.getStateFromCoordinates(i.lat,i.lng)).then(i=>{this.state=i}).catch(i=>{this.error=i.message})}skip(){this.Router.navigate(["/home"])}login(){return g(this,null,function*(){this.phoneNumber.length==10&&(this.verifier||(this.verifier=new Cr(this.AuthService.auth,"recaptcha-container",{size:"invisible"})),this.AuthService.loginWithPhoneNumber(this.phoneNumber,this.verifier).then(i=>{this.DataProviderService.loginConfirmationResult=i,this.DataProviderService.userMobile=this.phoneNumber,this.phoneNumber="",this.terms=!1,this.Router.navigate(["otp"])}).catch(i=>{console.log(i)}).finally(()=>{console.log("finally")}))})}};e.\u0275fac=function(r){return new(r||e)(k(ti),k(Vd),k(hT),k(he),k(ht))},e.\u0275cmp=H({type:e,selectors:[["app-login"]],standalone:!0,features:[Q],decls:15,vars:1,consts:[["src","assets/login/loginPageLogo.svg","alt",""],[1,"login-secton"],[1,"header_text_color","center-text"],[1,"field"],[1,"description_text"],["type","text","placeholder","Enter Phone Number","maxlength","10",1,"input_box_bg_gradient","header_text_color",3,"ngModelChange","ngModel"],[1,"header_text_color","secondary_botton_gradient","login",3,"click"],[1,"white","primary_botton_gradient","login",3,"click"],["id","recaptcha-container"]],template:function(r,s){r&1&&(v(0,"section"),L(1,"img",0),v(2,"div",1)(3,"p",2),E(4,"Book events and donations"),y(),v(5,"div",3)(6,"label",4),E(7,"Phone Number"),y(),L(8,"br"),v(9,"input",5),qo("ngModelChange",function(c){return fr(s.phoneNumber,c)||(s.phoneNumber=c),c}),y()(),v(10,"button",6),G("click",function(){return s.login()}),E(11,"Get OTP"),y(),v(12,"button",7),G("click",function(){return s.skip()}),E(13," Skip Login "),y()(),L(14,"div",8),y()),r&2&&(N(9),$o("ngModel",s.phoneNumber))},dependencies:[Os,mn,qn,La,hm],styles:["section[_ngcontent-%COMP%]{background:url(/assets/login/donorlogin.svg) #fdfdfd 50%/cover no-repeat;background-size:100% 50%;background-repeat:no-repeat;background-attachment:fixed;background-size:cover;width:100vw;height:100%;display:flex;flex-direction:column;align-items:center}section[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-top:70px}section[_ngcontent-%COMP%]   .login-secton[_ngcontent-%COMP%]{position:absolute;bottom:2px;width:96%}section[_ngcontent-%COMP%]   .login-secton[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:15px;font-size:18px;font-style:normal;font-weight:700;line-height:normal;font-family:Jura}section[_ngcontent-%COMP%]   .login-secton[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-left:5px;font-family:Nunito,sans-serif;font-size:10px;font-style:normal;font-weight:500;line-height:normal}section[_ngcontent-%COMP%]   .login-secton[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]{width:100%;margin-bottom:10px}section[_ngcontent-%COMP%]   .login-secton[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], section[_ngcontent-%COMP%]   .login-secton[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{border:.5px solid rgb(166,166,166);border-radius:12px;width:100%;height:40px;padding:1px 6px}section[_ngcontent-%COMP%]   .login-secton[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{width:70%}section[_ngcontent-%COMP%]   .login-secton[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, section[_ngcontent-%COMP%]   .login-secton[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{outline:none}section[_ngcontent-%COMP%]   .login-secton[_ngcontent-%COMP%]   .login[_ngcontent-%COMP%]{border:1px solid rgb(215,215,215);font-size:16px;font-style:normal;font-weight:700;line-height:normal;font-family:Jura,sans-serif}button[_ngcontent-%COMP%]{display:flex;width:100%;height:100%;padding:20px;justify-content:center;align-items:center;gap:20px;flex-shrink:0;border:none;border-radius:30px;margin-bottom:5px}"]});let t=e;return t})();var Ld=(()=>{let e=class e{constructor(){this.loadingSubject=new st(!1),this.isLoading$=this.loadingSubject.asObservable()}show(){this.loadingSubject.next(!0)}hide(){this.loadingSubject.next(!1)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=$({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function PV(t,e){if(t&1){let n=Le();v(0,"div",11)(1,"h2",12),E(2,"Events"),y(),v(3,"button",13),G("click",function(){ge(n);let r=ne();return _e(r.seeAllEvent())}),E(4,"See All"),y()()}}function RV(t,e){if(t&1){let n=Le();v(0,"div",14),G("click",function(){let r=ge(n).$implicit,s=ne();return _e(s.viewSlsbList(r.eventId))}),L(1,"img",15),v(2,"p",12),E(3),y(),v(4,"div",16)(5,"p",6),E(6,"Limited seats Availabe"),y(),v(7,"button",17),G("click",function(){let r=ge(n).$implicit,s=ne();return _e(s.viewSlsbList(r.eventId))}),E(8,"Book Now"),y()()()}if(t&2){let n=e.$implicit;N(),j("src",n.images[0],Tt)("alt",n.title),N(2),ve(n.eventName)}}var mT=(()=>{let e=class e{constructor(i,r,s,o){this.router=i,this.eventService=r,this.loadingService=s,this.DataProviderService=o,this.isEventPresent=!1,this.events=[{title:"Cearic Kashi Summit 2024",image:"/assets/homepage/sliderimage.svg",link:"/slab-list"},{title:"Cearic Kashi Summit 2025",image:"/assets/homepage/sliderimage.svg",link:"/slab-list"},{title:"Cearic Kashi Summit 2026",image:"/assets/homepage/sliderimage.svg",link:"/slab-list"},{title:"Cearic Kashi Summit 2027",image:"/assets/homepage/sliderimage.svg",link:"/slab-list"}],this.slabs=[{title:"Panchang slab",image:"/assets/homepage/event_1.1.svg"},{title:"Assi slab",image:"/assets/homepage/event_1.2.svg"},{title:"Assi slab",image:"/assets/homepage/event_1.3.svg"}]}ngOnInit(){this.loadingService.show(),this.eventService.variantList()&&setTimeout(()=>{this.getEvent()},3e3)}getEvent(){return g(this,null,function*(){try{let i=yield oi(this.eventService.fetchDocs("events")),r=[],s={},o={},c={};for(let l of i){console.log(l.eventId);let u=yield oi(this.eventService.fetchDoc(`events/${l.eventId}`));if(console.log("event",u),u.active){let h=yield oi(this.eventService.fetchDoc(`events/${l.eventId}/itinerary/activities`));s[l.eventId]=h,this.eventService.itineraryList.set(s);let p=yield oi(this.eventService.fetchDocs(`events/${l.eventId}/slab-variant`));o[l.eventId]=[];for(let _ of p){let C=yield oi(this.eventService.fetchDoc(`events/${l.eventId}/slab-variant/${_.slabId}`));if(C.active){let O=yield oi(this.eventService.fetchDocs(`events/${l.eventId}/slab-variant/${_.slabId}/variants`));c[_.slabId]=[];for(let F of O){let D=yield oi(this.eventService.fetchDoc(`events/${l.eventId}/slab-variant/${_.slabId}/variants/${F.variantId}`));yield this.isTaxActive(D?.taxType).then(z=>{D.active&&z&&(c[_.slabId].push(D),this.eventService.variantList.set(c))}),this.loadingService.hide()}c[_.slabId].length>0&&(o[l.eventId].push(C),this.eventService.slabList.set(o))}}o[l.eventId].length>0&&(r.push(u),this.isEventPresent=!0,this.eventService.eventList.set(r))}}}catch(i){console.error("Error fetching events:",i),this.loadingService.hide()}})}isTaxActive(i){return g(this,null,function*(){let r;try{let s=this.eventService.fetchDoc(`tax-types/${i}`);r=(yield oi(s)).active}catch(s){console.error("Error fetching tax type:",s),r=!1}return r})}seeAllEvent(){this.router.navigate(["event-list"])}onSurveyClick(i){window.location.href=i.link}viewSlsbList(i){this.router.navigate(["slab",i])}};e.\u0275fac=function(r){return new(r||e)(k(he),k(it),k(Ld),k(ht))},e.\u0275cmp=H({type:e,selectors:[["app-event"]],standalone:!0,features:[Q],decls:15,vars:2,consts:[[1,"event"],[1,"button_text","header_text_color"],[1,"card"],["src","/assets/homepage/eventcard.svg"],[1,"detail"],[1,"section_title"],[1,"paragraph_text"],[1,"primary",3,"click"],["class","heading",4,"ngIf"],[1,"slider"],["class","slide",3,"click",4,"ngFor","ngForOf"],[1,"heading"],[1,"section_title","header_text_color"],[1,"see-all",3,"click"],[1,"slide",3,"click"],[3,"src","alt"],[1,"bookNow"],[3,"click"]],template:function(r,s){r&1&&(v(0,"section",0)(1,"h2",1),E(2,"Discover Amazing Events"),y(),v(3,"div",2),L(4,"img",3),v(5,"div",4)(6,"h3",5),E(7,"Excitement events waiting for you"),y(),v(8,"p",6),E(9,"Register in various slabs of each events"),y(),v(10,"button",7),G("click",function(){return s.seeAllEvent()}),E(11,"view all"),y()()(),oe(12,PV,5,0,"div",8),v(13,"div",9),oe(14,RV,9,3,"div",10),y()()),r&2&&(N(12),j("ngIf",s.isEventPresent),N(2),j("ngForOf",s.eventService.eventList()))},dependencies:[xe,_t,Nt],styles:["section[_ngcontent-%COMP%]{padding-bottom:80px}.event[_ngcontent-%COMP%]{margin-top:12%;padding:20px;border-radius:10px}.event[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:25px;font-weight:700}.event[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{background:linear-gradient(90.32deg,#464e5f .28%,#464e5fcc 47.84%,#464e5f66 99.72%);display:flex;border-radius:12px;margin-top:5%}.event[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .detail[_ngcontent-%COMP%]{margin:40px 0}.event[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .detail[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#fff;font-weight:700;font-size:16px;margin:0 5px 0 0;line-height:1}.event[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .detail[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:10px 5px 0 0;color:#fff;font-weight:500;font-size:13px}.event[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .detail[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:10px 5px 0 25px;border-radius:10px;height:30px;width:90px;border:none}.event[_ngcontent-%COMP%]   .heading[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:20px}.event[_ngcontent-%COMP%]   .heading[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:24px;font-weight:400}.event[_ngcontent-%COMP%]   .heading[_ngcontent-%COMP%]   .see-all[_ngcontent-%COMP%]{float:right;color:#00f;text-decoration:none;border:none;background:none}.event[_ngcontent-%COMP%]   .slider[_ngcontent-%COMP%]{margin-top:5%;background:linear-gradient(180deg,#2d198a,#1c2127);border-radius:15px;display:flex;overflow-x:auto;scroll-snap-type:x mandatory;-ms-overflow-style:none;scrollbar-width:none}.event[_ngcontent-%COMP%]   .slider[_ngcontent-%COMP%]   .slide[_ngcontent-%COMP%]{flex:0 0 auto;scroll-snap-align:start;cursor:pointer}.event[_ngcontent-%COMP%]   .slider[_ngcontent-%COMP%]   .slide[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:95%;height:269px;object-fit:cover;border-radius:20px;margin-left:15px;margin-top:15px}.event[_ngcontent-%COMP%]   .slider[_ngcontent-%COMP%]   .slide[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:20px;font-weight:500;color:#fff;margin-left:15px}.event[_ngcontent-%COMP%]   .slider[_ngcontent-%COMP%]   .bookNow[_ngcontent-%COMP%]{display:flex;color:#fff;margin-left:15px;margin-top:15px;padding-bottom:30px}.event[_ngcontent-%COMP%]   .slider[_ngcontent-%COMP%]   .bookNow[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{height:40px;width:80px;border-radius:10px}"]});let t=e;return t})();var Ud=(()=>{let e=class e{constructor(i,r){this.authService=i,this.DataProviderService=r}ngOnInit(){setTimeout(()=>{this.name=this.DataProviderService.currentUser?.userData.name},3e3)}};e.\u0275fac=function(r){return new(r||e)(k(ti),k(ht))},e.\u0275cmp=H({type:e,selectors:[["app-header-with-menu"]],standalone:!0,features:[Q],decls:4,vars:1,consts:[[1,"head"],[1,"header"],[1,"page_title","header_text_color"]],template:function(r,s){r&1&&(v(0,"div",0)(1,"div",1)(2,"p",2),E(3),y()()()),r&2&&(N(3),be("Hi, ",s.name,""))},styles:[".head[_ngcontent-%COMP%]{border-bottom:1px solid #8d8c8c}.head[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;font-size:18px;line-height:normal;padding:20px 0 0;width:92vw;margin-left:4vw;position:fixed;z-index:100;background:#fff;border-bottom:1px solid #8d8c8c}.head[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]{display:flex;gap:20px}.head[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:25px;width:25px}"]});let t=e;return t})();var gT=(()=>{let e=class e{constructor(i){this.router=i}openInNewTab(i){window.open(i,"_blank")}};e.\u0275fac=function(r){return new(r||e)(k(he))},e.\u0275cmp=H({type:e,selectors:[["app-other-services"]],standalone:!0,features:[Q],decls:19,vars:0,consts:[[1,"section_title","header_text_color"],[1,"hospital",3,"click"],["src","/assets/other_services/car.svg"],["src","/assets/other_services/airport.svg"],[1,"section_title"],["src","/assets/other_services/customersupport.svg"],[1,"hospital"],["src","/assets/other_services/tour.svg",3,"click"]],template:function(r,s){r&1&&(v(0,"section")(1,"p",0),E(2,"Services"),y(),v(3,"div",1),G("click",function(){return s.openInNewTab("https://www.varanasicab.com/")}),L(4,"img",2),v(5,"span"),E(6,"Cab booking"),y()(),v(7,"div",1),G("click",function(){return s.openInNewTab("https://www.varanasicab.com/")}),L(8,"img",3),v(9,"span",4),E(10,"Airport Pick and Drop"),y()(),v(11,"div",1),G("click",function(){return s.openInNewTab("https://www.travelraasta.in/packages")}),L(12,"img",5),v(13,"span",4),E(14,"Tour Guide "),y()(),v(15,"div",6)(16,"img",7),G("click",function(){return s.openInNewTab("https://www.varanasicab.com/")}),y(),v(17,"span",4),E(18,"Customer Support"),y()()())},styles:["section[_ngcontent-%COMP%]{padding:0 15px 80px}section[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-weight:400}section[_ngcontent-%COMP%]   .hospital[_ngcontent-%COMP%]{margin-top:1rem;display:flex;gap:2rem;background:linear-gradient(90.32deg,#464e5f .28%,#464e5fcc 47.84%,#464e5f66 99.72%);border-radius:10px;height:70px;width:100%;padding:0 10px}section[_ngcontent-%COMP%]   .hospital[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{padding:10px 0}section[_ngcontent-%COMP%]   .hospital[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding-top:20px;font-size:18px;color:#f0f0f0;font-family:Jura,sans-serif;font-style:normal;font-weight:700;line-height:normal}"]});let t=e;return t})();var _T=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=H({type:e,selectors:[["app-home"]],standalone:!0,features:[Q],decls:3,vars:0,template:function(r,s){r&1&&L(0,"app-header-with-menu")(1,"app-event")(2,"app-other-services")},dependencies:[mT,Ud,gT]});let t=e;return t})();function DV(t,e){if(t&1){let n=Le();v(0,"input",4,0),G("paste",function(r){ge(n);let s=ne(2);return _e(s.handlePaste(r))})("keyup",function(r){let s=ge(n).index,o=ne(2);return _e(o.onKeyUp(r,s))})("input",function(r){ge(n);let s=ne(2);return _e(s.onInput(r))})("keydown",function(r){let s=ge(n).index,o=ne(2);return _e(o.onKeyDown(r,s))}),y()}if(t&2){let n=e.$implicit,i=e.index,r=ne(2);Lh("otp-input ",r.config.inputClass,""),j("pattern",r.config.allowNumbersOnly?"\\d*":"")("type",r.inputType)("placeholder",(r.config==null?null:r.config.placeholder)||"")("ngStyle",r.config.inputStyles)("formControl",r.otpForm.controls[n])("id",r.getBoxId(i))}}function OV(t,e){if(t&1&&(v(0,"div",2),oe(1,DV,2,9,"input",3),rl(2,"keys"),y()),t&2){let n=ne();Lh("ng-otp-input-wrapper wrapper ",n.config.containerClass,""),h0("id","c_",n.componentKey,""),j("ngStyle",n.config.containerStyles),N(),j("ngForOf",sl(2,7,n.otpForm==null?null:n.otpForm.controls))}}var nr=class{static ifTab(e){return this.ifKey(e,"Tab")}static ifDelete(e){return this.ifKey(e,"Delete;Del")}static ifBackspace(e){return this.ifKey(e,"Backspace")}static ifRightArrow(e){return this.ifKey(e,"ArrowRight;Right")}static ifLeftArrow(e){return this.ifKey(e,"ArrowLeft;Left")}static ifSpacebar(e){return this.ifKey(e,"Spacebar; ")}static ifKey(e,n){return n.split(";").some(r=>r===e.key)}},rv=(()=>{class t{transform(n){return Object.keys(n)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275pipe=n0({name:"keys",type:t,pure:!0}),t})(),vT=(()=>{class t{constructor(n,i){this.keysPipe=n,this.document=i,this.config={length:4},this.onInputChange=new Ke,this.inputControls=new Array(this.config.length),this.componentKey=Math.random().toString(36).substring(2)+new Date().getTime().toString(36)}get inputType(){return this.config?.isPasswordInput?"password":this.config?.allowNumbersOnly?"tel":"text"}ngOnInit(){this.otpForm=new $n({});for(let n=0;n<this.config.length;n++)this.otpForm.addControl(this.getControlName(n),new De);this.otpForm.valueChanges.subscribe(n=>{this.keysPipe.transform(this.otpForm.controls).forEach(i=>{var r=this.otpForm.controls[i].value;r&&r.length>1&&(r.length>=this.config.length?this.setValue(r):this.rebuildValue())})})}ngAfterViewInit(){if(!this.config.disableAutoFocus){let n=this.document.getElementById(`c_${this.componentKey}`);if(n){let i=n.getElementsByClassName("otp-input")[0];i&&i.focus&&i.focus()}}}getControlName(n){return`ctrl_${n}`}onKeyDown(n,i){let r=this.getBoxId(i-1),s=this.getBoxId(i);if(nr.ifSpacebar(n))return n.preventDefault(),!1;if(nr.ifBackspace(n)){n.target.value?this.clearInput(s,i):(this.clearInput(r,i-1),this.setSelected(r)),this.rebuildValue();return}}onInput(n){let i=this.currentVal?`${this.currentVal}${n.target.value}`:n.target.value;if(this.config.allowNumbersOnly&&!this.validateNumber(i)){n.target.value="",n.stopPropagation(),n.preventDefault();return}}onKeyUp(n,i){nr.ifTab(n)&&(i-=1);let r=this.getBoxId(i+1),s=this.getBoxId(i-1),o=this.getBoxId(i);if(nr.ifRightArrow(n)){n.preventDefault(),this.setSelected(r);return}if(nr.ifLeftArrow(n)){n.preventDefault(),this.setSelected(s);return}if(nr.ifDelete(n)){n.target.value?this.clearInput(o,i):(this.clearInput(s,i-1),this.setSelected(s)),this.rebuildValue();return}n.target.value&&(this.ifValidKeyCode(n)&&this.setSelected(r),this.rebuildValue())}validateNumber(n){return n&&/^[0-9]+$/.test(n)}getBoxId(n){return`otp_${n}_${this.componentKey}`}clearInput(n,i){let r=this.getControlName(i);this.otpForm.controls[r]?.setValue(null);let s=this.document.getElementById(n);s&&s instanceof HTMLInputElement&&(s.value=null)}setSelected(n){this.focusTo(n);let i=this.document.getElementById(n);i&&i.setSelectionRange&&setTimeout(()=>{i.setSelectionRange(0,1)},0)}ifValidKeyCode(n){let i=n.key;return/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)||/[a-zA-Z0-9-_]/.test(i)}focusTo(n){let i=this.document.getElementById(n);i&&i.focus()}setValue(n){if(!(this.config.allowNumbersOnly&&isNaN(n))){if(this.otpForm.reset(),!n){this.rebuildValue();return}if(n=n.toString().replace(/\s/g,""),Array.from(n).forEach((r,s)=>{this.otpForm.get(this.getControlName(s))&&this.otpForm.get(this.getControlName(s)).setValue(r)}),!this.config.disableAutoFocus){let r=this.document.getElementById(`c_${this.componentKey}`);var i=n.length<this.config.length?n.length:this.config.length-1;let s=r.getElementsByClassName("otp-input")[i];s&&s.focus&&s.focus()}this.rebuildValue()}}rebuildValue(){let n="";this.keysPipe.transform(this.otpForm.controls).forEach(i=>{if(this.otpForm.controls[i].value){let r=this.otpForm.controls[i].value,s=r.length>1,o=!this.config.allowNumbersOnly&&this.config.letterCase&&(this.config.letterCase.toLocaleLowerCase()=="upper"||this.config.letterCase.toLocaleLowerCase()=="lower");r=r[0];let c=o?this.config.letterCase.toLocaleLowerCase()=="upper"?r.toUpperCase():r.toLowerCase():r;o&&c==r?o=!1:r=c,n+=r,(s||o)&&this.otpForm.controls[i].setValue(r)}}),this.formCtrl?.setValue&&this.formCtrl.setValue(n),this.onInputChange.emit(n),this.currentVal=n}handlePaste(n){let i=n.clipboardData||window.clipboardData;if(i)var r=i.getData("Text");n.stopPropagation(),n.preventDefault(),!(!r||this.config.allowNumbersOnly&&!this.validateNumber(r))&&this.setValue(r)}}return t.\u0275fac=function(n){return new(n||t)(k(rv),k(ue))},t.\u0275cmp=H({type:t,selectors:[["ng-otp-input"]],inputs:{config:"config",formCtrl:"formCtrl"},outputs:{onInputChange:"onInputChange"},decls:1,vars:1,consts:[["inp",""],[3,"class","id","ngStyle",4,"ngIf"],[3,"id","ngStyle"],["autocomplete","one-time-code",3,"pattern","type","placeholder","ngStyle","class","formControl","id","paste","keyup","input","keydown",4,"ngFor","ngForOf"],["autocomplete","one-time-code",3,"paste","keyup","input","keydown","pattern","type","placeholder","ngStyle","formControl","id"]],template:function(n,i){n&1&&oe(0,OV,3,9,"div",1),n&2&&j("ngIf",i.otpForm==null?null:i.otpForm.controls)},dependencies:[Nt,w0,_t,mn,vm,qn,mm,rv],styles:[".otp-input[_ngcontent-%COMP%]{width:50px;height:50px;border-radius:4px;border:solid 1px #c5c5c5;text-align:center;font-size:32px}.ng-otp-input-wrapper[_ngcontent-%COMP%]   .otp-input[_ngcontent-%COMP%]:not(:last-child){margin-right:8px}@media screen and (max-width: 767px){.otp-input[_ngcontent-%COMP%]{width:40px;font-size:24px;height:40px}}@media screen and (max-width: 420px){.otp-input[_ngcontent-%COMP%]{width:30px;font-size:18px;height:30px}}"]}),t})(),yT=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=He({type:t}),t.\u0275inj=We({providers:[rv],imports:[[xe,Os,Gn]]}),t})();var ze=(()=>{let e=class e{constructor(i){this.location=i,this.pageTitle=""}back(){this.location.back()}};e.\u0275fac=function(r){return new(r||e)(k(Vi))},e.\u0275cmp=H({type:e,selectors:[["app-header-with-back"]],inputs:{pageTitle:"pageTitle"},standalone:!0,features:[Q],decls:5,vars:1,consts:[[1,"header"],[1,"back-with-title","header_text_color",3,"click"],["src","assets/header/back_button.svg","alt",""]],template:function(r,s){r&1&&(v(0,"div",0)(1,"div",1),G("click",function(){return s.back()}),L(2,"img",2),v(3,"p"),E(4),y()()()),r&2&&(N(4),ve(s.pageTitle))},styles:[".header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:0 8px;position:fixed;width:92vw;z-index:100;background:#fff;border-bottom:1px solid #8d8c8c;height:50px;margin-left:4vw}.header[_ngcontent-%COMP%]   .back-with-title[_ngcontent-%COMP%]{display:flex;gap:10px;align-items:center}.header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-family:Krona One,sans-serif;font-size:18px;font-style:normal;font-weight:400;line-height:normal}"]});let t=e;return t})();var xV=["ngOtpInput"];function MV(t,e){if(t&1){let n=Le();v(0,"ng-otp-input",12,0),G("onInputChange",function(r){ge(n);let s=ne();return _e(s.onOtpChange(r))}),y()}if(t&2){let n=ne();j("config",n.config)}}function NV(t,e){if(t&1&&(v(0,"button",13),E(1),y()),t&2){let n=ne();N(),be(" Wait for ",n.resendOtpTime," second ")}}function FV(t,e){if(t&1){let n=Le();v(0,"button",14),G("click",function(){ge(n);let r=ne();return _e(r.sendOTP())}),E(1," Get OTP "),y()}}var bT=(()=>{let e=class e{constructor(i,r,s){this.router=i,this.dataProvider=r,this.authService=s,this.showOtpComponent=!0,this.resendOtpTime=120,this.config={allowNumbersOnly:!0,length:6,isPasswordInput:!1,disableAutoFocus:!1,placeholder:"",inputmode:"tel",inputStyles:{width:"38px",height:"38px"}}}ngOnInit(){this.dataProvider.loginConfirmationResult?this.startResendTimer():this.router.navigate(["login"])}sendOTP(){return g(this,null,function*(){this.dataProvider.loginConfirmationResult&&(this.verifier||(this.verifier=new Cr(this.authService.auth,"recaptcha-container2",{size:"invisible"})),this.authService.loginWithPhoneNumber(this.dataProvider.userMobile,this.verifier).then(i=>{this.resendOtpTime=60,this.startResendTimer()}).catch(i=>{console.log(i)}).finally(()=>{console.log("finally")}))})}login(){return g(this,null,function*(){this.dataProvider.loginConfirmationResult&&this.dataProvider.loginConfirmationResult.confirm(this.otp).then(i=>{this.authService.setUserData(i.user),this.router.navigate(["profile"])}).catch(i=>{console.log(i)}).finally(()=>{console.log("finally")})})}onOtpChange(i){this.otp=i}setVal(i){this.ngOtpInput.setValue(i)}toggleDisable(){this.ngOtpInput.otpForm&&(this.ngOtpInput.otpForm.disabled?this.ngOtpInput.otpForm.enable():this.ngOtpInput.otpForm.disable())}onConfigChange(){this.showOtpComponent=!1,this.otp=null,setTimeout(()=>{this.showOtpComponent=!0},0)}startResendTimer(){setTimeout(()=>{this.resendOtpTime>0&&(this.resendOtpTime--,this.startResendTimer())},1e3)}};e.\u0275fac=function(r){return new(r||e)(k(he),k(ht),k(ti))},e.\u0275cmp=H({type:e,selectors:[["app-otp"]],viewQuery:function(r,s){if(r&1&&hr(xV,5),r&2){let o;Ni(o=Fi())&&(s.ngOtpInput=o.first)}},standalone:!0,features:[Q],decls:13,vars:4,consts:[["ngOtpInput",""],[3,"pageTitle"],[1,"otp-container"],["id","recaptcha-container2"],["src","assets/otp/otp_page.svg","alt",""],[1,"login-section"],[1,"otp-inputs"],[1,"header_text_color"],[3,"config","onInputChange",4,"ngIf"],["class","description_text secondary_botton_gradient login",4,"ngIf"],["class","header_text_color secondary_botton_gradient login",3,"click",4,"ngIf"],[1,"white","primary_botton_gradient","login",3,"click"],[3,"onInputChange","config"],[1,"description_text","secondary_botton_gradient","login"],[1,"header_text_color","secondary_botton_gradient","login",3,"click"]],template:function(r,s){r&1&&(L(0,"app-header-with-back",1),v(1,"section",2),L(2,"div",3)(3,"img",4),v(4,"div",5)(5,"div",6)(6,"p",7),E(7,"Auto filling OTP from sms"),y(),oe(8,MV,2,1,"ng-otp-input",8),y(),oe(9,NV,2,1,"button",9)(10,FV,2,0,"button",10),v(11,"button",11),G("click",function(){return s.login()}),E(12," Verify "),y()()()),r&2&&(j("pageTitle","Enter OTP"),N(8),j("ngIf",s.showOtpComponent),N(),j("ngIf",s.resendOtpTime>0),N(),j("ngIf",s.resendOtpTime===0))},dependencies:[Gn,yT,vT,xe,Nt,ze],styles:["section[_ngcontent-%COMP%]{padding-top:50px;display:flex;align-items:center;flex-direction:column}section[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:70%;margin-top:10vh}section[_ngcontent-%COMP%]   .login-section[_ngcontent-%COMP%]{position:absolute;bottom:2px;width:94%}section[_ngcontent-%COMP%]   .login-section[_ngcontent-%COMP%]   .login[_ngcontent-%COMP%]{border:1px solid rgb(215,215,215);font-size:16px;font-style:normal;font-weight:700;line-height:normal}section[_ngcontent-%COMP%]   .login-section[_ngcontent-%COMP%]   .otp-inputs[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:10px;margin-bottom:20px}button[_ngcontent-%COMP%]{display:flex;width:100%;height:100%;padding:20px;justify-content:center;align-items:center;gap:20px;flex-shrink:0;border:none;border-radius:30px;margin-bottom:10px;font-size:16px;font-family:Jura,sans-serif;font-style:normal;font-weight:700;line-height:normal}"]});let t=e;return t})();var PT="firebasestorage.googleapis.com",RT="storageBucket",VV=2*60*1e3,LV=10*60*1e3,UV=1e3;var Qe=class t extends vt{constructor(e,n,i=0){super(sv(e),`Firebase Storage: ${n} (${sv(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,t.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return sv(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}},Ge=function(t){return t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment",t}(Ge||{});function sv(t){return"storage/"+t}function pv(){let t="An unknown error occurred, please check the error payload for server response.";return new Qe(Ge.UNKNOWN,t)}function jV(t){return new Qe(Ge.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function BV(t){return new Qe(Ge.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function zV(){let t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Qe(Ge.UNAUTHENTICATED,t)}function $V(){return new Qe(Ge.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function qV(t){return new Qe(Ge.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function DT(){return new Qe(Ge.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function OT(){return new Qe(Ge.CANCELED,"User canceled the upload/download.")}function GV(t){return new Qe(Ge.INVALID_URL,"Invalid URL '"+t+"'.")}function WV(t){return new Qe(Ge.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function HV(){return new Qe(Ge.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+RT+"' property when initializing the app?")}function kT(){return new Qe(Ge.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function KV(){return new Qe(Ge.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function YV(){return new Qe(Ge.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function QV(t){return new Qe(Ge.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function av(t){return new Qe(Ge.INVALID_ARGUMENT,t)}function xT(){return new Qe(Ge.APP_DELETED,"The Firebase app was deleted.")}function XV(t){return new Qe(Ge.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Tc(t,e){return new Qe(Ge.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Cc(t){throw new Qe(Ge.INTERNAL_ERROR,"Internal error: "+t)}var Mn=class t{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){let e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let i;try{i=t.makeFromUrl(e,n)}catch{return new t(e,"")}if(i.path==="")return i;throw WV(e)}static makeFromUrl(e,n){let i=null,r="([A-Za-z0-9.\\-_]+)";function s(Z){Z.path.charAt(Z.path.length-1)==="/"&&(Z.path_=Z.path_.slice(0,-1))}let o="(/(.*))?$",c=new RegExp("^gs://"+r+o,"i"),l={bucket:1,path:3};function u(Z){Z.path_=decodeURIComponent(Z.path)}let h="v[A-Za-z0-9_]+",p=n.replace(/[.]/g,"\\."),_="(/([^?#]*).*)?$",C=new RegExp(`^https?://${p}/${h}/b/${r}/o${_}`,"i"),O={bucket:1,path:3},F=n===PT?"(?:storage.googleapis.com|storage.cloud.google.com)":n,D="([^?#]*)",z=new RegExp(`^https?://${F}/${r}/${D}`,"i"),Y=[{regex:c,indices:l,postModify:s},{regex:C,indices:O,postModify:u},{regex:z,indices:{bucket:1,path:2},postModify:u}];for(let Z=0;Z<Y.length;Z++){let Ne=Y[Z],le=Ne.regex.exec(e);if(le){let T=le[Ne.indices.bucket],b=le[Ne.indices.path];b||(b=""),i=new t(T,b),Ne.postModify(i);break}}if(i==null)throw GV(e);return i}},cv=class{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}};function JV(t,e,n){let i=1,r=null,s=null,o=!1,c=0;function l(){return c===2}let u=!1;function h(...D){u||(u=!0,e.apply(null,D))}function p(D){r=setTimeout(()=>{r=null,t(C,l())},D)}function _(){s&&clearTimeout(s)}function C(D,...z){if(u){_();return}if(D){_(),h.call(null,D,...z);return}if(l()||o){_(),h.call(null,D,...z);return}i<64&&(i*=2);let Y;c===1?(c=2,Y=0):Y=(i+Math.random())*1e3,p(Y)}let O=!1;function F(D){O||(O=!0,_(),!u&&(r!==null?(D||(c=2),clearTimeout(r),p(0)):D||(c=1)))}return p(0),s=setTimeout(()=>{o=!0,F(!0)},n),F}function ZV(t){t(!1)}function eL(t){return t!==void 0}function tL(t){return typeof t=="function"}function nL(t){return typeof t=="object"&&!Array.isArray(t)}function $d(t){return typeof t=="string"||t instanceof String}function wT(t){return mv()&&t instanceof Blob}function mv(){return typeof Blob<"u"}function IT(t,e,n,i){if(i<e)throw av(`Invalid value for '${t}'. Expected ${e} or greater.`);if(i>n)throw av(`Invalid value for '${t}'. Expected ${n} or less.`)}function Pc(t,e,n){let i=e;return n==null&&(i=`https://${e}`),`${n}://${i}/v0${t}`}function MT(t){let e=encodeURIComponent,n="?";for(let i in t)if(t.hasOwnProperty(i)){let r=e(i)+"="+e(t[i]);n=n+r+"&"}return n=n.slice(0,-1),n}var uo=function(t){return t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT",t}(uo||{});function NT(t,e){let n=t>=500&&t<600,r=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||r||s}var lv=class{constructor(e,n,i,r,s,o,c,l,u,h,p,_=!0){this.url_=e,this.method_=n,this.headers_=i,this.body_=r,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=c,this.errorCallback_=l,this.timeout_=u,this.progressCallback_=h,this.connectionFactory_=p,this.retry=_,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((C,O)=>{this.resolve_=C,this.reject_=O,this.start_()})}start_(){let e=(i,r)=>{if(r){i(!1,new lo(!1,null,!0));return}let s=this.connectionFactory_();this.pendingConnection_=s;let o=c=>{let l=c.loaded,u=c.lengthComputable?c.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,u)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;let c=s.getErrorCode()===uo.NO_ERROR,l=s.getStatus();if(!c||NT(l,this.additionalRetryCodes_)&&this.retry){let h=s.getErrorCode()===uo.ABORT;i(!1,new lo(!1,null,h));return}let u=this.successCodes_.indexOf(l)!==-1;i(!0,new lo(u,s))})},n=(i,r)=>{let s=this.resolve_,o=this.reject_,c=r.connection;if(r.wasSuccessCode)try{let l=this.callback_(c,c.getResponse());eL(l)?s(l):s()}catch(l){o(l)}else if(c!==null){let l=pv();l.serverResponse=c.getErrorText(),this.errorCallback_?o(this.errorCallback_(c,l)):o(l)}else if(r.canceled){let l=this.appDelete_?xT():OT();o(l)}else{let l=DT();o(l)}};this.canceled_?n(!1,new lo(!1,null,!0)):this.backoffId_=JV(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&ZV(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}},lo=class{constructor(e,n,i){this.wasSuccessCode=e,this.connection=n,this.canceled=!!i}};function iL(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function rL(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function sL(t,e){e&&(t["X-Firebase-GMPID"]=e)}function oL(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function aL(t,e,n,i,r,s,o=!0){let c=MT(t.urlParams),l=t.url+c,u=Object.assign({},t.headers);return sL(u,e),iL(u,n),rL(u,s),oL(u,i),new lv(l,t.method,u,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,r,o)}function cL(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function lL(...t){let e=cL();if(e!==void 0){let n=new e;for(let i=0;i<t.length;i++)n.append(t[i]);return n.getBlob()}else{if(mv())return new Blob(t);throw new Qe(Ge.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function uL(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}function dL(t){if(typeof atob>"u")throw QV("base-64");return atob(t)}var ni={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},Sc=class{constructor(e,n){this.data=e,this.contentType=n||null}};function hL(t,e){switch(t){case ni.RAW:return new Sc(FT(e));case ni.BASE64:case ni.BASE64URL:return new Sc(VT(t,e));case ni.DATA_URL:return new Sc(pL(e),mL(e))}throw pv()}function FT(t){let e=[];for(let n=0;n<t.length;n++){let i=t.charCodeAt(n);if(i<=127)e.push(i);else if(i<=2047)e.push(192|i>>6,128|i&63);else if((i&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{let s=i,o=t.charCodeAt(++n);i=65536|(s&1023)<<10|o&1023,e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|i&63)}else(i&64512)===56320?e.push(239,191,189):e.push(224|i>>12,128|i>>6&63,128|i&63)}return new Uint8Array(e)}function fL(t){let e;try{e=decodeURIComponent(t)}catch{throw Tc(ni.DATA_URL,"Malformed data URL.")}return FT(e)}function VT(t,e){switch(t){case ni.BASE64:{let r=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(r||s)throw Tc(t,"Invalid character '"+(r?"-":"_")+"' found: is it base64url encoded?");break}case ni.BASE64URL:{let r=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(r||s)throw Tc(t,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=dL(e)}catch(r){throw r.message.includes("polyfill")?r:Tc(t,"Invalid character found")}let i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}var Bd=class{constructor(e){this.base64=!1,this.contentType=null;let n=e.match(/^data:([^,]+)?,/);if(n===null)throw Tc(ni.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");let i=n[1]||null;i!=null&&(this.base64=gL(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=e.substring(e.indexOf(",")+1)}};function pL(t){let e=new Bd(t);return e.base64?VT(ni.BASE64,e.rest):fL(e.rest)}function mL(t){return new Bd(t).contentType}function gL(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}var zd=class t{constructor(e,n){let i=0,r="";wT(e)?(this.data_=e,i=e.size,r=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),i=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),i=e.length),this.size_=i,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,n){if(wT(this.data_)){let i=this.data_,r=uL(i,e,n);return r===null?null:new t(r)}else{let i=new Uint8Array(this.data_.buffer,e,n-e);return new t(i,!0)}}static getBlob(...e){if(mv()){let n=e.map(i=>i instanceof t?i.data_:i);return new t(lL.apply(null,n))}else{let n=e.map(o=>$d(o)?hL(ni.RAW,o).data:o.data_),i=0;n.forEach(o=>{i+=o.byteLength});let r=new Uint8Array(i),s=0;return n.forEach(o=>{for(let c=0;c<o.length;c++)r[s++]=o[c]}),new t(r,!0)}}uploadData(){return this.data_}};function LT(t){let e;try{e=JSON.parse(t)}catch{return null}return nL(e)?e:null}function _L(t){if(t.length===0)return null;let e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function vL(t,e){let n=e.split("/").filter(i=>i.length>0).join("/");return t.length===0?n:t+"/"+n}function UT(t){let e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}function yL(t,e){return e}var Rt=class{constructor(e,n,i,r){this.server=e,this.local=n||e,this.writable=!!i,this.xform=r||yL}},jd=null;function bL(t){return!$d(t)||t.length<2?t:UT(t)}function jT(){if(jd)return jd;let t=[];t.push(new Rt("bucket")),t.push(new Rt("generation")),t.push(new Rt("metageneration")),t.push(new Rt("name","fullPath",!0));function e(s,o){return bL(o)}let n=new Rt("name");n.xform=e,t.push(n);function i(s,o){return o!==void 0?Number(o):o}let r=new Rt("size");return r.xform=i,t.push(r),t.push(new Rt("timeCreated")),t.push(new Rt("updated")),t.push(new Rt("md5Hash",null,!0)),t.push(new Rt("cacheControl",null,!0)),t.push(new Rt("contentDisposition",null,!0)),t.push(new Rt("contentEncoding",null,!0)),t.push(new Rt("contentLanguage",null,!0)),t.push(new Rt("contentType",null,!0)),t.push(new Rt("metadata","customMetadata",!0)),jd=t,jd}function wL(t,e){function n(){let i=t.bucket,r=t.fullPath,s=new Mn(i,r);return e._makeStorageReference(s)}Object.defineProperty(t,"ref",{get:n})}function IL(t,e,n){let i={};i.type="file";let r=n.length;for(let s=0;s<r;s++){let o=n[s];i[o.local]=o.xform(i,e[o.server])}return wL(i,t),i}function BT(t,e,n){let i=LT(e);return i===null?null:IL(t,i,n)}function EL(t,e,n,i){let r=LT(e);if(r===null||!$d(r.downloadTokens))return null;let s=r.downloadTokens;if(s.length===0)return null;let o=encodeURIComponent;return s.split(",").map(u=>{let h=t.bucket,p=t.fullPath,_="/b/"+o(h)+"/o/"+o(p),C=Pc(_,n,i),O=MT({alt:"media",token:u});return C+O})[0]}function zT(t,e){let n={},i=e.length;for(let r=0;r<i;r++){let s=e[r];s.writable&&(n[s.server]=t[s.local])}return JSON.stringify(n)}var ir=class{constructor(e,n,i,r){this.url=e,this.method=n,this.handler=i,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}};function Ci(t){if(!t)throw pv()}function gv(t,e){function n(i,r){let s=BT(t,r,e);return Ci(s!==null),s}return n}function CL(t,e){function n(i,r){let s=BT(t,r,e);return Ci(s!==null),EL(s,r,t.host,t._protocol)}return n}function Rc(t){function e(n,i){let r;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?r=$V():r=zV():n.getStatus()===402?r=BV(t.bucket):n.getStatus()===403?r=qV(t.path):r=i,r.status=n.getStatus(),r.serverResponse=i.serverResponse,r}return e}function $T(t){let e=Rc(t);function n(i,r){let s=e(i,r);return i.getStatus()===404&&(s=jV(t.path)),s.serverResponse=r.serverResponse,s}return n}function TL(t,e,n){let i=e.fullServerUrl(),r=Pc(i,t.host,t._protocol),s="GET",o=t.maxOperationRetryTime,c=new ir(r,s,gv(t,n),o);return c.errorHandler=$T(e),c}function SL(t,e,n){let i=e.fullServerUrl(),r=Pc(i,t.host,t._protocol),s="GET",o=t.maxOperationRetryTime,c=new ir(r,s,CL(t,n),o);return c.errorHandler=$T(e),c}function AL(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function qT(t,e,n){let i=Object.assign({},n);return i.fullPath=t.path,i.size=e.size(),i.contentType||(i.contentType=AL(null,e)),i}function PL(t,e,n,i,r){let s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function c(){let Y="";for(let Z=0;Z<2;Z++)Y=Y+Math.random().toString().slice(2);return Y}let l=c();o["Content-Type"]="multipart/related; boundary="+l;let u=qT(e,i,r),h=zT(u,n),p="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+h+`\r
--`+l+`\r
Content-Type: `+u.contentType+`\r
\r
`,_=`\r
--`+l+"--",C=zd.getBlob(p,i,_);if(C===null)throw kT();let O={name:u.fullPath},F=Pc(s,t.host,t._protocol),D="POST",z=t.maxUploadRetryTime,X=new ir(F,D,gv(t,n),z);return X.urlParams=O,X.headers=o,X.body=C.uploadData(),X.errorHandler=Rc(e),X}var ho=class{constructor(e,n,i,r){this.current=e,this.total=n,this.finalized=!!i,this.metadata=r||null}};function _v(t,e){let n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch{Ci(!1)}return Ci(!!n&&(e||["active"]).indexOf(n)!==-1),n}function RL(t,e,n,i,r){let s=e.bucketOnlyServerUrl(),o=qT(e,i,r),c={name:o.fullPath},l=Pc(s,t.host,t._protocol),u="POST",h={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${i.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},p=zT(o,n),_=t.maxUploadRetryTime;function C(F){_v(F);let D;try{D=F.getResponseHeader("X-Goog-Upload-URL")}catch{Ci(!1)}return Ci($d(D)),D}let O=new ir(l,u,C,_);return O.urlParams=c,O.headers=h,O.body=p,O.errorHandler=Rc(e),O}function DL(t,e,n,i){let r={"X-Goog-Upload-Command":"query"};function s(u){let h=_v(u,["active","final"]),p=null;try{p=u.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Ci(!1)}p||Ci(!1);let _=Number(p);return Ci(!isNaN(_)),new ho(_,i.size(),h==="final")}let o="POST",c=t.maxUploadRetryTime,l=new ir(n,o,s,c);return l.headers=r,l.errorHandler=Rc(e),l}var ET=256*1024;function OL(t,e,n,i,r,s,o,c){let l=new ho(0,0);if(o?(l.current=o.current,l.total=o.total):(l.current=0,l.total=i.size()),i.size()!==l.total)throw KV();let u=l.total-l.current,h=u;r>0&&(h=Math.min(h,r));let p=l.current,_=p+h,C="";h===0?C="finalize":u===h?C="upload, finalize":C="upload";let O={"X-Goog-Upload-Command":C,"X-Goog-Upload-Offset":`${l.current}`},F=i.slice(p,_);if(F===null)throw kT();function D(Z,Ne){let le=_v(Z,["active","final"]),T=l.current+h,b=i.size(),w;return le==="final"?w=gv(e,s)(Z,Ne):w=null,new ho(T,b,le==="final",w)}let z="POST",X=e.maxUploadRetryTime,Y=new ir(n,z,D,X);return Y.headers=O,Y.body=F.uploadData(),Y.progressCallback=c||null,Y.errorHandler=Rc(t),Y}var Kt={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function ov(t){switch(t){case"running":case"pausing":case"canceling":return Kt.RUNNING;case"paused":return Kt.PAUSED;case"success":return Kt.SUCCESS;case"canceled":return Kt.CANCELED;case"error":return Kt.ERROR;default:return Kt.ERROR}}var uv=class{constructor(e,n,i){if(tL(e)||n!=null||i!=null)this.next=e,this.error=n??void 0,this.complete=i??void 0;else{let s=e;this.next=s.next,this.error=s.error,this.complete=s.complete}}};function ao(t){return(...e)=>{Promise.resolve().then(()=>t(...e))}}var CT=null,dv=class{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=uo.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=uo.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=uo.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,i,r){if(this.sent_)throw Cc("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),r!==void 0)for(let s in r)r.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,r[s].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Cc("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Cc("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Cc("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Cc("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}},hv=class extends dv{initXhr(){this.xhr_.responseType="text"}};function co(){return CT?CT():new hv}var fv=class{constructor(e,n,i=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=n,this._metadata=i,this._mappings=jT(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=r=>{if(this._request=void 0,this._chunkMultiplier=1,r._codeEquals(Ge.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{let s=this.isExponentialBackoffExpired();if(NT(r.status,[]))if(s)r=DT();else{this.sleepTime=Math.max(this.sleepTime*2,UV),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=r,this._transition("error")}},this._metadataErrorHandler=r=>{this._request=void 0,r._codeEquals(Ge.CANCELED)?this.completeTransitions_():(this._error=r,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((r,s)=>{this._resolve=r,this._reject=s,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){let e=this._transferred;return n=>this._updateProgress(e+n)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([n,i])=>{switch(this._state){case"running":e(n,i);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,n)=>{let i=RL(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(i,co,e,n);this._request=r,r.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){let e=this._uploadUrl;this._resolveToken((n,i)=>{let r=DL(this._ref.storage,this._ref._location,e,this._blob),s=this._ref.storage._makeRequest(r,co,n,i);this._request=s,s.getPromise().then(o=>{o=o,this._request=void 0,this._updateProgress(o.current),this._needToFetchStatus=!1,o.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){let e=ET*this._chunkMultiplier,n=new ho(this._transferred,this._blob.size()),i=this._uploadUrl;this._resolveToken((r,s)=>{let o;try{o=OL(this._ref._location,this._ref.storage,i,this._blob,e,this._mappings,n,this._makeProgressCallback())}catch(l){this._error=l,this._transition("error");return}let c=this._ref.storage._makeRequest(o,co,r,s,!1);this._request=c,c.getPromise().then(l=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(l.current),l.finalized?(this._metadata=l.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){ET*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,n)=>{let i=TL(this._ref.storage,this._ref._location,this._mappings),r=this._ref.storage._makeRequest(i,co,e,n);this._request=r,r.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,n)=>{let i=PL(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(i,co,e,n);this._request=r,r.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){let n=this._transferred;this._transferred=e,this._transferred!==n&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":let n=this._state==="paused";this._state=e,n&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=OT(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){let e=ov(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,n,i,r){let s=new uv(n||void 0,i||void 0,r||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(e,n){return this._promise.then(e,n)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){let n=this._observers.indexOf(e);n!==-1&&this._observers.splice(n,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(n=>{this._notifyObserver(n)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(ov(this._state)){case Kt.SUCCESS:ao(this._resolve.bind(null,this.snapshot))();break;case Kt.CANCELED:case Kt.ERROR:let n=this._reject;ao(n.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(ov(this._state)){case Kt.RUNNING:case Kt.PAUSED:e.next&&ao(e.next.bind(e,this.snapshot))();break;case Kt.SUCCESS:e.complete&&ao(e.complete.bind(e))();break;case Kt.CANCELED:case Kt.ERROR:e.error&&ao(e.error.bind(e,this._error))();break;default:e.error&&ao(e.error.bind(e,this._error))()}}resume(){let e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){let e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){let e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}};var fo=class t{constructor(e,n){this._service=e,n instanceof Mn?this._location=n:this._location=Mn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new t(e,n)}get root(){let e=new Mn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return UT(this._location.path)}get storage(){return this._service}get parent(){let e=_L(this._location.path);if(e===null)return null;let n=new Mn(this._location.bucket,e);return new t(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw XV(e)}};function kL(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new fv(t,new zd(e),n)}function xL(t){t._throwIfRoot("getDownloadURL");let e=SL(t.storage,t._location,jT());return t.storage.makeRequestWithTokens(e,co).then(n=>{if(n===null)throw YV();return n})}function ML(t,e){let n=vL(t._location.path,e),i=new Mn(t._location.bucket,n);return new fo(t.storage,i)}function NL(t){return/^[A-Za-z]+:\/\//.test(t)}function FL(t,e){return new fo(t,e)}function GT(t,e){if(t instanceof Ac){let n=t;if(n._bucket==null)throw HV();let i=new fo(n,n._bucket);return e!=null?GT(i,e):i}else return e!==void 0?ML(t,e):t}function VL(t,e){if(e&&NL(e)){if(t instanceof Ac)return FL(t,e);throw av("To use ref(service, url), the first argument must be a Storage instance.")}else return GT(t,e)}function TT(t,e){let n=e?.[RT];return n==null?null:Mn.makeFromBucketSpec(n,t)}function LL(t,e,n,i={}){t.host=`${e}:${n}`,t._protocol="http";let{mockUserToken:r}=i;r&&(t._overrideAuthToken=typeof r=="string"?r:Ll(r,t.app.options.projectId))}var Ac=class{constructor(e,n,i,r,s){this.app=e,this._authProvider=n,this._appCheckProvider=i,this._url=r,this._firebaseVersion=s,this._bucket=null,this._host=PT,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=VV,this._maxUploadRetryTime=LV,this._requests=new Set,r!=null?this._bucket=Mn.makeFromBucketSpec(r,this._host):this._bucket=TT(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Mn.makeFromBucketSpec(this._url,e):this._bucket=TT(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){IT("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){IT("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){return g(this,null,function*(){if(this._overrideAuthToken)return this._overrideAuthToken;let e=this._authProvider.getImmediate({optional:!0});if(e){let n=yield e.getToken();if(n!==null)return n.accessToken}return null})}_getAppCheckToken(){return g(this,null,function*(){let e=this._appCheckProvider.getImmediate({optional:!0});return e?(yield e.getToken()).token:null})}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new fo(this,e)}_makeRequest(e,n,i,r,s=!0){if(this._deleted)return new cv(xT());{let o=aL(e,this._appId,i,r,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}makeRequestWithTokens(e,n){return g(this,null,function*(){let[i,r]=yield Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,i,r).getPromise()})}},ST="@firebase/storage",AT="0.12.6";var WT="storage";function HT(t,e,n){return t=Re(t),kL(t,e,n)}function KT(t){return t=Re(t),xL(t)}function YT(t,e){return t=Re(t),VL(t,e)}function QT(t=en(),e){t=Re(t);let i=Ht(t,WT).getImmediate({identifier:e}),r=bs("storage");return r&&XT(i,...r),i}function XT(t,e,n,i={}){LL(t,e,n,i)}function UL(t,{instanceIdentifier:e}){let n=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),r=t.getProvider("app-check-internal");return new Ac(n,i,r,e,Ln)}function jL(){yt(new et(WT,UL,"PUBLIC").setMultipleInstances(!0)),we(ST,AT,""),we(ST,AT,"esm2017")}jL();var Yr=class{constructor(e){return e}},JT="storage",vv=class{constructor(){return Tn(JT)}};var yv=new te("angularfire2.storage-instances");function BL(t,e){let n=jn(JT,t,e);return n&&new Yr(n)}function zL(t){return(e,n)=>{let i=e.runOutsideAngular(()=>t(n));return new Yr(i)}}var $L={provide:vv,deps:[[new Ve,yv]]},qL={provide:Yr,useFactory:BL,deps:[[new Ve,yv],$t]};function ZT(t,...e){return we("angularfire",tn.full,"gcs"),pt([qL,$L,{provide:yv,useFactory:zL(t),multi:!0,deps:[ce,ke,pn,nn,[new Ve,mi],[new Ve,Un],...e]}])}var eS=Me(KT,!0);var tS=Me(QT,!0);var bv=Me(YT,!0);var nS=Me(HT,!0);var iS=(()=>{let e=class e{constructor(i){this.Firestore=i}updateProfileInfo(i){return g(this,null,function*(){return Zn(gt(this.Firestore,"users",i.uid),i)})}};e.\u0275fac=function(r){return new(r||e)(M(Ue))},e.\u0275prov=$({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var rS=(()=>{let e=class e{constructor(i,r,s,o,c,l,u){this.storage=i,this.firestore=r,this.Router=s,this.dataProvider=o,this.ProfileInfoService=c,this.Auth=l,this.AuthService=u,this.userForm=new $n({name:new De("",qe.required),gender:new De("male",qe.required),dob:new De("",qe.required),active:new De(!0),photoURL:new De("assets/login/loginPageLogo.svg"),age:new De(""),uid:new De(""),phoneNumber:new De("")}),this.isImgSizeValid=!1}openDatePicker(){let i=document.getElementById("startDate");i.focus(),i.click()}ngOnInit(){}changePhoto(i){return g(this,null,function*(){let r=i.target.files[0];if(r.size/1024>500){this.isImgSizeValid=!0;return}else{this.isImgSizeValid=!1;let h=`donorProfile/${`${new Date().getTime()}.${r.name.split(".").pop()}`}`;yield nS(bv(this.storage,h),r);let p=yield eS(bv(this.storage,h));this.userForm.patchValue({photoURL:p})}})}removePhoto(){this.userForm.value.img="assets/add-user/dummyProfile.jpg"}cancel(){this.Router.navigate(["login"])}submit(){this.userForm.valid&&(this.userForm.value.uid=this.dataProvider.currentUser?.user.uid,this.userForm.value.phoneNumber=this.dataProvider.currentUser?.userData.phoneNumber,this.userForm.value.age=new Date().getFullYear()-new Date(this.userForm.value.dob).getFullYear(),this.userForm.value.dob=new Date(this.userForm.value.dob).toISOString(),this.ProfileInfoService.updateProfileInfo(this.userForm.value).then(()=>{this.Router.navigate(["home"])}))}};e.\u0275fac=function(r){return new(r||e)(k(Yr),k(Ue),k(he),k(ht),k(iS),k(Sn),k(ti))},e.\u0275cmp=H({type:e,selectors:[["app-profile-info"]],standalone:!0,features:[Q],decls:38,vars:4,consts:[["fileInput",""],[3,"pageTitle"],["alt","Profile Photo",1,"profile_section",3,"src"],[1,"upload_picture_btn"],["type","file","accept","image/*",2,"display","none",3,"change"],["src","assets/profile/camera.svg","alt","",3,"click"],["src","assets/profile/upload_img_icon.svg","alt","",3,"click"],[1,"login-secton"],[3,"formGroup"],[1,"field"],[1,"description_text"],["type","text","placeholder","Enter Your Name","formControlName","name",1,"input_box_bg_gradient","header_text_color"],["formControlName","gender",1,"input_box_bg_gradient","header_text_color"],["value","male"],["value","female"],["value","other"],[1,"date-picker-wrapper"],["type","date","id","startDate","name","startDate","value","2024-07-13","formControlName","dob","min","1940-01-01","max","2015-12-31",1,"input_box_bg_gradient","header_text_color","custom-date-input"],[1,"custom-calendar-icon",3,"click"],[3,"click","btnName"]],template:function(r,s){if(r&1){let o=Le();L(0,"app-header-with-back",1),v(1,"section")(2,"div"),L(3,"img",2),y(),v(4,"div",3)(5,"div")(6,"input",4,0),G("change",function(l){return ge(o),_e(s.changePhoto(l))}),y(),v(8,"img",5),G("click",function(){ge(o);let l=il(7);return _e(l.click())}),y()(),v(9,"div")(10,"input",4,0),G("change",function(l){return ge(o),_e(s.changePhoto(l))}),y(),v(12,"img",6),G("click",function(){ge(o);let l=il(7);return _e(l.click())}),y()()(),v(13,"div",7)(14,"form",8)(15,"div",9)(16,"label",10),E(17,"Name"),y(),L(18,"br")(19,"input",11),y(),v(20,"div",9)(21,"label",10),E(22,"Gender"),y(),L(23,"br"),v(24,"select",12)(25,"option",13),E(26,"Male"),y(),v(27,"option",14),E(28,"Female"),y(),v(29,"option",15),E(30,"Other"),y()()(),v(31,"div",9)(32,"label",10),E(33,"DOB"),y(),v(34,"div",16),L(35,"input",17),v(36,"div",18),G("click",function(){return ge(o),_e(s.openDatePicker())}),y()()()(),v(37,"lib-save-btn",19),G("click",function(){return ge(o),_e(s.submit())}),y()()()}r&2&&(j("pageTitle","Your Profile"),N(3),j("src",s.userForm.value.photoURL,Tt),N(11),j("formGroup",s.userForm),N(23),j("btnName","Next"))},dependencies:[ze,Gn,Ps,Rs,Ds,mn,Qi,qn,As,Pr,Rr,Nl],styles:["section[_ngcontent-%COMP%]{padding-top:50px;display:flex;align-items:center;justify-content:center;flex-direction:column;width:100vw}section[_ngcontent-%COMP%]   .profile_section[_ngcontent-%COMP%]{margin-top:50px;border:2px solid rgb(47,21,170);border-radius:50%;width:225px;height:225px}section[_ngcontent-%COMP%]   .upload_picture_btn[_ngcontent-%COMP%]{display:flex;width:100%;justify-content:center;align-items:center;gap:25px;margin-top:15px}section[_ngcontent-%COMP%]   .login-secton[_ngcontent-%COMP%]{position:absolute;bottom:5px;width:94%}section[_ngcontent-%COMP%]   .login-secton[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:15px;font-size:18px;font-style:normal;font-weight:700;line-height:normal;font-family:Jura}section[_ngcontent-%COMP%]   .login-secton[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-left:5px;font-family:Nunito,sans-serif;font-size:10px;font-style:normal;font-weight:500;line-height:normal}section[_ngcontent-%COMP%]   .login-secton[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]{width:100%;margin-bottom:10px}section[_ngcontent-%COMP%]   .login-secton[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], section[_ngcontent-%COMP%]   .login-secton[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{border:.5px solid rgb(166,166,166);border-radius:12px;width:100%;height:40px;padding:1px 6px;font-family:Merge One,sans-serif;font-size:14px;font-style:normal;font-weight:400;line-height:normal}section[_ngcontent-%COMP%]   .login-secton[_ngcontent-%COMP%]   .custom-date-input[_ngcontent-%COMP%]{position:relative;background:url(/assets/profile/datepicker.svg) no-repeat right 10px center;background-size:20px 20px}section[_ngcontent-%COMP%]   .login-secton[_ngcontent-%COMP%]   .custom-date-input[_ngcontent-%COMP%]::-webkit-calendar-picker-indicator{opacity:0}section[_ngcontent-%COMP%]   .login-secton[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{width:70%}section[_ngcontent-%COMP%]   .login-secton[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, section[_ngcontent-%COMP%]   .login-secton[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{outline:none}section[_ngcontent-%COMP%]   .login-secton[_ngcontent-%COMP%]   .login[_ngcontent-%COMP%]{border:1px solid rgb(215,215,215);font-size:16px;font-style:normal;font-weight:700;line-height:normal;font-family:Jura,sans-serif}"]});let t=e;return t})();var sS=(()=>{let e=class e{constructor(i,r){this.Firestore=i,this.Router=r}getStateList(){return g(this,null,function*(){return Dn(Ut(this.Firestore,"city-catalogue"))})}getCityList(i){return g(this,null,function*(){return Dn(Ut(this.Firestore,"city-catalogue",i,"city"))})}addAddress(i,r){if(i.taxId){let s=gt(this.Firestore,"users",r,"addresses",i.addressId);return Td(s,i).then(()=>{})}else{let s=gt(Ut(this.Firestore,"users",r,"addresses"));return i.addressId=s.id,Zn(s,i).then(()=>{this.Router.navigate(["home"])})}}};e.\u0275fac=function(r){return new(r||e)(M(Ue),M(he))},e.\u0275prov=$({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function KL(t,e){if(t&1&&(v(0,"option",14),E(1),y()),t&2){let n=e.$implicit;j("value",n.stateId),N(),be(" ",n.state," ")}}function YL(t,e){if(t&1&&(v(0,"option",14),E(1),y()),t&2){let n=e.$implicit;j("value",n.cityId),N(),be(" ",n.city," ")}}var oS=(()=>{let e=class e{constructor(i,r,s,o){this.Router=i,this.AuthService=r,this.AddressService=s,this.dataProvider=o,this.stateList=[],this.cityList=[],this.selectedCityId="",this.selectedStateId="",this.addressForm=new $n({selectedStateId:new De(this.selectedStateId,qe.required),selectedCityId:new De(this.selectedCityId,qe.required),pincode:new De("",qe.required),landmark:new De("",qe.required),area:new De("",qe.required),phoneNumber:new De("",qe.required),active:new De(!0),addressId:new De("")})}ngOnInit(){return g(this,null,function*(){if(yield this.AddressService.getStateList().then(i=>{i?.docs.map(r=>{r.data().active&&this.stateList.push(r.data())}),this.selectedStateId=this.stateList[0].stateId,this.getCities()}),this.dataProvider.currentUser?.userData?.phoneNumber){let i=this.dataProvider.currentUser.userData.phoneNumber.slice(3);this.addressForm.patchValue({phoneNumber:i})}else console.log("Phone number is not defined")})}getCities(){return g(this,null,function*(){yield this.AddressService.getCityList(this.selectedStateId).then(i=>{i.docs.map(r=>{r.data().active&&this.cityList.push(r.data())}),this.selectedCityId=this.cityList[0].cityId})})}submitAddress(){}};e.\u0275fac=function(r){return new(r||e)(k(he),k(ti),k(sS),k(ht))},e.\u0275cmp=H({type:e,selectors:[["app-add-address"]],standalone:!0,features:[Q],decls:38,vars:9,consts:[[3,"pageTitle"],["src","assets/address/addressBanner.svg","alt","address"],[1,"login-secton"],[3,"formGroup"],[1,"field"],[1,"description_text"],["name","selectedState","formControlName","selectedStateId",1,"input_box_bg_gradient","header_text_color",3,"ngModelChange","valueChange","change","ngModel","value"],[3,"value",4,"ngFor","ngForOf"],["name","selectedCity","formControlName","selectedCityId",1,"input_box_bg_gradient","header_text_color",3,"ngModelChange","valueChange","ngModel","value"],["type","number","formControlName","pincode","placeholder","Pincode","minlength","6","maxlength","6","oninput","this.value = this.value.replace(/[^0-9]/g, '').slice(0, 6)",1,"input_box_bg_gradient","header_text_color"],["type","text","formControlName","area","placeholder","Enter House No./Area",1,"input_box_bg_gradient","header_text_color"],["type","text","formControlName","landmark","placeholder","landmark",1,"input_box_bg_gradient","header_text_color"],["type","number","formControlName","phoneNumber","placeholder","Enter Contact Number","minlength","10","maxlength","10","oninput","this.value = this.value.replace(/[^0-9]/g, '').slice(0, 10)",1,"input_box_bg_gradient","header_text_color"],[3,"click","btnName"],[3,"value"]],template:function(r,s){r&1&&(L(0,"app-header-with-back",0),v(1,"section"),L(2,"img",1),v(3,"div",2)(4,"form",3)(5,"div",4)(6,"label",5),E(7,"Select State"),y(),L(8,"br"),v(9,"select",6),qo("ngModelChange",function(c){return fr(s.selectedStateId,c)||(s.selectedStateId=c),c})("valueChange",function(c){return fr(s.selectedStateId,c)||(s.selectedStateId=c),c}),G("change",function(){return s.getCities()}),oe(10,KL,2,2,"option",7),y()(),v(11,"div",4)(12,"label",5),E(13,"Select City"),y(),L(14,"br"),v(15,"select",8),qo("ngModelChange",function(c){return fr(s.selectedCityId,c)||(s.selectedCityId=c),c})("valueChange",function(c){return fr(s.selectedCityId,c)||(s.selectedCityId=c),c}),oe(16,YL,2,2,"option",7),y()(),v(17,"div",4)(18,"label",5),E(19,"Pin-Code"),y(),L(20,"br")(21,"input",9),y(),v(22,"div",4)(23,"label",5),E(24,"House No./Area"),y(),L(25,"br")(26,"input",10),y(),v(27,"div",4)(28,"label",5),E(29,"Landmark"),y(),L(30,"br")(31,"input",11),y(),v(32,"div",4)(33,"label",5),E(34,"Contact "),y(),L(35,"br")(36,"input",12),y(),v(37,"lib-save-btn",13),G("click",function(){return s.submitAddress()}),y()()()()),r&2&&(j("pageTitle","Add Address"),N(4),j("formGroup",s.addressForm),N(5),$o("ngModel",s.selectedStateId)("value",s.selectedStateId),N(),j("ngForOf",s.stateList),N(5),$o("ngModel",s.selectedCityId)("value",s.selectedCityId),N(),j("ngForOf",s.cityList),N(21),j("btnName","Submit"))},dependencies:[ze,xe,_t,Os,Ps,Rs,Ds,mn,fm,Qi,qn,As,_m,La,Nl,Gn,Pr,Rr],styles:["section[_ngcontent-%COMP%]{padding-top:60px;display:flex;align-items:center;flex-direction:column}section[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-top:20px}section[_ngcontent-%COMP%]   .login-secton[_ngcontent-%COMP%]{position:absolute;bottom:5px;width:96%}section[_ngcontent-%COMP%]   .login-secton[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:15px;font-size:18px;font-style:normal;font-weight:700;line-height:normal;font-family:Jura}section[_ngcontent-%COMP%]   .login-secton[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-left:5px;font-family:Nunito,sans-serif;font-size:10px;font-style:normal;font-weight:500;line-height:normal}section[_ngcontent-%COMP%]   .login-secton[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]{width:100%;margin-bottom:10px}section[_ngcontent-%COMP%]   .login-secton[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], section[_ngcontent-%COMP%]   .login-secton[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{border:.5px solid rgb(166,166,166);border-radius:12px;width:100%;height:40px;padding:1px 6px;font-family:Merge One,sans-serif;font-size:14px;font-style:normal;font-weight:400;line-height:normal}section[_ngcontent-%COMP%]   .login-secton[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{width:70%}section[_ngcontent-%COMP%]   .login-secton[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, section[_ngcontent-%COMP%]   .login-secton[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{outline:none}section[_ngcontent-%COMP%]   .login-secton[_ngcontent-%COMP%]   .login[_ngcontent-%COMP%]{border:1px solid rgb(215,215,215);font-size:16px;font-style:normal;font-weight:700;line-height:normal;font-family:Jura,sans-serif}"]});let t=e;return t})();var aS=(()=>{let e=class e{constructor(i,r){this.firestore=i,this.EventService=r}addInbooking(){return g(this,null,function*(){try{let i=this.EventService.bookingDetails().customer.uid,r=this.EventService.bookingDetails(),s=gt(Ut(this.firestore,"users",i,"cart"));return r.id=s.id,Zn(s,r),{bookingId:r.id}}catch(i){return console.error("Error adding document: ",i),i}})}};e.\u0275fac=function(r){return new(r||e)(M(Ue),M(it))},e.\u0275prov=$({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function XL(t,e){if(t&1){let n=Le();v(0,"div",34),G("click",function(){let r=ge(n).index,s=ne();return _e(s.setActiveTab(r))}),E(1),y()}if(t&2){let n=e.$implicit,i=e.index,r=ne();St("active",i===r.activeTab),N(),be(" Member ",n," ")}}function JL(t,e){t&1&&(v(0,"div",35),E(1," Your mobile number is invalid! "),y())}function ZL(t,e){t&1&&(v(0,"div",35),E(1," Your aadhar number is invalid! "),y())}function e2(t,e){t&1&&(v(0,"div",36)(1,"span"),E(2,"Aadhar uploaded successfully!"),y()())}function t2(t,e){t&1&&(v(0,"div",35),E(1," Your pan number is invalid! "),y())}function n2(t,e){t&1&&(v(0,"div",36)(1,"span"),E(2,"Pancard uploaded successfully!"),y()())}var cS=(()=>{let e=class e{constructor(i,r,s,o){if(this.router=i,this.memberservice=r,this.EventService=s,this.DataProviderService=o,this.profileImageSrc="/assets/member_detail/default.svg",this.panuploadSuccess=!1,this.aadharuploadSuccess=!1,this.userTabCount=3,this.tabs=[],this.activeTab=0,this.membersData=[],this.memberForm=new $n({Name:new De("",qe.required),gender:new De("",qe.required),mobileNo:new De("",[qe.required,qe.pattern(RegExp("[0-9]{10}"))]),Aadharnumber:new De("",[qe.required,qe.pattern(RegExp("[0-9]{12}"))]),Adharimages:new De("",qe.required),Pannumber:new De("",[qe.required,qe.pattern(RegExp("[A-Z]{5}[0-9]{4}[A-Z]{1}"))]),panimages:new De("",qe.required)}),this.generateTabs(),this.initializeMembersData(),this.DataProviderService.loggedIn){let c=this.EventService.bookingDetails();c.customer=this.DataProviderService.currentUser?.userData;let l=this.EventService.bookingDetails().variant.taxType;this.EventService.fetchDoc(`tax-types/${l}`).subscribe(u=>{let h=this.EventService.bookingDetails();h.tax=u}),this.EventService.bookingDetails.set(c)}else this.router.navigate(["login"])}ngOnInit(){this.userTabCount=this.EventService.bookingDetails().totalMember}initializeMembersData(){this.userTabCount=this.EventService.bookingDetails().totalMember;for(let i=0;i<this.userTabCount;i++)this.membersData.push(this.createEmptyMemberData())}createEmptyMemberData(){return{Name:"",gender:"",mobileNo:"",Aadharnumber:"",Adharimages:"",Pannumber:"",panimages:"",profileImageSrc:"/assets/member_detail/default.svg"}}generateTabs(){this.userTabCount=this.EventService.bookingDetails().totalMember,this.tabs=Array.from({length:this.userTabCount},(i,r)=>r+1),this.setActiveTab(0)}setActiveTab(i){this.activeTab!==i&&(this.membersData[this.activeTab]=me(U({},this.memberForm.value),{profileImageSrc:this.profileImageSrc}),this.activeTab=i,this.resetForm())}onFileSelected(i){let r=i.target;if(r.files&&r.files[0]){let s=r.files[0];this.profileImageSrc=URL.createObjectURL(s),this.membersData[this.activeTab].profileImageSrc=this.profileImageSrc}}triggerFileInputAadhar(){document.getElementById("fileInputAadhar").click()}triggerFileInputPan(){document.getElementById("fileInputPan").click()}onPanUpload(i){i.target.files&&i.target.files.length>0&&(this.panuploadSuccess=!0)}onAadharUpload(i){i.target.files&&i.target.files.length>0&&(this.aadharuploadSuccess=!0)}saveMemberDetail(){if(this.memberForm.valid)if(this.membersData[this.activeTab]=me(U({},this.memberForm.value),{profileImageSrc:this.profileImageSrc}),this.activeTab<this.tabs.length-1)this.setActiveTab(this.activeTab+1);else{let i=this.EventService.bookingDetails().variant.price,r=this.EventService.bookingDetails().totalMember,s=0;if(this.EventService.bookingDetails().variant.taxCalc!="inclusive"){let c=this.EventService.bookingDetails().tax;if(c.taxType=="percentage"){let l=i*r,u=l*c.taxRate/100;s=l+u}else s=(i+c.price)*r}else s=i*r;let o=this.EventService.bookingDetails();o.paymentDetail={variantPrice:i,totalMember:r,totalPrice:s,paymentStatus:"pending"},o.memberDetail=this.membersData,this.EventService.bookingDetails.set(o),this.memberservice.addInbooking().then(c=>{this.router.navigate(["payment",c.bookingId])}).catch(c=>{console.error("Error creating coupon: ",c)})}else console.log("Form is invalid")}resetForm(){this.memberForm.reset(),this.profileImageSrc="/assets/member_detail/default.svg",this.panuploadSuccess=!1,this.aadharuploadSuccess=!1;let i=document.getElementById("fileInputAadhar"),r=document.getElementById("fileInputPan");i&&(i.value=""),r&&(r.value="")}};e.\u0275fac=function(r){return new(r||e)(k(he),k(aS),k(it),k(ht))},e.\u0275cmp=H({type:e,selectors:[["app-member-details"]],standalone:!0,features:[Q],decls:60,vars:10,consts:[[3,"pageTitle"],[1,"scroll"],[1,"tabs"],["class","tab section_title",3,"active","click",4,"ngFor","ngForOf"],[1,"memberdetail",3,"ngSubmit","formGroup"],[1,"profile"],["alt","Profile Image",3,"src"],["for","filepath",1,"upload-icon"],["src","/assets/member_detail/icon.svg"],["type","file","id","filepath","accept","image/*",3,"change"],[1,"detail"],[1,"member-form"],["for","Membername",1,"paragraph_text"],["type","text","placeholder","name","formControlName","Name",1,"member"],["for","MemberGender",1,"paragraph_text"],["formControlName","gender",1,"member"],["value","Male"],["value","Female"],["value","Other"],["for","MemberMobile",1,"paragraph_text"],["type","text","placeholder","99xxxxxxxx","formControlName","mobileNo",1,"member"],[1,"validation-errors"],["class","error-message",4,"ngIf"],["for"," MemberAadhar",1,"paragraph_text"],["type","text","placeholder","Aadhar number","formControlName","Aadharnumber",1,"member"],[1,"header"],["type","button",3,"click"],["src","/assets/member_detail/upload.svg","alt",""],["id","fileInputAadhar","formControlName","Adharimages","type","file",2,"display","none",3,"change"],["class","success-message",4,"ngIf"],["for"," MemberPan",1,"paragraph_text"],["type","text","placeholder","Pan number","formControlName","Pannumber",1,"member"],["id","fileInputPan","formControlName","panimages","type","file",2,"display","none",3,"change"],["type","submit",1,"submit-button"],[1,"tab","section_title",3,"click"],[1,"error-message"],[1,"success-message"]],template:function(r,s){if(r&1&&(L(0,"app-header-with-back",0),v(1,"section")(2,"div",1)(3,"div",2),oe(4,XL,2,3,"div",3),y()(),v(5,"form",4),G("ngSubmit",function(){return s.saveMemberDetail()}),v(6,"div",5),L(7,"img",6),v(8,"label",7),L(9,"img",8),y(),v(10,"input",9),G("change",function(c){return s.onFileSelected(c)}),y()(),v(11,"div",10)(12,"div",11)(13,"label",12),E(14,"Name"),y(),L(15,"input",13),y(),v(16,"div",11)(17,"label",14),E(18,"Gender"),y(),v(19,"select",15)(20,"option",16),E(21,"Male"),y(),v(22,"option",17),E(23,"Female"),y(),v(24,"option",18),E(25,"Other"),y()()(),v(26,"div",11)(27,"label",19),E(28,"Mobile No"),y(),L(29,"input",20),y(),v(30,"div",21),oe(31,JL,2,0,"div",22),y(),v(32,"div",11)(33,"label",23),E(34,"Aadhar"),y(),L(35,"input",24),y(),v(36,"div",21),oe(37,ZL,2,0,"div",22),y(),v(38,"div",25)(39,"label"),E(40,"Upload Aadhar"),y(),v(41,"button",26),G("click",function(){return s.triggerFileInputAadhar()}),L(42,"img",27),y(),v(43,"input",28),G("change",function(c){return s.onAadharUpload(c)}),y(),oe(44,e2,3,0,"div",29),y(),v(45,"div",11)(46,"label",30),E(47,"Pan"),y(),L(48,"input",31),y(),v(49,"div",21),oe(50,t2,2,0,"div",22),y(),v(51,"div",25)(52,"label"),E(53,"Upload Pan"),y(),v(54,"button",26),G("click",function(){return s.triggerFileInputPan()}),L(55,"img",27),y(),v(56,"input",32),G("change",function(c){return s.onPanUpload(c)}),y(),oe(57,n2,3,0,"div",29),y()(),v(58,"button",33),E(59),y()()()),r&2){let o,c,l;j("pageTitle",s.EventService.bookingDetails().variant.name),N(4),j("ngForOf",s.tabs),N(),j("formGroup",s.memberForm),N(2),j("src",s.profileImageSrc,Tt),N(24),j("ngIf",((o=s.memberForm.get("mobileNo"))==null?null:o.errors)&&((o=s.memberForm.get("mobileNo"))==null?null:o.touched)),N(6),j("ngIf",((c=s.memberForm.get("Aadharnumber"))==null?null:c.errors)&&((c=s.memberForm.get("Aadharnumber"))==null?null:c.touched)),N(7),j("ngIf",s.aadharuploadSuccess),N(6),j("ngIf",((l=s.memberForm.get("Pannumber"))==null?null:l.errors)&&((l=s.memberForm.get("Pannumber"))==null?null:l.touched)),N(7),j("ngIf",s.panuploadSuccess),N(2),ve(s.activeTab===s.tabs.length-1?"Next":"Submit")}},dependencies:[Gn,Ps,Rs,Ds,mn,Qi,qn,As,Pr,Rr,xe,_t,Nt,ze],styles:["section[_ngcontent-%COMP%]{padding-bottom:80px;padding-left:1rem;padding-right:1rem}.scroll[_ngcontent-%COMP%]{overflow-x:auto;-ms-overflow-style:none;scrollbar-width:none;margin-bottom:5px;padding-top:70px;margin-top:2%}.scroll[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.tabs[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-left:1rem}.tabs[_ngcontent-%COMP%]   .section_title[_ngcontent-%COMP%]{font-size:12px}.tab[_ngcontent-%COMP%]{padding:10px 1.5rem;border-radius:10px;cursor:pointer;width:100%;max-width:150px;text-align:center}.tab.active[_ngcontent-%COMP%], .tab[_ngcontent-%COMP%]:hover{background:var(--active-tab-gradient, linear-gradient(90deg, #464E5F .28%, rgba(70, 78, 95, .8) 47.84%, rgba(70, 78, 95, .4) 99.72%));color:#fff}.memberdetail[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;padding:1rem}.detail[_ngcontent-%COMP%]{margin-top:2rem;width:100%}.member-form[_ngcontent-%COMP%]{margin-bottom:1rem;display:flex;flex-direction:column;width:100%}.member-form[_ngcontent-%COMP%]   .paragraph_text[_ngcontent-%COMP%]{color:gray;margin-bottom:.5rem}.member[_ngcontent-%COMP%]{border-radius:12px;border:1px solid var(--input-box-border-gradient, rgba(170, 170, 170, .3));background:var(--input-box-bg-gradient, linear-gradient(99deg, rgba(225, 225, 225, .3) 12.07%, rgba(225, 225, 225, .2) 48.35%, rgba(225, 225, 225, .2) 87.93%));width:100%;height:40px;padding:.5rem;box-sizing:border-box}.header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;border-radius:12px;border:1px solid var(--input-box-border-gradient, rgba(170, 170, 170, .3));background:var(--input-box-bg-gradient, linear-gradient(99deg, rgba(225, 225, 225, .3) 12.07%, rgba(225, 225, 225, .2) 48.35%, rgba(225, 225, 225, .2) 87.93%));width:100%;height:40px;padding-left:.5rem;margin-bottom:1rem;box-sizing:border-box}.header[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:14px;color:#464e5f}.submit-button[_ngcontent-%COMP%]{height:60px;width:100%;max-width:200px;border-radius:30px;background:linear-gradient(90.32deg,#2f15aa .28%,#2f15aacc 47.84%,#2f15aa66 99.72%);border:none;color:#fff;margin-top:2rem}.profile[_ngcontent-%COMP%]{position:relative;width:100%;max-width:150px;height:150px;border-radius:50%;overflow:hidden;margin-top:1rem}.profile[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}#filepath[_ngcontent-%COMP%]{display:none}.upload-icon[_ngcontent-%COMP%]{position:absolute;bottom:10px;right:10px;background:#fff;padding:10px;border-radius:50%;cursor:pointer}.validation-errors[_ngcontent-%COMP%]{font-size:small;color:var(--ion-color-danger, #f1453d)}.success-message[_ngcontent-%COMP%]{background-color:#d4edda;color:#155724;border:1px solid #c3e6cb;border-radius:4px;display:flex;align-items:center;gap:10px}"]});let t=e;return t})();var wv={cloudFunctions:{createOrder:"https://createorder-uuc4lf2xaa-uc.a.run.app",createOrderLocalHost:"http://127.0.0.1:5001/fyi1-aa2c2/us-central1/createOrder",getOrderById:"https://us-central1-kittyconnect-68a81.cloudfunctions.net/getOrderById?id=",capturePayment:"https://us-central1-kittyconnect-68a81.cloudfunctions.net/capturePayments",createRefund:"https://us-central1-kittyconnect-68a81.cloudfunctions.net/createRefund",getRefundDetails:"https://us-central1-kittyconnect-68a81.cloudfunctions.net/getRefundDetails"},RAZORPAY_KEY_ID:"rzp_live_wMevmKrUh5pkfg",RAZORPAY_DOMAIN:"https://api.razorpay.com/v1/"};var qd=(()=>{let e=class e{constructor(i,r,s,o){this.http=i,this.router=r,this.EventService=s,this.firestore=o}createOrder(i,r="INR",s){let o=new In({"Content-Type":"application/json"}),c={amount:i,currency:r,receipt:s};return this.http.post(wv.cloudFunctions.createOrder,c,{headers:o})}addInbooking(){return g(this,null,function*(){try{let i=this.EventService.bookingDetails().customer.uid,r=this.EventService.bookingDetails(),s=r.id,o=gt(this.firestore,"users",i,"bookings",s);return yield Zn(o,r)}catch(i){return console.error("Error adding document: ",i),i}})}deleteBookingFromCart(){return g(this,null,function*(){let i=this.EventService.bookingDetails().customer.uid,r=this.EventService.bookingDetails().id,s=gt(this.firestore,"users",i,"cart",r);return yield Ed(s)})}formatDateTime(i){let r={day:"2-digit",month:"short",year:"numeric"},s=i.toLocaleDateString("en-GB",r),o=i.toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"});return{formattedDate:s,formattedTime:o}}initiatePayment(i){let r=this.EventService.bookingDetails(),s=new Date,{formattedDate:o,formattedTime:c}=this.formatDateTime(s);r.paymentDetail.date=o,r.paymentDetail.time=c;let l={key:wv.RAZORPAY_KEY_ID,amount:i.amount*100,currency:"INR",name:"FYI",order_id:i.order_id,handler:h=>{let p={order_id:i.order_id,receipt_id:i.receiptId,razorpay_payment_id:h.razorpay_payment_id,razorpay_order_id:h.razorpay_order_id,razorpay_signature:h.razorpay_signature};r.paymentDetail.paymentStatus="success",r.paymentDetail.paymentResponse=p,this.EventService.bookingDetails.set(r),this.addInbooking().then(()=>{this.deleteBookingFromCart().then(()=>{this.router.navigate(["/payment-successful"])})})},prefill:{name:i.customerName,email:"",contact:i.contact},modal:{ondismiss:()=>{r.paymentDetail.paymentStatus="failed",this.EventService.bookingDetails.set(r),this.router.navigate(["/patmentfailed"])}}},u=new window.Razorpay(l);u.on("payment.failed",h=>{r.paymentDetail.paymentStatus="failed",this.EventService.bookingDetails.set(r),this.addInbooking().then(()=>{this.deleteBookingFromCart().then(()=>{this.router.navigate(["/patmentfailed"])})})}),u.open()}};e.\u0275fac=function(r){return new(r||e)(M(ef),M(he),M(it),M(Ue))},e.\u0275prov=$({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Iv=(()=>{let e=class e{constructor(i,r,s){this.router=i,this.EventService=r,this.PaymentService=s;let o=this.EventService.bookingDetails()}payNow(){this.router.navigate(["payment-successful"])}generateUniqueReceipt(){let i=Date.now().toString(),r=Math.random().toString(36).substring(2,10);return`receipt_${i}_${r}`}pay(){let i=this.EventService.bookingDetails(),r=this.generateUniqueReceipt(),s=i.paymentDetail.totalPrice;this.PaymentService.createOrder(s*100,"INR",r).subscribe(o=>{let c={amount:s,description:"Test Transaction",order_id:o.id,customerName:i.customer.name,contact:i.customer.phoneNumber,receiptId:r};this.PaymentService.initiatePayment(c)})}};e.\u0275fac=function(r){return new(r||e)(k(he),k(it),k(qd))},e.\u0275cmp=H({type:e,selectors:[["app-event-payment"]],standalone:!0,features:[Q],decls:42,vars:9,consts:[[3,"pageTitle"],[1,"checkout-container"],[1,"ticket-info"],["src","assets/event-payment/image.svg","alt","Event Image",1,"event-image"],[1,"event-details"],[1,"section_title","heading"],[1,"row2"],[1,"paragraph_text","header_text_color"],[1,"paragraph_text","header_text_color","ticket","green"],[1,"paragraph_text","header_text_color","ticket"],[1,"payment-details"],[1,"section_title"],[1,"detail-row"],[1,"paragraph_text"],[2,"color","#579540"],[1,"total-row"],[1,"proceed-button",3,"click"]],template:function(r,s){r&1&&(L(0,"app-header-with-back",0),v(1,"div",1)(2,"div",2),L(3,"img",3),v(4,"div",4)(5,"h3",5),E(6),y(),v(7,"div",6)(8,"p",7),E(9),y(),v(10,"p",7),E(11),y()(),v(12,"div",6)(13,"p",8),E(14),y(),v(15,"p",9),E(16),y()()()(),v(17,"div",10)(18,"h3",11),E(19,"Payment Details"),y(),v(20,"div",12)(21,"span",13),E(22,"Total (MRP)"),y(),v(23,"span"),E(24),y()(),v(25,"div",12)(26,"span",13),E(27,"Discount"),y(),v(28,"span",14),E(29,"-\u20B90"),y()(),v(30,"div",12)(31,"span",13),E(32,"Discounted Price"),y(),v(33,"span"),E(34),y()(),v(35,"div",15)(36,"span",11),E(37,"Total"),y(),v(38,"span",11),E(39),y()()(),v(40,"button",16),G("click",function(){return s.pay()}),E(41,"Proceed to Pay"),y()()),r&2&&(j("pageTitle","Checkout "),N(6),ve(s.EventService.bookingDetails().event.eventName),N(3),ve(s.EventService.bookingDetails().slab.name),N(2),ve(s.EventService.bookingDetails().variant.name),N(3),be("\u20B9",s.EventService.bookingDetails().variant.price,""),N(2),be("Tickets: ",s.EventService.bookingDetails().totalMember,""),N(8),be("\u20B9",s.EventService.bookingDetails().paymentDetail.totalPrice,""),N(10),be("\u20B9",s.EventService.bookingDetails().paymentDetail.totalPrice,""),N(5),be("\u20B9",s.EventService.bookingDetails().paymentDetail.totalPrice,""))},dependencies:[ze],styles:[".checkout-container[_ngcontent-%COMP%]{margin:0 auto;padding:70px 20px 0;font-family:Arial,sans-serif}.header[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:20px}.back-arrow[_ngcontent-%COMP%]{font-size:24px;cursor:pointer;margin-right:10px}.ticket-info[_ngcontent-%COMP%]{display:flex;background-color:#f9f9f9;padding:10px;border-radius:8px;margin-bottom:20px}.event-image[_ngcontent-%COMP%]{border-radius:8px;margin-right:10px}.event-details[_ngcontent-%COMP%]   .heading[_ngcontent-%COMP%]{font-size:16px;color:#000;line-height:3}.event-details[_ngcontent-%COMP%]   .row2[_ngcontent-%COMP%]{display:flex;justify-content:space-between;gap:2rem}.event-details[_ngcontent-%COMP%]   .row2[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-weight:500;font-size:14px;line-height:2}.event-details[_ngcontent-%COMP%]   .row2[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]{color:green;font-weight:700}.payment-details[_ngcontent-%COMP%]{background-color:#f9f9f9;padding:10px;border-radius:8px;margin-bottom:20px}.payment-details[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:18px;font-weight:400;color:#444}.detail-row[_ngcontent-%COMP%], .total-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:10px}.detail-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .total-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#7e8083;font-weight:500;font-size:14px;line-height:1.5}.total-row[_ngcontent-%COMP%]{font-weight:700;border-top:1px dashed #ccc;padding-top:10px}.total-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#181f29}.proceed-button[_ngcontent-%COMP%]{width:100%;padding:15px;background:linear-gradient(90.32deg,#2f15aa .28%,#2f15aacc 47.84%,#2f15aa66 99.72%);color:#fff;border:none;border-radius:25px;font-size:16px;cursor:pointer}.proceed-button[_ngcontent-%COMP%]:hover{opacity:.9}"]});let t=e;return t})();var uS=(()=>{let e=class e{constructor(i,r){this.router=i,this.EventService=r,this.bookingDetail=this.EventService.bookingDetails()}naviagateToHomepage(){this.router.navigate(["home"])}};e.\u0275fac=function(r){return new(r||e)(k(he),k(it))},e.\u0275cmp=H({type:e,selectors:[["app-payment-successful"]],standalone:!0,features:[Q],decls:40,vars:7,consts:[[3,"pageTitle"],[1,"container"],[1,"confirmation-card"],["src","/assets/event-payment/payment-successful.svg"],[1,"payment-details"],[1,"section_title"],[1,"paragraph_text","detail"],[1,"paragraph_text","detail_status"],[1,"button-done"],[1,"proceed-button",3,"click"]],template:function(r,s){r&1&&(L(0,"app-header-with-back",0),v(1,"section",1)(2,"div",2),L(3,"img",3),v(4,"div",4)(5,"h2",5),E(6,"Payment Details"),y(),v(7,"div",6)(8,"p"),E(9),y(),v(10,"span"),E(11,"Kashi Summit 2024"),y()(),v(12,"div",6)(13,"p"),E(14,"Slab"),y(),v(15,"span"),E(16),y()(),v(17,"div",6)(18,"p"),E(19,"Variant"),y(),v(20,"span"),E(21),y()(),v(22,"div",6)(23,"p"),E(24,"Date"),y(),v(25,"span"),E(26),y()(),v(27,"div",6)(28,"p"),E(29,"Payment"),y(),v(30,"span"),E(31),y()(),v(32,"div",7)(33,"p"),E(34,"Status"),y(),v(35,"span"),E(36,"Successful"),y()()()()(),v(37,"div",8)(38,"button",9),G("click",function(){return s.naviagateToHomepage()}),E(39,"Done"),y()()),r&2&&(j("pageTitle","Payment "),N(9),be("",s.bookingDetail.event.eventName," "),N(7),ve(s.bookingDetail.slab.name),N(5),ve(s.bookingDetail.variant.name),N(5),os("",s.bookingDetail.paymentDetail.date," & ",s.bookingDetail.paymentDetail.time," "),N(5),be("\u20B9",s.bookingDetail.paymentDetail.totalPrice,""))},dependencies:[ze],styles:[".container[_ngcontent-%COMP%]{margin-top:2%;padding:70px 20px 0}.container[_ngcontent-%COMP%]   .confirmation-card[_ngcontent-%COMP%]{background-color:#fff;border-radius:10px;box-shadow:0 4px 8px #0000001a;margin-left:1rem;margin-right:1rem;padding:20px}.container[_ngcontent-%COMP%]   .confirmation-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}.container[_ngcontent-%COMP%]   .confirmation-card[_ngcontent-%COMP%]   .payment-details[_ngcontent-%COMP%]{margin-top:2rem;margin-left:.6rem;margin-right:.6rem}.container[_ngcontent-%COMP%]   .confirmation-card[_ngcontent-%COMP%]   .payment-details[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:18px;color:#444;font-weight:700}.container[_ngcontent-%COMP%]   .confirmation-card[_ngcontent-%COMP%]   .payment-details[_ngcontent-%COMP%]   .detail[_ngcontent-%COMP%]{display:flex;justify-content:space-between;line-height:2}.container[_ngcontent-%COMP%]   .confirmation-card[_ngcontent-%COMP%]   .payment-details[_ngcontent-%COMP%]   .detail[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#7e8083;font-size:14px;font-weight:500}.container[_ngcontent-%COMP%]   .confirmation-card[_ngcontent-%COMP%]   .payment-details[_ngcontent-%COMP%]   .detail[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#464e5f;font-size:14px;font-weight:500}.container[_ngcontent-%COMP%]   .confirmation-card[_ngcontent-%COMP%]   .payment-details[_ngcontent-%COMP%]   .detail_status[_ngcontent-%COMP%]{margin-top:10px;border-top:2px dashed #D7D7D7;display:flex;justify-content:space-between}.container[_ngcontent-%COMP%]   .confirmation-card[_ngcontent-%COMP%]   .payment-details[_ngcontent-%COMP%]   .detail_status[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:10px;font-size:18px}.container[_ngcontent-%COMP%]   .confirmation-card[_ngcontent-%COMP%]   .payment-details[_ngcontent-%COMP%]   .detail_status[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-top:10px;color:#48bc1f;font-size:18px}.button-done[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:50px}.button-done[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:80%;padding:15px;background:linear-gradient(90.32deg,#2f15aa .28%,#2f15aacc 47.84%,#2f15aa66 99.72%);color:#fff;border:none;border-radius:25px;font-size:16px;cursor:pointer}"]});let t=e;return t})();var dS=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=H({type:e,selectors:[["app-list-of-survey"]],standalone:!0,features:[Q],decls:2,vars:0,template:function(r,s){r&1&&(v(0,"p"),E(1,"list-of-survey works!"),y())}});let t=e;return t})();function i2(t,e){if(t&1){let n=Le();v(0,"div",5),L(1,"img",6),v(2,"div",7)(3,"p",8),E(4),y(),v(5,"button",9),G("click",function(){let r=ge(n).$implicit,s=ne();return _e(s.viewSlsbList(r.eventId,r))}),E(6,"View Slabs"),y()()()}if(t&2){let n=e.$implicit;N(),zo("alt",n.eventName),j("src",n.images[0],Tt),N(3),ve(n.eventName)}}function r2(t,e){if(t&1){let n=Le();v(0,"div",5),L(1,"img",6),v(2,"div",7)(3,"p",8),E(4),y(),v(5,"button",9),G("click",function(){let r=ge(n).$implicit,s=ne();return _e(s.viewSlsbList(r.eventId,r))}),E(6,"View Slabs"),y()()()}if(t&2){let n=e.$implicit;N(),zo("alt",n.eventName),j("src",n.images[0],Tt),N(3),ve(n.title)}}var hS=(()=>{let e=class e{constructor(i,r){this.router=i,this.EventService=r,this.items=[{image:"/assets/homepage/eventimage.svg",title:"Cearic Kashi Summit 2024"},{image:"/assets/homepage/eventlist.svg",title:"Cearic Kashi Summit 2025"},{image:"/assets/homepage/eventimage.svg",title:"Cearic Kashi Summit 2026"}],this.EventService.eventList().length==0&&this.router.navigate(["/home"])}viewSlsbList(i,r){let s=this.EventService.bookingDetails();s.event=r,this.EventService.bookingDetails.set(s),this.router.navigate(["slab",i])}};e.\u0275fac=function(r){return new(r||e)(k(he),k(it))},e.\u0275cmp=H({type:e,selectors:[["app-event-list"]],standalone:!0,features:[Q],decls:9,vars:3,consts:[[3,"pageTitle"],[1,"container"],["type","text","placeholder","Search city to add",1,"search-bar"],[1,"section_title"],["class","card",4,"ngFor","ngForOf"],[1,"card"],[1,"card-image",3,"src","alt"],[1,"card-content"],[1,"card-title","header_text_color","paragraph_text"],[1,"view-slabs-btn",3,"click"]],template:function(r,s){r&1&&(L(0,"app-header-with-back",0),v(1,"div",1),L(2,"input",2),v(3,"h3",3),E(4,"Ongoing Events"),y(),oe(5,i2,7,3,"div",4),v(6,"h3",3),E(7,"Upcoming Events"),y(),oe(8,r2,7,3,"div",4),y()),r&2&&(j("pageTitle","Event List"),N(5),j("ngForOf",s.EventService.eventList()),N(3),j("ngForOf",s.EventService.eventList()))},dependencies:[xe,_t,ze],styles:[".container[_ngcontent-%COMP%]{margin-top:2%;display:flex;flex-direction:column;padding:70px 20px 80px}.search-bar[_ngcontent-%COMP%]{width:100%;max-width:400px;padding:10px;border-radius:25px;border:1px solid #ccc;margin-bottom:20px;font-size:16px}h3[_ngcontent-%COMP%]{align-items:start;color:#000;font-size:20px;font-weight:500;line-height:3}.card[_ngcontent-%COMP%]{width:100%;max-width:400px;margin-bottom:20px;border-radius:15px;overflow:hidden;box-shadow:0 4px 8px #0000001a;background:linear-gradient(99.41deg,#aaaaaa4d 12.07%,#aaa3 48.35% 87.93%)}.card-image[_ngcontent-%COMP%]{width:100%;height:auto}.card-content[_ngcontent-%COMP%]{padding:10px;text-align:center;display:flex;justify-content:space-between}.card-title[_ngcontent-%COMP%]{margin:10px 0;font-size:14px;font-weight:700}.view-slabs-btn[_ngcontent-%COMP%]{padding:10px 20px;border:none;border-radius:25px;background:linear-gradient(90.32deg,#2f15aa .28%,#2f15aacc 47.84%,#2f15aa66 99.72%);color:#f0f0f0;cursor:pointer}"]});let t=e;return t})();function s2(t,e){if(t&1){let n=Le();v(0,"div",5)(1,"div",6),L(2,"img",7),v(3,"div",8)(4,"p",9),E(5),y(),v(6,"button",10),G("click",function(){let r=ge(n).$implicit,s=ne();return _e(s.movetovarient(r.slabId,r))}),E(7,"Book Now"),y()()()()}if(t&2){let n=e.$implicit;N(2),zo("alt",n.name),j("src",n.image,Tt),N(3),ve(n.name)}}var fS=(()=>{let e=class e{constructor(i,r,s){this.router=i,this.activatedRoute=r,this.EventService=s,this.items=[{image:"/assets/homepage/slabimage.svg",title:"Panchganga Slab"},{image:"/assets/homepage/slabimage.svg",title:"Assi Slab"},{image:"/assets/homepage/slabimage.svg",title:"Panchganga Slab"},{image:"/assets/homepage/slabimage.svg",title:"Assi Slab"}],this.activatedRoute.paramMap.subscribe(o=>g(this,null,function*(){o.get("id")!==null&&(this.eventId=o.get("id")||"")})),this.EventService.bookingDetails().event||this.router.navigate(["/home"])}ngOnInit(){}movetovarient(i,r){let s=this.EventService.bookingDetails();s.slab=r,this.EventService.bookingDetails.set(s),this.router.navigate(["varient",i])}};e.\u0275fac=function(r){return new(r||e)(k(he),k(fn),k(it))},e.\u0275cmp=H({type:e,selectors:[["app-slab-list"]],standalone:!0,features:[Q],decls:5,vars:2,consts:[[3,"pageTitle"],[1,"container"],["type","text","placeholder","Search city to add",1,"search-bar"],[1,"grid"],["class","card",4,"ngFor","ngForOf"],[1,"card"],[1,"image-container"],[1,"card-image",3,"src","alt"],[1,"overlay"],[1,"card-title"],[1,"book-now-btn",3,"click"]],template:function(r,s){r&1&&(L(0,"app-header-with-back",0),v(1,"div",1),L(2,"input",2),v(3,"div",3),oe(4,s2,8,3,"div",4),y()()),r&2&&(j("pageTitle",s.EventService.bookingDetails().event.eventName),N(4),j("ngForOf",s.EventService.slabList()[s.eventId]))},dependencies:[xe,_t,ze],styles:[".container[_ngcontent-%COMP%]{margin-top:2%;display:flex;flex-direction:column;align-items:center;padding:70px 20px 0}.search-bar[_ngcontent-%COMP%]{width:100%;max-width:400px;padding:10px;border-radius:25px;border:1px solid #ccc;margin-bottom:20px;font-size:16px}.grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(150px,1fr));gap:20px;width:100%;max-width:800px}.card[_ngcontent-%COMP%]{border-radius:15px;overflow:hidden;box-shadow:0 4px 8px #0000001a;background:linear-gradient(99.41deg,#aaaaaa4d 12.07%,#aaa3 48.35% 87.93%);position:relative;text-align:center}.image-container[_ngcontent-%COMP%]{position:relative}.card-image[_ngcontent-%COMP%]{width:100%;height:auto}.overlay[_ngcontent-%COMP%]{position:absolute;bottom:0;left:0;width:100%;padding:10px 0;background:linear-gradient(to top,rgba(0,0,0,.5),transparent);display:flex;flex-direction:column;align-items:center;justify-content:flex-end}.card-title[_ngcontent-%COMP%]{margin:0;font-size:14px;font-weight:500;color:#fff;padding:5px 0}.book-now-btn[_ngcontent-%COMP%]{padding:5px 20px;border:none;border-radius:25px;background-color:#6200ea;color:#fff;cursor:pointer;margin:10px 0;font-size:14px}.book-now-btn[_ngcontent-%COMP%]:hover{background-color:#3700b3}"]});let t=e;return t})();function o2(t,e){if(t&1&&(v(0,"div",12),L(1,"img",13),y()),t&2){let n=e.$implicit,i=ne();N(),j("src",i.slabDetail.image,Tt)("alt",n.title)}}function a2(t,e){if(t&1){let n=Le();v(0,"div",19)(1,"button",20),G("click",function(){ge(n);let r=ne().index,s=ne();return _e(s.decreaseQuantity(r))}),E(2,"-"),y(),v(3,"span"),E(4),y(),v(5,"button",21),G("click",function(){ge(n);let r=ne().index,s=ne();return _e(s.increaseQuantity(r))}),E(6,"+"),y(),v(7,"button",22),G("click",function(){ge(n);let r=ne(2);return _e(r.removeSelection())}),L(8,"img",23),y()()}if(t&2){let n=ne().index,i=ne();N(4),ve(i.quantities[n])}}function c2(t,e){if(t&1){let n=Le();v(0,"button",24),G("click",function(){ge(n);let r=ne(),s=r.$implicit,o=r.index,c=ne();return _e(c.memberform(o,s))}),E(1,"Book Now"),y()}if(t&2){let n=ne(2);j("disabled",n.selectedButtonIndex!==null)}}function l2(t,e){if(t&1&&(v(0,"div",14)(1,"div")(2,"span",15),E(3),y(),L(4,"br"),v(5,"span",16),E(6),y()(),oe(7,a2,9,1,"div",17)(8,c2,2,1,"button",18),y()),t&2){let n=e.$implicit,i=e.index,r=ne();N(3),ve(n.name),N(3),be("\u20B9",n.price,""),N(),j("ngIf",r.selectedButtonIndex===i),N(),j("ngIf",r.selectedButtonIndex!==i)}}function u2(t,e){if(t&1&&(v(0,"div"),E(1),y()),t&2){let n=ne();N(),ve(n.slabDetail.description)}}function d2(t,e){if(t&1&&(v(0,"div",29)(1,"div",30),L(2,"img",31),y(),v(3,"div",32)(4,"span"),E(5),y(),L(6,"br"),v(7,"span"),E(8),y()()()),t&2){let n=e.$implicit;N(5),ve(n.time),N(3),ve(n.description)}}function h2(t,e){if(t&1&&(v(0,"div",26)(1,"span",27),E(2),y(),oe(3,d2,9,2,"div",28),y()),t&2){let n=e.$implicit;N(2),ve(n.day),N(),j("ngForOf",n.events)}}function f2(t,e){if(t&1&&(v(0,"div"),oe(1,h2,4,2,"div",25),y()),t&2){let n=ne();N(),j("ngForOf",n.schedule)}}function p2(t,e){if(t&1){let n=Le();v(0,"button",33),G("click",function(){ge(n);let r=ne();return _e(r.goToNextPage())}),E(1,"Next"),y()}}var pS=(()=>{let e=class e{constructor(i,r,s){this.router=i,this.ActivateRouted=r,this.EventService=s,this.schedule=[],this.events=[{title:"Cearic Kashi Summit 2024",image:"/assets/homepage/varient_slider.svg"},{title:"Cearic Kashi Summit 2025",image:"/assets/homepage/varient_slider.svg"},{title:"Cearic Kashi Summit 2026",image:"/assets/homepage/varient_slider.svg"},{title:"Cearic Kashi Summit 2027",image:"/assets/homepage/varient_slider.svg"}],this.selectedTab="description",this.selectedButtonIndex=null,this.quantities=[],this.ActivateRouted.paramMap.subscribe(o=>g(this,null,function*(){o.get("id")!==null&&(this.slabId=o.get("id")||"")})),this.EventService.bookingDetails().slab||this.router.navigate(["/home"])}ngOnInit(){this.slabDetail=this.EventService.bookingDetails().slab;let i=this.EventService.bookingDetails().event.eventId,r=this.EventService.itineraryList()[i];this.itinerary=this.groupAndSortActivities(r.activities),console.log(this.slabDetail),console.log(this.itinerary),this.schedule=[];for(let s in this.itinerary){let o=this.itinerary[s].map(c=>({time:`${c.startTime} - ${c.endTime}`,description:c.description}));this.schedule.push({day:`DAY (${s})`,events:o})}console.log(this.schedule)}convertTo12Hour(i){let[r,s]=i.split(":").map(Number),o=r>=12?"PM":"AM";return`${(r+11)%12+1}:${s.toString().padStart(2,"0")} ${o}`}groupAndSortActivities(i){let r=i.reduce((o,c)=>{let{date:l}=c;return o[l]||(o[l]=[]),o[l].push(c),o},{});for(let o in r)r[o].sort((c,l)=>{let u=this.convertTo12Hour(c.startTime),h=this.convertTo12Hour(l.startTime);return u.localeCompare(h)}),r[o]=r[o].map(c=>me(U({},c),{startTime:this.convertTo12Hour(c.startTime),endTime:this.convertTo12Hour(c.endTime)}));return Object.keys(r).sort((o,c)=>new Date(o).getTime()-new Date(c).getTime()).reduce((o,c)=>(o[c]=r[c],o),{})}selectTab(i){this.selectedTab=i}memberform(i,r){let s=this.EventService.bookingDetails();s.variant=r,this.EventService.bookingDetails.set(s),this.selectedButtonIndex=i,this.quantities[i]=1}increaseQuantity(i){this.quantities[i]<99&&this.quantities[i]++}decreaseQuantity(i){this.quantities[i]>1&&this.quantities[i]--}removeSelection(){this.selectedButtonIndex=null}goToNextPage(){let i=this.selectedButtonIndex!==null?this.selectedButtonIndex:0,r=this.EventService.bookingDetails();r.totalMember=this.quantities[i],this.EventService.bookingDetails.set(r),this.router.navigate(["member-detail"])}};e.\u0275fac=function(r){return new(r||e)(k(he),k(fn),k(it))},e.\u0275cmp=H({type:e,selectors:[["app-varient-selection"]],standalone:!0,features:[Q],decls:17,vars:10,consts:[[3,"pageTitle"],[1,"event-slider"],[1,"slider"],["class","slide",4,"ngFor","ngForOf"],[1,"varient"],["class","rotarian",4,"ngFor","ngForOf"],[1,"scroll"],[1,"tabs"],[1,"tab",3,"click"],[1,"content"],[4,"ngIf"],["class","next-button",3,"click",4,"ngIf"],[1,"slide"],[3,"src","alt"],[1,"rotarian"],[1,"section_title","header_text_color","label"],[1,"section_title","price"],["class","threebutton",4,"ngIf"],["class","book-now",3,"disabled","click",4,"ngIf"],[1,"threebutton"],[1,"quantity-control-decrement",3,"click"],[1,"quantity-control-increment",3,"click"],[1,"remove-selection",3,"click"],["src","/assets/homepage/Delete 2.svg"],[1,"book-now",3,"click","disabled"],["class","schedule-day",4,"ngFor","ngForOf"],[1,"schedule-day"],[1,"paragraph_text"],["class","schedule-event",4,"ngFor","ngForOf"],[1,"schedule-event"],[1,"dot"],["src","/assets/bookinghistory/Ellipse 395.svg"],[1,"activity"],[1,"next-button",3,"click"]],template:function(r,s){r&1&&(L(0,"app-header-with-back",0),v(1,"section")(2,"div",1)(3,"div",2),oe(4,o2,2,2,"div",3),y()(),v(5,"div",4),oe(6,l2,9,4,"div",5),y(),v(7,"div",6)(8,"div",7)(9,"div",8),G("click",function(){return s.selectTab("description")}),E(10,"Description"),y(),v(11,"div",8),G("click",function(){return s.selectTab("itinerary")}),E(12,"Itinerary"),y()(),v(13,"div",9),oe(14,u2,2,1,"div",10)(15,f2,2,1,"div",10),y()(),oe(16,p2,2,0,"button",11),y()),r&2&&(j("pageTitle",s.EventService.bookingDetails().slab.name),N(4),j("ngForOf",s.events),N(2),j("ngForOf",s.EventService.variantList()[s.slabId]),N(3),St("active",s.selectedTab==="description"),N(2),St("active",s.selectedTab==="itinerary"),N(3),j("ngIf",s.selectedTab==="description"),N(),j("ngIf",s.selectedTab==="itinerary"),N(),j("ngIf",s.selectedButtonIndex!==null))},dependencies:[xe,_t,Nt,ze],styles:["section[_ngcontent-%COMP%]{margin-top:2%;padding:70px 20px 80px}section[_ngcontent-%COMP%]   .slider[_ngcontent-%COMP%]{margin-top:5%}section[_ngcontent-%COMP%]   .event-slider[_ngcontent-%COMP%]   .slider[_ngcontent-%COMP%]{display:flex;overflow-x:auto;scroll-snap-type:x mandatory;-ms-overflow-style:none;scrollbar-width:none}section[_ngcontent-%COMP%]   .event-slider[_ngcontent-%COMP%]   .slide[_ngcontent-%COMP%]{flex:0 0 auto;scroll-snap-align:start;margin-right:20px;cursor:pointer}section[_ngcontent-%COMP%]   .event-slider[_ngcontent-%COMP%]   .slide[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;border-radius:20px}section[_ngcontent-%COMP%]   .varient[_ngcontent-%COMP%]{margin-top:10%}section[_ngcontent-%COMP%]   .varient[_ngcontent-%COMP%]   .rotarian[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:10px}section[_ngcontent-%COMP%]   .varient[_ngcontent-%COMP%]   .rotarian[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-size:16px}section[_ngcontent-%COMP%]   .varient[_ngcontent-%COMP%]   .rotarian[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]{font-size:16px;color:#579540}section[_ngcontent-%COMP%]   .varient[_ngcontent-%COMP%]   .rotarian[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{line-height:1.5}section[_ngcontent-%COMP%]   .varient[_ngcontent-%COMP%]   .rotarian[_ngcontent-%COMP%]   .book-now[_ngcontent-%COMP%]{width:105px;height:50px;border-radius:50px;background:linear-gradient(90.32deg,#2f15aa .28%,#2f15aacc 47.84%,#2f15aa66 99.72%);border:none;color:#fff}section[_ngcontent-%COMP%]   .varient[_ngcontent-%COMP%]   .rotarian[_ngcontent-%COMP%]   .book-now.selected[_ngcontent-%COMP%]{background:linear-gradient(90.32deg,#2f15aa .28%,#2f15aacc 47.84%,#2f15aa66 99.72%);color:#fff}section[_ngcontent-%COMP%]   .varient[_ngcontent-%COMP%]   .rotarian[_ngcontent-%COMP%]   .book-now[_ngcontent-%COMP%]:disabled{background:#d3d3d3;color:gray}section[_ngcontent-%COMP%]   .varient[_ngcontent-%COMP%]   .rotarian[_ngcontent-%COMP%]   .threebutton[_ngcontent-%COMP%]{display:flex}section[_ngcontent-%COMP%]   .varient[_ngcontent-%COMP%]   .rotarian[_ngcontent-%COMP%]   .threebutton[_ngcontent-%COMP%]   .quantity-control-increment[_ngcontent-%COMP%]{width:30px;height:30px;border-radius:5px;background:linear-gradient(90.32deg,#2f15aa .28%,#2f15aacc 47.84%,#2f15aa66 99.72%);border:none;color:#fff;margin:8px 15px 0;font-size:25px}section[_ngcontent-%COMP%]   .varient[_ngcontent-%COMP%]   .rotarian[_ngcontent-%COMP%]   .threebutton[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:20px;margin-top:8px}section[_ngcontent-%COMP%]   .varient[_ngcontent-%COMP%]   .rotarian[_ngcontent-%COMP%]   .threebutton[_ngcontent-%COMP%]   .quantity-control-decrement[_ngcontent-%COMP%]{width:30px;height:30px;border-radius:5px;border:1px solid linear-gradient(90.32deg,#2F15AA .28%,rgba(47,21,170,.8) 47.84%,rgba(47,21,170,.4) 99.72%);color:linear-gradient(90.32deg,#2F15AA .28%,rgba(47,21,170,.8) 47.84%,rgba(47,21,170,.4) 99.72%);margin:8px 15px 0;font-size:25px}section[_ngcontent-%COMP%]   .varient[_ngcontent-%COMP%]   .rotarian[_ngcontent-%COMP%]   .threebutton[_ngcontent-%COMP%]   .remove-selection[_ngcontent-%COMP%]{width:30px;height:30px;border-radius:5px;background:#fff;border:none;margin-left:10px}section[_ngcontent-%COMP%]   .varient[_ngcontent-%COMP%]   .rotarian[_ngcontent-%COMP%]   .threebutton[_ngcontent-%COMP%]   .remove-selection[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:40px;height:40px}section[_ngcontent-%COMP%]   .scroll[_ngcontent-%COMP%]{overflow-x:auto;-ms-overflow-style:none;scrollbar-width:none;margin-bottom:5px;padding-top:70px}section[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%]{display:flex}section[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]{padding:10px 30px;border-radius:10px;cursor:pointer;justify-content:center;align-items:center}section[_ngcontent-%COMP%]   .tab.active[_ngcontent-%COMP%], section[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]:hover{background:var(--active-tab-gradient, linear-gradient(90deg, #464E5F .28%, rgba(70, 78, 95, .8) 47.84%, rgba(70, 78, 95, .4) 99.72%));color:#fff}section[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{margin-top:8%;padding:20px;background:var(--inactive-gray, #B6B6B6);border:1px solid;border-image-source:linear-gradient(99.41deg,rgba(170,170,170,.3) 12.07%,rgba(170,170,170,.2) 48.35%,rgba(170,170,170,.2) 87.93%);border-radius:10px;box-shadow:0 4px 8px #0000001a;margin-left:.4rem;margin-right:.4rem}section[_ngcontent-%COMP%]   .next-button[_ngcontent-%COMP%]{margin-top:100px;width:100%;height:60px;padding:15px;color:#fff;background:linear-gradient(90.32deg,#2f15aa .28%,#2f15aacc 47.84%,#2f15aa66 99.72%);border:none;border-radius:30px;size:10px}section[_ngcontent-%COMP%]   .schedule-day[_ngcontent-%COMP%]{margin-bottom:20px}section[_ngcontent-%COMP%]   .schedule-day[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#04102d}section[_ngcontent-%COMP%]   .schedule-event[_ngcontent-%COMP%]{display:flex;gap:1rem}section[_ngcontent-%COMP%]   .schedule-event[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]{margin-top:10px}section[_ngcontent-%COMP%]   .schedule-event[_ngcontent-%COMP%]   .activity[_ngcontent-%COMP%]{padding:5px 0 10px}section[_ngcontent-%COMP%]   .schedule-event[_ngcontent-%COMP%]   .activity[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{line-height:1.5}"]});let t=e;return t})();var mS=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=H({type:e,selectors:[["app-donation"]],standalone:!0,features:[Q],decls:2,vars:0,template:function(r,s){r&1&&(v(0,"p"),E(1,"donation works!"),y())}});let t=e;return t})();var gS=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=H({type:e,selectors:[["app-coupon"]],standalone:!0,features:[Q],decls:2,vars:0,template:function(r,s){r&1&&(v(0,"p"),E(1,"coupon works!"),y())}});let t=e;return t})();var _S=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=H({type:e,selectors:[["app-feed"]],standalone:!0,features:[Q],decls:2,vars:0,template:function(r,s){r&1&&(v(0,"p"),E(1,"feed works!"),y())}});let t=e;return t})();var vS=(()=>{let e=class e{constructor(i){this.router=i}movetoContactUs(){this.router.navigate(["ContactUs"])}logout(){console.log("logout"),tI(hu()).then(()=>{this.router.navigate(["login"])}).catch(i=>console.log(i))}openInNewTab(i){window.open(i,"_blank")}};e.\u0275fac=function(r){return new(r||e)(k(he))},e.\u0275cmp=H({type:e,selectors:[["app-account"]],standalone:!0,features:[Q],decls:31,vars:0,consts:[[1,"profileimage"],["src","assets/account/profile.svg"],[1,"profilename"],[1,"section_title"],[1,"buttons"],[1,"white","section_title"],["src","assets/account/editprofile.svg"],["src","assets/account/location.svg"],[1,"white","section_title",3,"click"],["src","assets/account/aboutus.svg"],["src","assets/account/contactus.svg"],["src","assets/account/logout.svg"],[1,"footer"],["src","assets/account/Shreeva-logo.svg"]],template:function(r,s){r&1&&(L(0,"app-header-with-menu"),v(1,"section")(2,"div",0),L(3,"img",1),y(),v(4,"div",2)(5,"h3",3),E(6,"Anuj kesharwani"),y()(),v(7,"div",4)(8,"button",5),L(9,"img",6),v(10,"span"),E(11,"Edit Profile"),y()(),L(12,"br"),v(13,"button",5),L(14,"img",7),E(15,"Add Address"),y(),L(16,"br"),v(17,"button",8),G("click",function(){return s.openInNewTab("https://kashisummit.com/")}),L(18,"img",9),E(19,"About Us"),y(),L(20,"br"),v(21,"button",8),G("click",function(){return s.movetoContactUs()}),L(22,"img",10),E(23,"Contact Us"),y(),v(24,"button",8),G("click",function(){return s.logout()}),L(25,"img",11),E(26,"Logout"),y()(),v(27,"div",12),L(28,"img",13),v(29,"span"),E(30,"Powered By Shreeva"),y()()())},dependencies:[Ud],styles:["section[_ngcontent-%COMP%]   .profileimage[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:3rem}section[_ngcontent-%COMP%]   .profilename[_ngcontent-%COMP%]{display:flex;justify-content:center}section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#000}section[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]{padding:0 15px}section[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{height:50px;width:100%;background:linear-gradient(90.32deg,#464e5f .28%,#464e5fcc 47.84%,#464e5f66 99.72%);margin-top:1rem;border:none;border-radius:20px;font-size:16px;text-align:left;padding-bottom:10px}section[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-left:.8rem;padding-right:10px}section[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]{display:flex;justify-content:center;position:fixed;bottom:100px;padding:1rem}section[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-top:1rem;font-size:15px}"]});let t=e;return t})();var yS=(()=>{let e=class e{constructor(i,r,s){this.router=i,this.EventService=r,this.PaymentService=s,this.bookingDetail=this.EventService.bookingDetails()}naviagateToHomepage(){this.router.navigate(["home"])}generateUniqueReceipt(){let i=Date.now().toString(),r=Math.random().toString(36).substring(2,10);return`receipt_${i}_${r}`}tryAgain(){let i=this.EventService.bookingDetails(),r=this.generateUniqueReceipt(),s=i.paymentDetail.totalPrice;this.PaymentService.createOrder(s*100,"INR",r).subscribe(o=>{let c={amount:s,description:"Test Transaction",order_id:o.id,customerName:i.customer.name,contact:i.customer.phoneNumber,receiptId:r};this.PaymentService.initiatePayment(c)})}};e.\u0275fac=function(r){return new(r||e)(k(he),k(it),k(qd))},e.\u0275cmp=H({type:e,selectors:[["app-payment-failed"]],standalone:!0,features:[Q],decls:40,vars:7,consts:[[3,"pageTitle"],[1,"container"],[1,"confirmation-card"],["src","/assets/event-payment/paymentfailed.svg"],[1,"payment-details"],[1,"section_title"],[1,"paragraph_text","detail"],[1,"paragraph_text","detail_status","red"],[1,"button-done"],[1,"proceed-button",3,"click"]],template:function(r,s){r&1&&(L(0,"app-header-with-back",0),v(1,"section",1)(2,"div",2),L(3,"img",3),v(4,"div",4)(5,"h2",5),E(6,"Payment Details"),y(),v(7,"div",6)(8,"p"),E(9),y(),v(10,"span"),E(11,"Kashi Summit 2024"),y()(),v(12,"div",6)(13,"p"),E(14,"Slab"),y(),v(15,"span"),E(16),y()(),v(17,"div",6)(18,"p"),E(19,"Variant"),y(),v(20,"span"),E(21),y()(),v(22,"div",6)(23,"p"),E(24,"Date"),y(),v(25,"span"),E(26),y()(),v(27,"div",6)(28,"p"),E(29,"Payment"),y(),v(30,"span"),E(31),y()(),v(32,"div",7)(33,"p"),E(34,"Status"),y(),v(35,"span"),E(36,"Unsuccessful"),y()()()()(),v(37,"div",8)(38,"button",9),G("click",function(){return s.tryAgain()}),E(39,"Try Again"),y()()),r&2&&(j("pageTitle","Payment "),N(9),be("",s.bookingDetail.event.eventName," "),N(7),ve(s.bookingDetail.slab.name),N(5),ve(s.bookingDetail.variant.name),N(5),os("",s.bookingDetail.paymentDetail.date," & ",s.bookingDetail.paymentDetail.time," "),N(5),be("\u20B9",s.bookingDetail.paymentDetail.totalPrice,""))},dependencies:[ze],styles:[".container[_ngcontent-%COMP%]{margin-top:2%;padding:70px 20px 0}.container[_ngcontent-%COMP%]   .confirmation-card[_ngcontent-%COMP%]{background-color:#fff;border-radius:10px;box-shadow:0 4px 8px #0000001a;margin-left:1rem;margin-right:1rem;padding:20px}.container[_ngcontent-%COMP%]   .confirmation-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}.container[_ngcontent-%COMP%]   .confirmation-card[_ngcontent-%COMP%]   .payment-details[_ngcontent-%COMP%]{margin-top:2rem;margin-left:.6rem;margin-right:.6rem}.container[_ngcontent-%COMP%]   .confirmation-card[_ngcontent-%COMP%]   .payment-details[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:18px;color:#444;font-weight:700}.container[_ngcontent-%COMP%]   .confirmation-card[_ngcontent-%COMP%]   .payment-details[_ngcontent-%COMP%]   .detail[_ngcontent-%COMP%]{display:flex;justify-content:space-between;line-height:2}.container[_ngcontent-%COMP%]   .confirmation-card[_ngcontent-%COMP%]   .payment-details[_ngcontent-%COMP%]   .detail[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#7e8083;font-size:14px;font-weight:500}.container[_ngcontent-%COMP%]   .confirmation-card[_ngcontent-%COMP%]   .payment-details[_ngcontent-%COMP%]   .detail[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#464e5f;font-size:14px;font-weight:500}.container[_ngcontent-%COMP%]   .confirmation-card[_ngcontent-%COMP%]   .payment-details[_ngcontent-%COMP%]   .detail_status[_ngcontent-%COMP%]{margin-top:10px;border-top:2px dashed #D7D7D7;display:flex;justify-content:space-between}.container[_ngcontent-%COMP%]   .confirmation-card[_ngcontent-%COMP%]   .payment-details[_ngcontent-%COMP%]   .detail_status[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   .confirmation-card[_ngcontent-%COMP%]   .payment-details[_ngcontent-%COMP%]   .detail_status[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-top:10px;font-size:18px}.button-done[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:50px}.button-done[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:80%;padding:15px;background:linear-gradient(90.32deg,#2f15aa .28%,#2f15aacc 47.84%,#2f15aa66 99.72%);color:#fff;border:none;border-radius:25px;font-size:16px;cursor:pointer}"]});let t=e;return t})();var Gd=(()=>{let e=class e{constructor(i){this.firestore=i}getAllUsers(){return g(this,null,function*(){return yield Dn(Ut(this.firestore,"users"))})}getUserBookings(i){return g(this,null,function*(){return yield Dn(Ut(this.firestore,"users",i,"bookings"))})}delete(i,r){return Ed(gt(this.firestore,"users",i,"bookings",r))}updateMember(i,r,s,o){return g(this,null,function*(){let c=gt(this.firestore,"users",i,"bookings",r),u=(yield Cd(c)).data();if(u){let h=u.memberDetail;return h[s]=o,Td(c,{memberDetail:h})}})}};e.\u0275fac=function(r){return new(r||e)(M(Ue))},e.\u0275prov=$({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function m2(t,e){if(t&1){let n=Le();v(0,"div",8),G("click",function(){let r=ge(n).$implicit,s=ne();return _e(s.bookingdetail(r.BookingId))}),v(1,"div",9),L(2,"img",10),v(3,"div",11)(4,"p",12),E(5),y(),v(6,"p",13),E(7),y(),v(8,"h3",14),E(9),y(),v(10,"div",15)(11,"p",16),E(12),y(),v(13,"p",16),E(14),y()(),v(15,"div",15)(16,"p",17),E(17),y(),v(18,"p",18),E(19),y()()()()()}if(t&2){let n=e.$implicit;N(5),ve(n.name),N(2),be("Contact : ",n.contact,""),N(2),ve(n.eventname),N(3),ve(n.slabname),N(2),ve(n.varientname),N(3),be("\u20B9",n.price,""),N(2),be("Tickets: ",n.tickets,"")}}var wS=(()=>{let e=class e{ngOnInit(){this.getUsersBooking()}constructor(i,r,s,o){this.router=i,this.receivingEventService=r,this.firestore=s,this.DataProviderService=o}bookingdetail(i){this.router.navigate(["PaymentDetail",i])}getUsersBooking(){return g(this,null,function*(){this.bookings=[];let i=this.DataProviderService.currentUser?.userData.uid,r=yield this.receivingEventService.getUserBookings(i);for(let s of r.docs){let o=s.data();o.paymentDetail.paymentStatus=="success"&&this.bookings.push({BookingId:o.id,name:o.customer.name,contact:o.customer.phoneNumber,eventname:o.event.eventName,slabname:o.slab.name,varientname:o.variant.name,price:o.paymentDetail.totalPrice,tickets:o.variant.totalTicket})}})}};e.\u0275fac=function(r){return new(r||e)(k(he),k(Gd),k(Ue),k(ht))},e.\u0275cmp=H({type:e,selectors:[["app-booking-history"]],standalone:!0,features:[Q],decls:11,vars:2,consts:[[3,"pageTitle"],[1,"event"],[1,"heading"],[1,"section_title","header_text_color"],[1,"filtre"],["value","newest"],["value","oldest"],["class","card",3,"click",4,"ngFor","ngForOf"],[1,"card",3,"click"],[1,"ticket-info"],["src","assets/bookinghistory/image.svg","alt","Event Image",1,"event-image"],[1,"event-details"],[1,"section_title","name"],[1,"paragraph_text","contact"],[1,"section_title","heading"],[1,"row2"],[1,"paragraph_text","header_text_color"],[1,"paragraph_text","header_text_color","ticket","green"],[1,"paragraph_text","header_text_color","ticket"]],template:function(r,s){r&1&&(L(0,"app-header-with-back",0),v(1,"Section",1)(2,"div",2)(3,"h2",3),E(4,"Booked Events"),y(),v(5,"select",4)(6,"option",5),E(7,"newest"),y(),v(8,"option",6),E(9,"oldest"),y()()(),oe(10,m2,20,7,"div",7),y()),r&2&&(j("pageTitle","Booking history"),N(10),j("ngForOf",s.bookings))},dependencies:[xe,_t,ze],styles:[".event[_ngcontent-%COMP%]{padding:20px}.event[_ngcontent-%COMP%]   .heading[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:15%}.event[_ngcontent-%COMP%]   .heading[_ngcontent-%COMP%]   .filtre[_ngcontent-%COMP%]{width:130px;height:32px;margin-right:5px;border-radius:10px}.card[_ngcontent-%COMP%]{background:linear-gradient(90.61deg,#e0e0e04d .53%,#e0e0e033 47.85%,#e0e0e01a 99.47%);border-radius:12px;margin-top:10px}.card[_ngcontent-%COMP%]   .ticket-info[_ngcontent-%COMP%]{display:flex;justify-content:space-around}.card[_ngcontent-%COMP%]   .ticket-info[_ngcontent-%COMP%]   .event-details[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font-size:20px}.card[_ngcontent-%COMP%]   .ticket-info[_ngcontent-%COMP%]   .event-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:5px;font-size:14px}.card[_ngcontent-%COMP%]   .ticket-info[_ngcontent-%COMP%]   .event-details[_ngcontent-%COMP%]   .heading[_ngcontent-%COMP%]{font-size:20px;color:#000;margin:5px 0}.card[_ngcontent-%COMP%]   .ticket-info[_ngcontent-%COMP%]   .event-details[_ngcontent-%COMP%]   .row2[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:5px}.card[_ngcontent-%COMP%]   .ticket-info[_ngcontent-%COMP%]   .event-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;color:#444;margin:0}.card[_ngcontent-%COMP%]   .ticket-info[_ngcontent-%COMP%]   .event-details[_ngcontent-%COMP%]   .green[_ngcontent-%COMP%]{color:#48bc1f;font-weight:700}"]});let t=e;return t})();var g2=(t,e,n)=>({"text-black":t,"text-green":e,"text-red":n});function _2(t,e){if(t&1){let n=Le();v(0,"div",16),G("click",function(){let r=ge(n).index,s=ne(2);return _e(s.selectTab(r))}),E(1),y()}if(t&2){let n=e.index,i=ne(2);St("active",i.selectedTab===n),N(),be("Member ",n+1," ")}}function v2(t,e){if(t&1&&(v(0,"div",14),oe(1,_2,2,3,"div",15),y()),t&2){let n=ne();N(),j("ngForOf",n.members)}}function y2(t,e){if(t&1&&(v(0,"div",18)(1,"div",19)(2,"strong"),E(3,"Name:"),y(),E(4),y(),v(5,"div",19)(6,"strong"),E(7,"Aadhaar:"),y(),E(8),y(),v(9,"div",19)(10,"strong"),E(11,"Gender:"),y(),E(12),y(),v(13,"div",19)(14,"strong"),E(15,"Contact:"),y(),E(16),y()()),t&2){let n=ne(2);N(4),be(" ",n.members[n.selectedTab].Name,""),N(4),be(" ",n.members[n.selectedTab].Aadharnumber,""),N(4),be(" ",n.members[n.selectedTab].gender,""),N(4),be(" ",n.members[n.selectedTab].mobileNo,"")}}function b2(t,e){if(t&1&&(v(0,"div"),oe(1,y2,17,4,"div",17),y()),t&2){let n=ne();N(),j("ngIf",n.selectedTab!==null)}}var IS=(()=>{let e=class e{constructor(i,r,s,o,c){this.route=i,this.bottomSheet=r,this.firestore=s,this.receivingEventService=o,this.router=c,this.bookingdata=null,this.selectedTab=0,this.members=[]}ngOnInit(){let i=this.route.snapshot.paramMap.get("BookingId");i&&this.getBookingDetails(i)}getBookingDetails(i){return g(this,null,function*(){let r=yield this.receivingEventService.getAllUsers();for(let s of r.docs){let o=s.id,c=yield this.receivingEventService.getUserBookings(o);for(let l of c.docs){let u=l.data();if(u.id===i){this.bookingdata={BookingId:u.id,name:u.customer.name,contact:u.customer.phoneNumber,eventname:u.event.eventName,slabname:u.slab.name,varientname:u.variant.name,date:u.paymentDetail.date,time:u.paymentDetail.time,price:u.paymentDetail.totalPrice,tickets:u.totalMember,status:u.paymentDetail.paymentStatus,member:u.memberDetail},this.members=u.memberDetail,this.userId=o;break}}}})}selectTab(i){this.selectedTab=i}};e.\u0275fac=function(r){return new(r||e)(k(fn),k(Vd),k(Ue),k(Gd),k(he))},e.\u0275cmp=H({type:e,selectors:[["app-payment-details"]],inputs:{bookingdata:"bookingdata"},standalone:!0,features:[Q],decls:51,vars:17,consts:[[3,"pageTitle"],[1,"details"],[1,"booking"],[1,"card_title_text","heading"],[1,"event","paragraph_text"],[1,"field"],[1,"header_text_color"],[1,"eventpayment","paragraph_text"],[3,"ngClass"],[1,"scroll"],[1,"memberheading"],[1,"card_title_text"],["class","tabs",4,"ngIf"],[4,"ngIf"],[1,"tabs"],["class","tab",3,"active","click",4,"ngFor","ngForOf"],[1,"tab",3,"click"],["class","content",4,"ngIf"],[1,"content"],[1,"card2"]],template:function(r,s){r&1&&(L(0,"app-header-with-back",0),v(1,"section",1)(2,"div",2)(3,"p",3),E(4,"Payment Details"),y(),v(5,"div",4)(6,"span",5),E(7,"Event"),y(),v(8,"span",6),E(9),y()(),v(10,"div",4)(11,"span",5),E(12,"slab"),y(),v(13,"span",6),E(14),y()(),v(15,"div",4)(16,"span",5),E(17,"varient"),y(),v(18,"span",6),E(19),y()(),v(20,"div",4)(21,"span",5),E(22,"Booking Member"),y(),v(23,"span",6),E(24),y()(),v(25,"div",4)(26,"span",5),E(27,"Contact"),y(),v(28,"span",6),E(29),y()(),v(30,"div",4)(31,"span",5),E(32,"Date"),y(),v(33,"span",6),E(34),y()(),v(35,"div",4)(36,"span",5),E(37,"Payment"),y(),v(38,"span",6),E(39),y()(),v(40,"div",7)(41,"span",5),E(42,"Status"),y(),v(43,"span",8),E(44),y()()(),v(45,"div",9)(46,"div",10)(47,"p",11),E(48,"Member Details"),y()(),oe(49,v2,2,1,"div",12)(50,b2,2,1,"div",13),y()()),r&2&&(j("pageTitle","Booking Details"),N(9),ve(s.bookingdata==null?null:s.bookingdata.eventname),N(5),ve(s.bookingdata==null?null:s.bookingdata.slabname),N(5),ve(s.bookingdata==null?null:s.bookingdata.varientname),N(5),ve(s.bookingdata==null?null:s.bookingdata.name),N(5),ve(s.bookingdata==null?null:s.bookingdata.contact),N(5),os("",s.bookingdata==null?null:s.bookingdata.date," ",s.bookingdata==null?null:s.bookingdata.time,""),N(5),ve(s.bookingdata==null?null:s.bookingdata.price),N(4),j("ngClass",p0(13,g2,(s.bookingdata==null?null:s.bookingdata.status)==="pending",(s.bookingdata==null?null:s.bookingdata.status)==="success",(s.bookingdata==null?null:s.bookingdata.status)==="failed")),N(),be(" ",s.bookingdata==null?null:s.bookingdata.status," "),N(5),j("ngIf",s.members.length>0),N(),j("ngIf",s.members.length>0))},dependencies:[xe,ll,_t,Nt,ze],styles:[".details[_ngcontent-%COMP%]{padding:20px}.details[_ngcontent-%COMP%]   .booking[_ngcontent-%COMP%]{background:linear-gradient(99.41deg,#e1e1e14d 12.07%,#e1e1e133 48.35% 87.93%);margin-top:15%;border-radius:15px}.details[_ngcontent-%COMP%]   .booking[_ngcontent-%COMP%]   .heading[_ngcontent-%COMP%]{font-weight:500;margin:5px}.details[_ngcontent-%COMP%]   .booking[_ngcontent-%COMP%]   .event[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:2px 10px 0}.details[_ngcontent-%COMP%]   .booking[_ngcontent-%COMP%]   .event[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]{color:#7e8083;font-size:16px;font-weight:500}.details[_ngcontent-%COMP%]   .booking[_ngcontent-%COMP%]   .event[_ngcontent-%COMP%]   .header_text_color[_ngcontent-%COMP%]{font-size:18px;font-weight:500}.details[_ngcontent-%COMP%]   .booking[_ngcontent-%COMP%]   .eventpayment[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:10px;padding:0 10px 20px}.details[_ngcontent-%COMP%]   .booking[_ngcontent-%COMP%]   .eventpayment[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]{font-size:22px}.details[_ngcontent-%COMP%]   .booking[_ngcontent-%COMP%]   .eventpayment[_ngcontent-%COMP%]   .text-red[_ngcontent-%COMP%]{color:red;font-size:22px}.details[_ngcontent-%COMP%]   .booking[_ngcontent-%COMP%]   .eventpayment[_ngcontent-%COMP%]   .text-green[_ngcontent-%COMP%]{color:#48bc1f;font-size:22px}.details[_ngcontent-%COMP%]   .booking[_ngcontent-%COMP%]   .eventpayment[_ngcontent-%COMP%]   .text-black[_ngcontent-%COMP%]{color:#000;font-size:22px}.details[_ngcontent-%COMP%]   .scroll[_ngcontent-%COMP%]{background:linear-gradient(99.41deg,#e1e1e14d 12.07%,#e1e1e133 48.35% 87.93%);border-radius:15px;padding:10px;margin-top:20px}.details[_ngcontent-%COMP%]   .memberheading[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.details[_ngcontent-%COMP%]   .memberheading[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:80px;height:30px;border-radius:15px;background:linear-gradient(90.32deg,#2f15aa .28%,#2f15aacc 47.84%,#2f15aa66 99.72%);border:none;color:#fff;align-items:center}.details[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%]{display:flex;overflow-x:auto;-ms-overflow-style:none;scrollbar-width:none}.details[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]{padding:5px;border-radius:10px;cursor:pointer;justify-content:center;align-items:center}.details[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%]   .tab.active[_ngcontent-%COMP%], .details[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]:hover{background:var(--active-tab-gradient, linear-gradient(90deg, #464E5F .28%, rgba(70, 78, 95, .8) 47.84%, rgba(70, 78, 95, .4) 99.72%));color:#fff}.details[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{margin-top:8%;padding:20px;background:linear-gradient(99.41deg,#e1e1e14d 12.07%,#e1e1e133 48.35% 87.93%);border:1px solid;border-image-source:linear-gradient(99.41deg,rgba(170,170,170,.3) 12.07%,rgba(170,170,170,.2) 48.35%,rgba(170,170,170,.2) 87.93%);border-radius:10px;box-shadow:0 4px 8px #0000001a;margin-left:.4rem;margin-right:.4rem}.details[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .card2[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.details[_ngcontent-%COMP%]   .delete[_ngcontent-%COMP%]{color:#fff;background:linear-gradient(91.49deg,#e90d35 1.27%,#e90d35cc 47.72%,#e90d3566 98.38%);border:none;height:60px;width:166px;border-radius:30px;margin-left:25%}"]});let t=e;return t})();var ES=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=H({type:e,selectors:[["app-contact-us"]],standalone:!0,features:[Q],decls:25,vars:1,consts:[[3,"pageTitle"],[1,"contact-section"],[1,"image"],["src","assets/contact/contactimage.svg","alt","Contact Image"],[1,"detail"],[1,"row1"],["src","assets/contact/location.svg","alt","Location"],["src","assets/contact/call.svg","alt","Call"],["src","assets/contact/gmail.svg","alt","Email"],["src","assets/contact/web.svg","alt","Website"],[1,"icon"],["src","assets/contact/fb.svg","alt","Facebook"],["src","assets/contact/insta.svg","alt","Instagram"],["src","assets/contact/whatsapp.svg","alt","WhatsApp"]],template:function(r,s){r&1&&(L(0,"app-header-with-back",0),v(1,"section",1)(2,"div",2),L(3,"img",3),y(),v(4,"div",4)(5,"div",5),L(6,"img",6),v(7,"span"),E(8,"3432 Divi, Sector 65, Noida"),y()(),v(9,"div",5),L(10,"img",7),v(11,"span"),E(12,"5464- 4556677889"),y()(),v(13,"div",5),L(14,"img",8),v(15,"span"),E(16,"supportdfghj.com"),y()(),v(17,"div",5),L(18,"img",9),v(19,"span"),E(20,"Kashisummit_fyi.com"),y()()(),v(21,"div",10),L(22,"img",11)(23,"img",12)(24,"img",13),y()()),r&2&&j("pageTitle","Contact Us")},dependencies:[ze],styles:["section.contact-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:1rem;width:100%;max-width:600px;margin:0 auto;padding-bottom:80px}section.contact-section[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]{display:flex;justify-content:center;width:100%;margin-top:50px}section.contact-section[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;height:auto}section.contact-section[_ngcontent-%COMP%]   .detail[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;margin-top:5rem;width:100%}section.contact-section[_ngcontent-%COMP%]   .detail[_ngcontent-%COMP%]   .row1[_ngcontent-%COMP%]{display:flex;align-items:center;width:100%;max-width:500px;margin-top:2rem;justify-content:center}section.contact-section[_ngcontent-%COMP%]   .detail[_ngcontent-%COMP%]   .row1[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-left:25px;width:24px;height:24px}section.contact-section[_ngcontent-%COMP%]   .detail[_ngcontent-%COMP%]   .row1[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:18px;color:#333;text-align:center;flex-grow:1}section.contact-section[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{display:flex;justify-content:center;width:100%;margin-top:2rem;gap:2rem}section.contact-section[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:32px;height:32px;flex-shrink:0}"]});let t=e;return t})();var CS=[{path:"",redirectTo:"login",pathMatch:"full"},{path:"login",component:fT},{path:"home",component:_T},{path:"otp",component:bT},{path:"profile",component:rS},{path:"add-address",component:oS},{path:"member-detail",component:cS},{path:"event-payment",component:Iv},{path:"payment/:id",component:Iv},{path:"payment-successful",component:uS},{path:"patmentfailed",component:yS},{path:"survey-list",component:dS},{path:"event-list",component:hS},{path:"slab/:id",component:fS},{path:"varient/:id",component:pS},{path:"donation",component:mS},{path:"feed",component:_S},{path:"coupon",component:gS},{path:"account",component:vS},{path:"history",component:wS},{path:"PaymentDetail/:BookingId",component:IS},{path:"ContactUs",component:ES}];var w2="@",I2=(()=>{let e=class e{constructor(i,r,s,o,c){this.doc=i,this.delegate=r,this.zone=s,this.animationType=o,this.moduleImpl=c,this._rendererFactoryPromise=null,this.scheduler=W(o0,{optional:!0})}ngOnDestroy(){this._engine?.flush()}loadImpl(){return(this.moduleImpl??import("./chunk-5HDEMYQ4.js").then(r=>r)).catch(r=>{throw new je(5300,!1)}).then(({\u0275createEngine:r,\u0275AnimationRendererFactory:s})=>{this._engine=r(this.animationType,this.doc);let o=new s(this.delegate,this._engine,this.zone);return this.delegate=o,o})}createRenderer(i,r){let s=this.delegate.createRenderer(i,r);if(s.\u0275type===0)return s;typeof s.throwOnSyntheticProps=="boolean"&&(s.throwOnSyntheticProps=!1);let o=new Ev(s);return r?.data?.animation&&!this._rendererFactoryPromise&&(this._rendererFactoryPromise=this.loadImpl()),this._rendererFactoryPromise?.then(c=>{let l=c.createRenderer(i,r);o.use(l),this.scheduler?.notify(9)}).catch(c=>{o.use(s)}),o}begin(){this.delegate.begin?.()}end(){this.delegate.end?.()}whenRenderingDone(){return this.delegate.whenRenderingDone?.()??Promise.resolve()}};e.\u0275fac=function(r){Fh()},e.\u0275prov=$({token:e,factory:e.\u0275fac});let t=e;return t})(),Ev=class{constructor(e){this.delegate=e,this.replay=[],this.\u0275type=1}use(e){if(this.delegate=e,this.replay!==null){for(let n of this.replay)n(e);this.replay=null}}get data(){return this.delegate.data}destroy(){this.replay=null,this.delegate.destroy()}createElement(e,n){return this.delegate.createElement(e,n)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}get destroyNode(){return this.delegate.destroyNode}appendChild(e,n){this.delegate.appendChild(e,n)}insertBefore(e,n,i,r){this.delegate.insertBefore(e,n,i,r)}removeChild(e,n,i){this.delegate.removeChild(e,n,i)}selectRootElement(e,n){return this.delegate.selectRootElement(e,n)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,n,i,r){this.delegate.setAttribute(e,n,i,r)}removeAttribute(e,n,i){this.delegate.removeAttribute(e,n,i)}addClass(e,n){this.delegate.addClass(e,n)}removeClass(e,n){this.delegate.removeClass(e,n)}setStyle(e,n,i,r){this.delegate.setStyle(e,n,i,r)}removeStyle(e,n,i){this.delegate.removeStyle(e,n,i)}setProperty(e,n,i){this.shouldReplay(n)&&this.replay.push(r=>r.setProperty(e,n,i)),this.delegate.setProperty(e,n,i)}setValue(e,n){this.delegate.setValue(e,n)}listen(e,n,i){return this.shouldReplay(n)&&this.replay.push(r=>r.listen(e,n,i)),this.delegate.listen(e,n,i)}shouldReplay(e){return this.replay!==null&&e.startsWith(w2)}};function TS(t="animations"){return Vh("NgAsyncAnimations"),pt([{provide:nl,useFactory:(e,n,i)=>new I2(e,n,i,t),deps:[ue,_l,ce]},{provide:Lo,useValue:t==="noop"?"NoopAnimations":"BrowserAnimations"}])}var PS="functions";var Cv=class{constructor(e,n,i){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=e.getImmediate({optional:!0}),this.messaging=n.getImmediate({optional:!0}),this.auth||e.get().then(r=>this.auth=r,()=>{}),this.messaging||n.get().then(r=>this.messaging=r,()=>{}),this.appCheck||i.get().then(r=>this.appCheck=r,()=>{})}getAuthToken(){return g(this,null,function*(){if(this.auth)try{let e=yield this.auth.getToken();return e?.accessToken}catch{return}})}getMessagingToken(){return g(this,null,function*(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return yield this.messaging.getToken()}catch{return}})}getAppCheckToken(e){return g(this,null,function*(){if(this.appCheck){let n=e?yield this.appCheck.getLimitedUseToken():yield this.appCheck.getToken();return n.error?null:n.token}return null})}getContext(e){return g(this,null,function*(){let n=yield this.getAuthToken(),i=yield this.getMessagingToken(),r=yield this.getAppCheckToken(e);return{authToken:n,messagingToken:i,appCheckToken:r}})}};var Tv="us-central1";var Sv=class{constructor(e,n,i,r,s=Tv,o){this.app=e,this.fetchImpl=o,this.emulatorOrigin=null,this.contextProvider=new Cv(n,i,r),this.cancelAllRequests=new Promise(c=>{this.deleteService=()=>Promise.resolve(c())});try{let c=new URL(s);this.customDomain=c.origin,this.region=Tv}catch{this.customDomain=null,this.region=s}}_delete(){return this.deleteService()}_url(e){let n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}};function E2(t,e,n){t.emulatorOrigin=`http://${e}:${n}`}var SS="@firebase/functions",AS="0.11.6";var C2="auth-internal",T2="app-check-internal",S2="messaging-internal";function A2(t,e){let n=(i,{instanceIdentifier:r})=>{let s=i.getProvider("app").getImmediate(),o=i.getProvider(C2),c=i.getProvider(S2),l=i.getProvider(T2);return new Sv(s,o,c,l,r,t)};yt(new et(PS,n,"PUBLIC").setMultipleInstances(!0)),we(SS,AS,e),we(SS,AS,"esm2017")}function RS(t=en(),e=Tv){let i=Ht(Re(t),PS).getImmediate({identifier:e}),r=bs("functions");return r&&DS(i,...r),i}function DS(t,e,n){E2(Re(t),e,n)}A2(fetch.bind(self));var Dc=class{constructor(e){return e}},OS="functions",Av=class{constructor(){return Tn(OS)}};var Pv=new te("angularfire2.functions-instances");function P2(t,e){let n=jn(OS,t,e);return n&&new Dc(n)}function R2(t){return(e,n)=>{let i=e.runOutsideAngular(()=>t(n));return new Dc(i)}}var D2={provide:Av,deps:[[new Ve,Pv]]},O2={provide:Dc,useFactory:P2,deps:[[new Ve,Pv],$t]};function kS(t,...e){return we("angularfire",tn.full,"fn"),pt([O2,D2,{provide:Pv,useFactory:R2(t),multi:!0,deps:[ce,ke,pn,nn,[new Ve,mi],[new Ve,Un],...e]}])}var xS=Me(RS,!0);var FS="@firebase/installations",kv="0.6.8";var VS=1e4,LS=`w:${kv}`,US="FIS_v2",k2="https://firebaseinstallations.googleapis.com/v1",x2=60*60*1e3,M2="installations",N2="Installations";var F2={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Xr=new Zt(M2,N2,F2);function jS(t){return t instanceof vt&&t.code.includes("request-failed")}function BS({projectId:t}){return`${k2}/projects/${t}/installations`}function zS(t){return{token:t.token,requestStatus:2,expiresIn:L2(t.expiresIn),creationTime:Date.now()}}function $S(t,e){return g(this,null,function*(){let i=(yield e.json()).error;return Xr.create("request-failed",{requestName:t,serverCode:i.code,serverMessage:i.message,serverStatus:i.status})})}function qS({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function V2(t,{refreshToken:e}){let n=qS(t);return n.append("Authorization",U2(e)),n}function GS(t){return g(this,null,function*(){let e=yield t();return e.status>=500&&e.status<600?t():e})}function L2(t){return Number(t.replace("s","000"))}function U2(t){return`${US} ${t}`}function j2(i,r){return g(this,arguments,function*({appConfig:t,heartbeatServiceProvider:e},{fid:n}){let s=BS(t),o=qS(t),c=e.getImmediate({optional:!0});if(c){let p=yield c.getHeartbeatsHeader();p&&o.append("x-firebase-client",p)}let l={fid:n,authVersion:US,appId:t.appId,sdkVersion:LS},u={method:"POST",headers:o,body:JSON.stringify(l)},h=yield GS(()=>fetch(s,u));if(h.ok){let p=yield h.json();return{fid:p.fid||n,registrationStatus:2,refreshToken:p.refreshToken,authToken:zS(p.authToken)}}else throw yield $S("Create Installation",h)})}function WS(t){return new Promise(e=>{setTimeout(e,t)})}function B2(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}var z2=/^[cdef][\w-]{21}$/,Ov="";function $2(){try{let t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;let n=q2(t);return z2.test(n)?n:Ov}catch{return Ov}}function q2(t){return B2(t).substr(0,22)}function Hd(t){return`${t.appName}!${t.appId}`}var HS=new Map;function KS(t,e){let n=Hd(t);YS(n,e),G2(n,e)}function YS(t,e){let n=HS.get(t);if(n)for(let i of n)i(e)}function G2(t,e){let n=W2();n&&n.postMessage({key:t,fid:e}),H2()}var Qr=null;function W2(){return!Qr&&"BroadcastChannel"in self&&(Qr=new BroadcastChannel("[Firebase] FID Change"),Qr.onmessage=t=>{YS(t.data.key,t.data.fid)}),Qr}function H2(){HS.size===0&&Qr&&(Qr.close(),Qr=null)}var K2="firebase-installations-database",Y2=1,Jr="firebase-installations-store",Rv=null;function xv(){return Rv||(Rv=yr(K2,Y2,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Jr)}}})),Rv}function Wd(t,e){return g(this,null,function*(){let n=Hd(t),r=(yield xv()).transaction(Jr,"readwrite"),s=r.objectStore(Jr),o=yield s.get(n);return yield s.put(e,n),yield r.done,(!o||o.fid!==e.fid)&&KS(t,e.fid),e})}function QS(t){return g(this,null,function*(){let e=Hd(t),i=(yield xv()).transaction(Jr,"readwrite");yield i.objectStore(Jr).delete(e),yield i.done})}function Kd(t,e){return g(this,null,function*(){let n=Hd(t),r=(yield xv()).transaction(Jr,"readwrite"),s=r.objectStore(Jr),o=yield s.get(n),c=e(o);return c===void 0?yield s.delete(n):yield s.put(c,n),yield r.done,c&&(!o||o.fid!==c.fid)&&KS(t,c.fid),c})}function Mv(t){return g(this,null,function*(){let e,n=yield Kd(t.appConfig,i=>{let r=Q2(i),s=X2(t,r);return e=s.registrationPromise,s.installationEntry});return n.fid===Ov?{installationEntry:yield e}:{installationEntry:n,registrationPromise:e}})}function Q2(t){let e=t||{fid:$2(),registrationStatus:0};return XS(e)}function X2(t,e){if(e.registrationStatus===0){if(!navigator.onLine){let r=Promise.reject(Xr.create("app-offline"));return{installationEntry:e,registrationPromise:r}}let n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},i=J2(t,n);return{installationEntry:n,registrationPromise:i}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:Z2(t)}:{installationEntry:e}}function J2(t,e){return g(this,null,function*(){try{let n=yield j2(t,e);return Wd(t.appConfig,n)}catch(n){throw jS(n)&&n.customData.serverCode===409?yield QS(t.appConfig):yield Wd(t.appConfig,{fid:e.fid,registrationStatus:0}),n}})}function Z2(t){return g(this,null,function*(){let e=yield MS(t.appConfig);for(;e.registrationStatus===1;)yield WS(100),e=yield MS(t.appConfig);if(e.registrationStatus===0){let{installationEntry:n,registrationPromise:i}=yield Mv(t);return i||n}return e})}function MS(t){return Kd(t,e=>{if(!e)throw Xr.create("installation-not-found");return XS(e)})}function XS(t){return eU(t)?{fid:t.fid,registrationStatus:0}:t}function eU(t){return t.registrationStatus===1&&t.registrationTime+VS<Date.now()}function tU(i,r){return g(this,arguments,function*({appConfig:t,heartbeatServiceProvider:e},n){let s=nU(t,n),o=V2(t,n),c=e.getImmediate({optional:!0});if(c){let p=yield c.getHeartbeatsHeader();p&&o.append("x-firebase-client",p)}let l={installation:{sdkVersion:LS,appId:t.appId}},u={method:"POST",headers:o,body:JSON.stringify(l)},h=yield GS(()=>fetch(s,u));if(h.ok){let p=yield h.json();return zS(p)}else throw yield $S("Generate Auth Token",h)})}function nU(t,{fid:e}){return`${BS(t)}/${e}/authTokens:generate`}function Nv(t,e=!1){return g(this,null,function*(){let n,i=yield Kd(t.appConfig,s=>{if(!JS(s))throw Xr.create("not-registered");let o=s.authToken;if(!e&&sU(o))return s;if(o.requestStatus===1)return n=iU(t,e),s;{if(!navigator.onLine)throw Xr.create("app-offline");let c=aU(s);return n=rU(t,c),c}});return n?yield n:i.authToken})}function iU(t,e){return g(this,null,function*(){let n=yield NS(t.appConfig);for(;n.authToken.requestStatus===1;)yield WS(100),n=yield NS(t.appConfig);let i=n.authToken;return i.requestStatus===0?Nv(t,e):i})}function NS(t){return Kd(t,e=>{if(!JS(e))throw Xr.create("not-registered");let n=e.authToken;return cU(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}function rU(t,e){return g(this,null,function*(){try{let n=yield tU(t,e),i=Object.assign(Object.assign({},e),{authToken:n});return yield Wd(t.appConfig,i),n}catch(n){if(jS(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))yield QS(t.appConfig);else{let i=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});yield Wd(t.appConfig,i)}throw n}})}function JS(t){return t!==void 0&&t.registrationStatus===2}function sU(t){return t.requestStatus===2&&!oU(t)}function oU(t){let e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+x2}function aU(t){let e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function cU(t){return t.requestStatus===1&&t.requestTime+VS<Date.now()}function lU(t){return g(this,null,function*(){let e=t,{installationEntry:n,registrationPromise:i}=yield Mv(e);return i?i.catch(console.error):Nv(e).catch(console.error),n.fid})}function uU(t,e=!1){return g(this,null,function*(){let n=t;return yield dU(n),(yield Nv(n,e)).token})}function dU(t){return g(this,null,function*(){let{registrationPromise:e}=yield Mv(t);e&&(yield e)})}function hU(t){if(!t||!t.options)throw Dv("App Configuration");if(!t.name)throw Dv("App Name");let e=["projectId","apiKey","appId"];for(let n of e)if(!t.options[n])throw Dv(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function Dv(t){return Xr.create("missing-app-config-values",{valueName:t})}var ZS="installations",fU="installations-internal",pU=t=>{let e=t.getProvider("app").getImmediate(),n=hU(e),i=Ht(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:i,_delete:()=>Promise.resolve()}},mU=t=>{let e=t.getProvider("app").getImmediate(),n=Ht(e,ZS).getImmediate();return{getId:()=>lU(n),getToken:r=>uU(n,r)}};function gU(){yt(new et(ZS,pU,"PUBLIC")),yt(new et(fU,mU,"PRIVATE"))}gU();we(FS,kv);we(FS,kv,"esm2017");var _U="/firebase-messaging-sw.js",vU="/firebase-cloud-messaging-push-scope",sA="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",yU="https://fcmregistrations.googleapis.com/v1",oA="google.c.a.c_id",bU="google.c.a.c_l",wU="google.c.a.ts",IU="google.c.a.e";var Yd=function(t){return t.PUSH_RECEIVED="push-received",t.NOTIFICATION_CLICKED="notification-clicked",t}(Yd||{});function Ti(t){let e=new Uint8Array(t);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function EU(t){let e="=".repeat((4-t.length%4)%4),n=(t+e).replace(/\-/g,"+").replace(/_/g,"/"),i=atob(n),r=new Uint8Array(i.length);for(let s=0;s<i.length;++s)r[s]=i.charCodeAt(s);return r}var Fv="fcm_token_details_db",CU=5,eA="fcm_token_object_Store";function TU(t){return g(this,null,function*(){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(s=>s.name).includes(Fv))return null;let e=null;return(yield yr(Fv,CU,{upgrade:(i,r,s,o)=>g(this,null,function*(){var c;if(r<2||!i.objectStoreNames.contains(eA))return;let l=o.objectStore(eA),u=yield l.index("fcmSenderId").get(t);if(yield l.clear(),!!u){if(r===2){let h=u;if(!h.auth||!h.p256dh||!h.endpoint)return;e={token:h.fcmToken,createTime:(c=h.createTime)!==null&&c!==void 0?c:Date.now(),subscriptionOptions:{auth:h.auth,p256dh:h.p256dh,endpoint:h.endpoint,swScope:h.swScope,vapidKey:typeof h.vapidKey=="string"?h.vapidKey:Ti(h.vapidKey)}}}else if(r===3){let h=u;e={token:h.fcmToken,createTime:h.createTime,subscriptionOptions:{auth:Ti(h.auth),p256dh:Ti(h.p256dh),endpoint:h.endpoint,swScope:h.swScope,vapidKey:Ti(h.vapidKey)}}}else if(r===4){let h=u;e={token:h.fcmToken,createTime:h.createTime,subscriptionOptions:{auth:Ti(h.auth),p256dh:Ti(h.p256dh),endpoint:h.endpoint,swScope:h.swScope,vapidKey:Ti(h.vapidKey)}}}}})})).close(),yield zl(Fv),yield zl("fcm_vapid_details_db"),yield zl("undefined"),SU(e)?e:null})}function SU(t){if(!t||!t.subscriptionOptions)return!1;let{subscriptionOptions:e}=t;return typeof t.createTime=="number"&&t.createTime>0&&typeof t.token=="string"&&t.token.length>0&&typeof e.auth=="string"&&e.auth.length>0&&typeof e.p256dh=="string"&&e.p256dh.length>0&&typeof e.endpoint=="string"&&e.endpoint.length>0&&typeof e.swScope=="string"&&e.swScope.length>0&&typeof e.vapidKey=="string"&&e.vapidKey.length>0}var AU="firebase-messaging-database",PU=1,Oc="firebase-messaging-store",Vv=null;function aA(){return Vv||(Vv=yr(AU,PU,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Oc)}}})),Vv}function RU(t){return g(this,null,function*(){let e=cA(t),i=yield(yield aA()).transaction(Oc).objectStore(Oc).get(e);if(i)return i;{let r=yield TU(t.appConfig.senderId);if(r)return yield jv(t,r),r}})}function jv(t,e){return g(this,null,function*(){let n=cA(t),r=(yield aA()).transaction(Oc,"readwrite");return yield r.objectStore(Oc).put(e,n),yield r.done,e})}function cA({appConfig:t}){return t.appId}var DU={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},Gt=new Zt("messaging","Messaging",DU);function OU(t,e){return g(this,null,function*(){let n=yield zv(t),i=lA(e),r={method:"POST",headers:n,body:JSON.stringify(i)},s;try{s=yield(yield fetch(Bv(t.appConfig),r)).json()}catch(o){throw Gt.create("token-subscribe-failed",{errorInfo:o?.toString()})}if(s.error){let o=s.error.message;throw Gt.create("token-subscribe-failed",{errorInfo:o})}if(!s.token)throw Gt.create("token-subscribe-no-token");return s.token})}function kU(t,e){return g(this,null,function*(){let n=yield zv(t),i=lA(e.subscriptionOptions),r={method:"PATCH",headers:n,body:JSON.stringify(i)},s;try{s=yield(yield fetch(`${Bv(t.appConfig)}/${e.token}`,r)).json()}catch(o){throw Gt.create("token-update-failed",{errorInfo:o?.toString()})}if(s.error){let o=s.error.message;throw Gt.create("token-update-failed",{errorInfo:o})}if(!s.token)throw Gt.create("token-update-no-token");return s.token})}function xU(t,e){return g(this,null,function*(){let i={method:"DELETE",headers:yield zv(t)};try{let s=yield(yield fetch(`${Bv(t.appConfig)}/${e}`,i)).json();if(s.error){let o=s.error.message;throw Gt.create("token-unsubscribe-failed",{errorInfo:o})}}catch(r){throw Gt.create("token-unsubscribe-failed",{errorInfo:r?.toString()})}})}function Bv({projectId:t}){return`${yU}/projects/${t}/registrations`}function zv(n){return g(this,arguments,function*({appConfig:t,installations:e}){let i=yield e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey,"x-goog-firebase-installations-auth":`FIS ${i}`})})}function lA({p256dh:t,auth:e,endpoint:n,vapidKey:i}){let r={web:{endpoint:n,auth:e,p256dh:t}};return i!==sA&&(r.web.applicationPubKey=i),r}var MU=7*24*60*60*1e3;function NU(t){return g(this,null,function*(){let e=yield VU(t.swRegistration,t.vapidKey),n={vapidKey:t.vapidKey,swScope:t.swRegistration.scope,endpoint:e.endpoint,auth:Ti(e.getKey("auth")),p256dh:Ti(e.getKey("p256dh"))},i=yield RU(t.firebaseDependencies);if(i){if(LU(i.subscriptionOptions,n))return Date.now()>=i.createTime+MU?FU(t,{token:i.token,createTime:Date.now(),subscriptionOptions:n}):i.token;try{yield xU(t.firebaseDependencies,i.token)}catch(r){console.warn(r)}return tA(t.firebaseDependencies,n)}else return tA(t.firebaseDependencies,n)})}function FU(t,e){return g(this,null,function*(){try{let n=yield kU(t.firebaseDependencies,e),i=Object.assign(Object.assign({},e),{token:n,createTime:Date.now()});return yield jv(t.firebaseDependencies,i),n}catch(n){throw n}})}function tA(t,e){return g(this,null,function*(){let i={token:yield OU(t,e),createTime:Date.now(),subscriptionOptions:e};return yield jv(t,i),i.token})}function VU(t,e){return g(this,null,function*(){let n=yield t.pushManager.getSubscription();return n||t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:EU(e)})})}function LU(t,e){let n=e.vapidKey===t.vapidKey,i=e.endpoint===t.endpoint,r=e.auth===t.auth,s=e.p256dh===t.p256dh;return n&&i&&r&&s}function nA(t){let e={from:t.from,collapseKey:t.collapse_key,messageId:t.fcmMessageId};return UU(e,t),jU(e,t),BU(e,t),e}function UU(t,e){if(!e.notification)return;t.notification={};let n=e.notification.title;n&&(t.notification.title=n);let i=e.notification.body;i&&(t.notification.body=i);let r=e.notification.image;r&&(t.notification.image=r);let s=e.notification.icon;s&&(t.notification.icon=s)}function jU(t,e){e.data&&(t.data=e.data)}function BU(t,e){var n,i,r,s,o;if(!e.fcmOptions&&!(!((n=e.notification)===null||n===void 0)&&n.click_action))return;t.fcmOptions={};let c=(r=(i=e.fcmOptions)===null||i===void 0?void 0:i.link)!==null&&r!==void 0?r:(s=e.notification)===null||s===void 0?void 0:s.click_action;c&&(t.fcmOptions.link=c);let l=(o=e.fcmOptions)===null||o===void 0?void 0:o.analytics_label;l&&(t.fcmOptions.analyticsLabel=l)}function zU(t){return typeof t=="object"&&!!t&&oA in t}uA("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o");uA("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");function uA(t,e){let n=[];for(let i=0;i<t.length;i++)n.push(t.charAt(i)),i<e.length&&n.push(e.charAt(i));return n.join("")}function $U(t){if(!t||!t.options)throw Lv("App Configuration Object");if(!t.name)throw Lv("App Name");let e=["projectId","apiKey","appId","messagingSenderId"],{options:n}=t;for(let i of e)if(!n[i])throw Lv(i);return{appName:t.name,projectId:n.projectId,apiKey:n.apiKey,appId:n.appId,senderId:n.messagingSenderId}}function Lv(t){return Gt.create("missing-app-config-values",{valueName:t})}var Uv=class{constructor(e,n,i){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;let r=$U(e);this.firebaseDependencies={app:e,appConfig:r,installations:n,analyticsProvider:i}}_delete(){return Promise.resolve()}};function qU(t){return g(this,null,function*(){try{t.swRegistration=yield navigator.serviceWorker.register(_U,{scope:vU}),t.swRegistration.update().catch(()=>{})}catch(e){throw Gt.create("failed-service-worker-registration",{browserErrorMessage:e?.message})}})}function GU(t,e){return g(this,null,function*(){if(!e&&!t.swRegistration&&(yield qU(t)),!(!e&&t.swRegistration)){if(!(e instanceof ServiceWorkerRegistration))throw Gt.create("invalid-sw-registration");t.swRegistration=e}})}function WU(t,e){return g(this,null,function*(){e?t.vapidKey=e:t.vapidKey||(t.vapidKey=sA)})}function HU(t,e){return g(this,null,function*(){if(!navigator)throw Gt.create("only-available-in-window");if(Notification.permission==="default"&&(yield Notification.requestPermission()),Notification.permission!=="granted")throw Gt.create("permission-blocked");return yield WU(t,e?.vapidKey),yield GU(t,e?.serviceWorkerRegistration),NU(t)})}function KU(t,e,n){return g(this,null,function*(){let i=YU(e);(yield t.firebaseDependencies.analyticsProvider.get()).logEvent(i,{message_id:n[oA],message_name:n[bU],message_time:n[wU],message_device_time:Math.floor(Date.now()/1e3)})})}function YU(t){switch(t){case Yd.NOTIFICATION_CLICKED:return"notification_open";case Yd.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function QU(t,e){return g(this,null,function*(){let n=e.data;if(!n.isFirebaseMessaging)return;t.onMessageHandler&&n.messageType===Yd.PUSH_RECEIVED&&(typeof t.onMessageHandler=="function"?t.onMessageHandler(nA(n)):t.onMessageHandler.next(nA(n)));let i=n.data;zU(i)&&i[IU]==="1"&&(yield KU(t,n.messageType,i))})}var iA="@firebase/messaging",rA="0.12.10";var XU=t=>{let e=new Uv(t.getProvider("app").getImmediate(),t.getProvider("installations-internal").getImmediate(),t.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",n=>QU(e,n)),e},JU=t=>{let e=t.getProvider("messaging").getImmediate();return{getToken:i=>HU(e,i)}};function ZU(){yt(new et("messaging",XU,"PUBLIC")),yt(new et("messaging-internal",JU,"PRIVATE")),we(iA,rA),we(iA,rA,"esm2017")}function $v(){return g(this,null,function*(){try{yield Ul()}catch{return!1}return typeof window<"u"&&wa()&&Lb()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})}function dA(t=en()){return $v().then(e=>{if(!e)throw Gt.create("unsupported-browser")},e=>{throw Gt.create("indexed-db-unsupported")}),Ht(Re(t),"messaging").getImmediate()}ZU();var kc=class{constructor(e){return e}},hA="messaging",qv=class{constructor(){return Tn(hA)}};var fA="__angularfire_symbol__messagingIsSupported",Gv="__angularfire_symbol__messagingIsSupportedValue";globalThis[fA]||=$v().then(t=>globalThis[Gv]=t).catch(()=>globalThis[Gv]=!1);var Qd={async:()=>globalThis[fA],sync:()=>{let t=globalThis[Gv];if(t===void 0)throw new Error(ew("Messaging"));return t}},Wv=new te("angularfire2.messaging-instances");function ej(t,e){if(!Qd.sync())return null;let n=jn(hA,t,e);return n&&new kc(n)}function tj(t){return(e,n)=>{if(!Qd.sync())return null;let i=e.runOutsideAngular(()=>t(n));return new kc(i)}}var nj={provide:qv,deps:[[new Ve,Wv]]},ij={provide:kc,useFactory:ej,deps:[[new Ve,Wv],$t]};function pA(t,...e){return we("angularfire",tn.full,"fcm"),pt([ij,nj,{provide:Uh,useValue:Qd.async,multi:!0},{provide:Wv,useFactory:tj(t),multi:!0,deps:[ce,ke,pn,nn,...e]}])}var WW=Qd.async;var mA=Me(dA,!0);var gA={providers:[g0({eventCoalescing:!0}),U0(j0()),Rb(CS),TS(),tw(()=>nw({apiKey:"AIzaSyA9mqYMpobF0WJuA0h-l1Qft5v7PjVwgOI",authDomain:"fyi1-aa2c2.firebaseapp.com",projectId:"fyi1-aa2c2",storageBucket:"fyi1-aa2c2.appspot.com",messagingSenderId:"273891090725",appId:"1:273891090725:web:1a3a2b61ba58a8e632bacc",measurementId:"G-CJ026BL27H"})),Jw(()=>hu()),kC(()=>MC()),kS(()=>xS()),pA(()=>mA()),ZT(()=>tS())]};function rj(t,e){if(t&1){let n=Le();v(0,"div",1)(1,"button",2),G("click",function(){ge(n);let r=ne();return _e(r.moveToHome())}),L(2,"img",3),v(3,"span"),E(4,"Home"),y()(),v(5,"button",2),G("click",function(){ge(n);let r=ne();return _e(r.moveTohistory())}),L(6,"img",4),v(7,"span"),E(8,"History"),y()(),v(9,"button",2),G("click",function(){ge(n);let r=ne();return _e(r.moveToaccount())}),L(10,"img",5),v(11,"span"),E(12,"Account"),y()()()}if(t&2){let n=ne();N(),St("active",n.currentTab==="home"),N(),j("src",n.currentTab==="home"?"/assets/navbar/home1.svg":"/assets/navbar/home.svg",Tt),N(3),St("active",n.currentTab==="donation"),N(),j("src",n.currentTab==="donation"?"/assets/navbar/history1.svg":"/assets/navbar/history.svg",Tt),N(3),St("active",n.currentTab==="account"),N(),j("src",n.currentTab==="account"?"/assets/navbar/profile1.svg":"/assets/navbar/profile.svg",Tt)}}var _A=(()=>{let e=class e{constructor(i,r){this.router=i,this.DataProviderService=r,this.hiddenRoutes=["/login","/add-address","/otp","/profile","/member-detail","event-payment","payment","payment-successful","patmentfailed","varient"],this.currentTab="home",this.checkRoute(this.router.url),this.router.events.subscribe(s=>{s instanceof di&&this.checkRoute(s.urlAfterRedirects)})}moveToHome(){this.currentTab="home",this.router.navigate(["home"])}moveTohistory(){this.currentTab="donation",this.router.navigate(["history"])}moveTofeed(){this.currentTab="feed",this.router.navigate(["feed"])}moveTocoupon(){this.currentTab="coupon",this.router.navigate(["coupon"])}moveToaccount(){this.currentTab="account",this.router.navigate(["account"])}checkRoute(i){this.showNavbar=!this.hiddenRoutes.some(r=>i.includes(r))}};e.\u0275fac=function(r){return new(r||e)(k(he),k(ht))},e.\u0275cmp=H({type:e,selectors:[["app-navbar"]],standalone:!0,features:[Q],decls:1,vars:1,consts:[["class","navbar",4,"ngIf"],[1,"navbar"],[3,"click"],["alt","Home",3,"src"],["alt","Donation",3,"src"],["alt","Account",3,"src"]],template:function(r,s){r&1&&oe(0,rj,13,9,"div",0),r&2&&j("ngIf",s.showNavbar)},dependencies:[xe,Nt],styles:[".navbar[_ngcontent-%COMP%]{border-radius:30px;display:flex;position:fixed;justify-content:space-between;bottom:0;background:#fff;height:80px;width:100%;z-index:1000;padding-left:20px;padding-right:20px}.navbar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:none;border:none;display:flex;flex-direction:column;align-items:center;justify-content:center;transition:all .3s ease;position:relative}.navbar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{padding:10px;transition:all .3s ease}.navbar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:12px;margin-top:5px;color:#000;transition:color .3s ease}.navbar[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{background:#fff}.navbar[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{transform:translateY(-5px);background:linear-gradient(90.32deg,#2f15aa .28%,#2f15aacc 47.84%,#2f15aa66 99.72%);border-radius:30px}.navbar[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{transform:translateY(-5px);color:#2f15aa}"]});let t=e;return t})();var vA=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=He({type:e}),e.\u0275inj=We({imports:[xe,nv]});let t=e;return t})();function sj(t,e){t&1&&(v(0,"div",1),L(1,"div",2),y())}var yA=(()=>{let e=class e{constructor(i){this.loadingService=i,this.isLoading=this.loadingService.isLoading$}};e.\u0275fac=function(r){return new(r||e)(k(Ld))},e.\u0275cmp=H({type:e,selectors:[["app-spinner"]],standalone:!0,features:[Q],decls:2,vars:3,consts:[["class","spinner-overlay",4,"ngIf"],[1,"spinner-overlay"],[1,"spinner"]],template:function(r,s){r&1&&(oe(0,sj,2,0,"div",0),rl(1,"async")),r&2&&j("ngIf",sl(1,1,s.isLoading))},dependencies:[vA,xe,Nt,I0],styles:[".spinner-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background-color:#ffffffb3;display:flex;justify-content:center;align-items:center;z-index:10000}.spinner[_ngcontent-%COMP%]{border:8px solid #f3f3f3;border-top:8px solid #3498db;border-radius:50%;width:60px;height:60px;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}"]});let t=e;return t})();var bA=(()=>{let e=class e{constructor(){this.title="donor"}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=H({type:e,selectors:[["app-root"]],standalone:!0,features:[Q],decls:3,vars:0,template:function(r,s){r&1&&L(0,"app-spinner")(1,"router-outlet")(2,"app-navbar")},dependencies:[zf,_A,yA]});let t=e;return t})();H0(bA,gA).catch(t=>console.error(t));
